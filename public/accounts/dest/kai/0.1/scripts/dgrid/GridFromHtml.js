define("dgrid/GridFromHtml",["./Grid","dojo/_base/declare","dojo/dom-construct"],function(Grid,declare,domConstruct){function getSubRowsFromDom(r){for(var t,e,o,n,s=[],a=r.getElementsByTagName("tr"),i=a.length,m=GridFromHtml.utils.getColumnFromCell,l=0;i>l;l++){t=[],s.push(t),e=a[l],o=e.getElementsByTagName("th"),n=o.length;for(var d=0;n>d;d++)t.push(m(o[d]))}return e&&r.removeChild(e.parentNode),s}var bagName="data-dgrid-column",GridFromHtml=declare(Grid,{configStructure:function(){return this._checkedTrs||(this._checkedTrs=!0,this.subRows=getSubRowsFromDom(this.srcNodeRef,this.subRows)),this.inherited(arguments)},create:function(r,t){var e=document.createElement("div"),o=t.id,n=t.getAttribute("style");o&&(this.id=o),e.className=t.className,n&&e.setAttribute("style",n),t.parentNode.replaceChild(e,t),(r=r||{}).srcNodeRef=t,this.inherited(arguments,[r,e]),domConstruct.destroy(t)}});return GridFromHtml.utils={getBoolFromAttr:function(r,t){var e=r.getAttribute(t);return e&&"false"!==e},getNumFromAttr:function(r,t){var e=r.getAttribute(t);return e=e&&Number(e),isNaN(e)?void 0:e},getPropsFromNode:function(node){var obj,str=node.getAttribute(bagName);if(!str)return{};try{obj=eval("("+str+")")}catch(error){throw new Error("Error in "+bagName+" {"+str+"}: "+error.toString())}return obj},getColumnFromCell:function(r){var t,e,o=GridFromHtml.utils.getNumFromAttr;return t=GridFromHtml.utils.getPropsFromNode(r),t.label="label"in t?t.label:r.innerHTML,t.field=t.field||r.className||r.innerHTML,!t.className&&r.className&&(t.className=r.className),!t.rowSpan&&(e=o(r,"rowspan"))&&(t.rowSpan=e),!t.colSpan&&(e=o(r,"colspan"))&&(t.colSpan=e),t}},GridFromHtml});
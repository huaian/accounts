define("kaiView/h5/view/mobile_index/view",["appRestStore/system_notification","page/viewFactory","../../../viewUtils/index","./viewUtils/mobile_index","./events/events","cutil/c.util.validate"],function(e,t,o,n,i,a){"use strict";var r=t.create("appBaseView"),s=r.extend({events:{},onCreate:function(){},els:{},onShow:function(){},onHide:function(){},init:function(){},prepareViewData:function(){var t=this;t.viewData.hasUnread=!0,e.announcements.get("").then(function(e){if(t.isSucceedResponse(e)){var o=e.body[0]||{},n=t.parentStore.getAttr("readList")||[];alert(JSON.stringify(n));var i=o.id;_.contains(n,i)?t.viewData.hasUnread=!1:i?(n.unshift(i),t.parentStore.setAttr("readList",n),t.viewData.hasUnread=!0):t.viewData.hasUnread=!1,t.vm&&(t.vm.$set("hasUnread",t.viewData.hasUnread),t.viewData.hasUnread&&t.showToast({text:"您有新的未读系统通知",duration:3e3}))}else t.showResponseError(e)},function(e){t.showResponseError(e)}),t.turnOn()},prepareEvents:function(){var e=this;e.event=i},prepareViewUtils:function(){var e=this;e.viewUtils=_.extend({},n)},prepareDataHelper:function(){},afterShow:function(){var e=this;e.hideLoading()},getVueInitParams:function(){var e=this;return{data:{formData:e.memoryStore.getAttr("memory.formData")||{},customerInfo:e.viewData.customerInfo,baseUrl:appPrefx,hasUnread:e.viewData.hasUnread},computed:{},methods:{gotoPhoneCollection:function(t,o){e.model.trigger("gotoPhoneCollection",t)},gotoCustomerSearch:function(t,o){e.model.trigger("gotoCustomerSearch",t)},gotoCollectionPerformance:function(t,o){e.model.trigger("gotoCollectionPerformance",t)},gotoOutboundCollection:function(t,o){e.model.trigger("gotoOutboundCollection",t)},gotoSystemNotification:function(t){e.model.trigger("gotoSystemNotification",t)}}}}});return s});
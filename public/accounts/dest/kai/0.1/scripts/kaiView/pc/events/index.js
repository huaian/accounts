define("kaiView/pc/events/index",["../widget/dijit/code_dialog","dojo/aspect","../topic/topics","dojo/topic","dijit/registry","dojo/on","dijit/layout/LinkPane"],function(e,t,o,n,s,i){"use strict";var l=o.indexLevelTabChangeRequire.getInstance(),a=o.indexLevelTabCloseRequire.getInstance(),c=function(){var e=this,t=e.model.get("currentChildViewName"),o=Kai.views.get(t);if(o){var n=o.get("viewInstance");return n}return!1},d=function(){var e=this;_.each(e.els.topTabs.getChildren(),function(t){e.els.topTabs.closeChild(t)})},r={subscribeTopics:function(){var e=this,o=e.registry.byId("navigation");e.subscribe(l,function(n){var s=function(){e.model&&e.model.set({currentChildViewName:n.data.targetViewId},{changeType:"nav"})};if("navTreeClick"===n.data.cause&&o._showing){try{t.after(o,"_afterResize",_.once(_.delay(s,20)))}catch(n){}e.autoExpandMenu!==!1&&o.toggle()}else s()}),e.subscribe(a,function(t){var o=$.proxy(e.registry.byId,e)(t.data.targetViewId);return o&&_.isObject(o)?void e.els.topTabs.closeChild(o):!1})},unsubscribeTopics:function(){var e=this;e.unsubscribe([l,a])},bindEvents:function(){var t=this;t.navTree&&t.navTree.on("click",function(e){l.set("data",{targetViewId:e.url,cause:"navTreeClick"}),l.publish()}),t.els.topTabs&&t.els.topTabs.watch("selectedChildWidget",function(e,o,n){t.model&&t.model.set({currentChildViewName:t.removeContextPostfix(n.id)},{changeType:"tab"})}),t.els.logoutButton&&t.els.logoutButton.on("click",function(){t.logout(),t.hideLoading()}),t.els.closeAllTabsButton&&t.els.closeAllTabsButton.on("click",function(){$.proxy(d,t)()}),t.els.openAllTabsButton&&t.els.openAllTabsButton.on("click",function(){t.model.trigger("openAllTabs")}),t.els.headerLogo&&t.els.headerLogo.on("dblclick",function(){$(t.els.viewStatesButton.domNode).toggle(),$(t.els.interfacesStatesButton.domNode).toggle(),$(t.els.closeAllTabsButton.domNode).toggle(),$(t.els.openAllTabsButton.domNode).toggle(),t.els.userInfo.toggle()}),t.els.viewStatesButton&&t.els.viewStatesButton.on("click",function(){t.model.set("need_showViewsStatesDialog",!0),t.model.unset("need_showViewsStatesDialog",{silent:!0})}),t.els.interfacesStatesButton&&t.els.interfacesStatesButton.on("click",function(){t.model.set("need_showInterfacesStatesDialog",!0),t.model.unset("need_showInterfacesStatesDialog",{silent:!0})}),t.els.refresh&&t.els.refresh.on("click",function(){var e=$.proxy(c,t)();e&&e.show()}),t.els.showCode&&t.els.showCode.on("click",function(){var o=$.proxy(c,t)();t.codeDialog=new e({view:o}),t.codeDialog.startup(),t.codeDialog.show()}),t.els.changePassButton&&t.els.changePassButton.on("click",function(){t.model.set("need_showChangePasswordDialog",!0),t.model.unset("need_showChangePasswordDialog",{silent:!0})}),t.autoExpandMenu!==!1&&(t.els.navigation&&t.els.navigation.on("mouseover",function(){this._showing||this.toggle()}),t.els.navigation&&t.els.navigation.on("mouseleave",function(){this._showing&&this.toggle()}))}};return{eventBinder:r}});
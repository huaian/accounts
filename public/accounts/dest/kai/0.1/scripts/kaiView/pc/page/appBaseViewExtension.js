define("kaiView/pc/page/appBaseViewExtension",["../topic/topics","page/c.page.view","data/store/c.common.store","cutil/c.util.common","../widget/dijit/login_dialog"],function(e,t,i,o,n){"use strict";var a={},r=i.UserStore.getInstance(),s=(i.HeadStore.getInstance(),e.indexLevelTabChangeRequire.getInstance());return a={"super":t.prototype,initialize:function(){var e=this["super"].initialize.apply(this,arguments);return e},show:function(){var e=this["super"].show.apply(this,arguments);return e}},_.extend(a,{login:function(){var e=this;e.showLoginDialog()},showLoginDialog:function(){var e=this;e.loginDialogInstance||(e.loginDialogInstance=new n({view:e,widgetData:{title:Kai.title||"",isVerificationCode:e.isVerificationCode?!0:!1}})),e.loginDialogInstance.startup(),e.loginDialogInstance.show(),Kai.hideLoading()},logout:function(){var e=this,t=Models.logout.getInstance();e.showLoading();var i=function(t){e.hideLoading(),e.isSucceedResponse(t)?e.showToast({text:"注销成功",callback:function(){r.remove(),_.isObject(localStorage)&&localStorage.clear(),e.forward(Kai.loginUrl,{keepURL:!1})}}):e.showResponseError(t)},o=function(t){e.hideLoading(),e.showResponseError(t)},n=function(){};n();t.execute(i,o,!0,e)},prepareDebugData:function(){var e=this,t=e.getQueryObj();t.applycode&&(e.applyCode=t.applycode)},setUbtData:function(e){var t=this;t.ubtData={current:e||"*",applyCode:t.model.get("applyCode")||"*"}},getStaffNumber:function(){i.HeadStore.getInstance();return(r.get()||{}).user.username},getStaffRole:function(){var e=i.UserStore.getInstance();return e.getAttr("roleMap")},gotoView:function(e){if(!_.isString(e))throw Error("提供的目标页面名称不正确");s.set("data",{targetViewId:e}),s.publish()}}),a});
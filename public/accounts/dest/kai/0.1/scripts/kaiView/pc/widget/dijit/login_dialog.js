require({cache:{"url:kaiView/pc/widget/dijit/templates/login_dialog.html":'<div  data-dojo-attach-point="containerNode">\n	<div data-dojo-type="dijit/Dialog" data-dojo-props=\'\n			title:"请输入用户名密码"\' data-dojo-attach-point=\'dialog\' class="login-dialog">\n		<section class="login-container animation-bounce">\n			<form data-dojo-type="dijit/form/Form" data-dojo-props=\'doLayout:false\' data-dojo-attach-point=\'form\'>\n				<div class="login boxShadow-white-200 borderRadius-3">\n					<h1 class="boxShadow-white-1 borderRadius-3 background-linear-gradient-whiteffd">\n				<i class="iconfont" >&#xf0159;</i>\n				<%=title%></h1>\n				<div class="form-row">\n					<i class="iconfont">&#xf012d;</i>\n					<input  trim="true" data-dojo-type="dijit/form/TextBox" type="text" name="<%=((typeof idNameAttribute !== \'undefined\') && _.isString(idNameAttribute))?idNameAttribute:\'username\'%>" placeholder="请输入用户名">\n				</div>\n\n			    <div class="form-row"><i class="iconfont">&#xf00c9;</i>\n					<input  data-dojo-type="dijit/form/TextBox" type="password" name="<%=((typeof passwordNameAttribute !== \'undefined\') &&  _.isString(passwordNameAttribute))?passwordNameAttribute:\'password\'%>" placeholder="请输入密码">\n				</div>\n				<!--<div class="form-row remember_me">\n					<label>\n						<input type="checkbox" name="remember_me" id="remember_me">\n						记住我？\n					</label>\n				</div>-->\n				<div class=\'form-row submit\' data-dojo-attach-point="actionBarNode">\n					<button class="auto_loginButton" data-dojo-type=\'dijit/form/Button\' data-dojo-attach-point="okButton">确认</button>\n		</div>\n	</div>\n\n</form>\n</section>\n		<div id=\'pc-login\'>\n			<div class="login-back"> </div>\n		</div>\n</div>\n</div>\n'}}),define("kaiView/pc/widget/dijit/login_dialog",["dojox/encoding/crypto/SimpleAES","dojo/on","custom/dijit/_WidgetBase","dojo/_base/declare","dojo/text!./templates/login_dialog.html","dojox/encoding/digests/_base","dojox/encoding/digests/MD5","dijit/form/Select","dijit/form/TextBox","dijit/form/Textarea","dijit/Fieldset","dijit/layout/Container","dijit/Dialog","dijit/form/RadioButton","dijit/ConfirmDialog","dijit/form/Form"],function(i,o,t,e,n,a,d){return e([t],{templateString:n,view:null,loginCallback:null,widgetData:null,show:function(){var i=this;i.dialog.show(),i.inherited(arguments)},login:function(){var o=this,t={};o.view.showLoading();var e=function(e){o.view.hideLoading(),o.view.isSucceedResponse(e)?o.view.showToast({text:"登录成功",callback:function(){o.dialog.hide();var n=o.view.responseBodyParser,a=_.isFunction(n)?n(e):e.body.obj||e.body||{};o.view.setUserStore(_.extend(a,{___password:i.encrypt(t.password,a.ssoToken||"")})),o.view.viewName.indexOf("login")>=0,window.onbeforeunload=null,Kai.restart()}}):o.view.showResponseError(e)},n=function(i){o.view.hideLoading(),o.view.showToast({text:"网络不给力，请重试"})},r=function(){var i=o.form.get("value");return _.isObject(i)&&(i[o.widgetData.idNameAttribute]||i.username||i.loginId)&&(i[o.widgetData.passwordNameAttribute]||i.password)?(o.widgetData.requireMD5Encrypt===!1||(i.password=d(i.password,a.outputTypes.Hex)),i):(o.view.hideLoading(),o.view.showToast({text:"请输入用户名密码"}),!1)};return(t=r())?void(Kai.useRest?o.view._loginComm.add(t).then(function(i){e(i)},function(i){n(i)}):(o.view._loginComm.param=t,o.view._loginComm.execute(e,n,!0,o))):!1},bindEvents:function(){var i=this;return i.eventsBound?!1:(i.eventsBound=!0,o(i.form,"keyup",function(o){("Enter"==o.keyIdentifier||"Enter"==o.key)&&i.login()}),void o(i.okButton,"click",function(){i.login()}))}})});
define("plugin/MaskedPassword",["dojo","dijit","dojox"],function(e,t,n){function a(e,t){if("undefined"==typeof document.getElementById||"undefined"==typeof document.styleSheets)return!1;if(null==e)return!1;this.symbol=t,this.isIE="undefined"!=typeof document.uniqueID,e.value="",e.defaultValue="",e._contextwrapper=this.createContextWrapper(e),this.fullmask=!1;var n=e._contextwrapper,a='<input type="hidden" name="'+e.name+'">',i=this.convertPasswordFieldHTML(e);n.innerHTML=a+i,e=n.lastChild,e.className+=" masked",e.setAttribute("autocomplete","off"),e._realfield=n.firstChild,e._contextwrapper=n,this.limitCaretPosition(e);var r=this;return this.addListener(e,"change",function(e){r.fullmask=!1,r.doPasswordMasking(r.getTarget(e))}),this.addListener(e,"input",function(e){r.fullmask=!1,r.doPasswordMasking(r.getTarget(e))}),this.addListener(e,"propertychange",function(e){r.doPasswordMasking(r.getTarget(e))}),this.addListener(e,"keyup",function(e){/^(9|1[678]|224|3[789]|40)$/.test(e.keyCode.toString())||(r.fullmask=!1,r.doPasswordMasking(r.getTarget(e)))}),this.addListener(e,"blur",function(e){r.fullmask=!0,r.doPasswordMasking(r.getTarget(e))}),this.forceFormReset(e),!0}a.prototype={doPasswordMasking:function(e){var t="";if(""!=e._realfield.value)for(var n=0;n<e.value.length;n++)t+=e.value.charAt(n)==this.symbol?e._realfield.value.charAt(n):e.value.charAt(n);else t=e.value;var a=this.encodeMaskedPassword(t,this.fullmask,e);(e._realfield.value!=t||e.value!=a)&&(e._realfield.value=t,e.value=a)},encodeMaskedPassword:function(e,t,n){for(var a=t===!0?0:1,i="",r=0;r<e.length;r++)i+=r<e.length-a?this.symbol:e.charAt(r);return i},createContextWrapper:function(e){var t=document.createElement("span");return t.style.position="relative",e.parentNode.insertBefore(t,e),t.appendChild(e),t},forceFormReset:function(e){for(;e&&!/form/i.test(e.nodeName);)e=e.parentNode;return/form/i.test(e.nodeName)?(this.addSpecialLoadListener(function(){e.reset()}),e):null},convertPasswordFieldHTML:function(e,t){for(var n="<input",a=e.attributes,i=0;i<a.length;i++)a[i].specified&&!/^(_|type|name)/.test(a[i].name)&&(n+=" "+a[i].name+'="'+a[i].value+'"');return n+=' type="text" autocomplete="off">'},limitCaretPosition:function(e){var t=null,n=function(){null==t&&(t=this.isIE?window.setInterval(function(){var t=e.createTextRange(),n=e.value.length,a="character";t.moveEnd(a,n),t.moveStart(a,n),t.select()},100):window.setInterval(function(){var t=e.value.length;e.selectionEnd==t&&e.selectionStart<=t||(e.selectionStart=t,e.selectionEnd=t)},100))},a=function(){window.clearInterval(t),t=null};this.addListener(e,"focus",function(){n()}),this.addListener(e,"blur",function(){a()})},addListener:function(e,t,n){return"undefined"!=typeof document.addEventListener?e.addEventListener(t,n,!1):"undefined"!=typeof document.attachEvent?e.attachEvent("on"+t,n):void 0},addSpecialLoadListener:function(e){return this.isIE?window.attachEvent("onload",e):document.addEventListener("DOMContentLoaded",e,!1)},getTarget:function(e){return e?e.target?e.target:e.srcElement:null}}});
define("plugin/custom/choosephoto",["MegaPixImage","cUtilCommon"],function(e,t){var i={choosePhotoHelper:{renderHtml:function(i,l,a){var n,s,o,d=d||window.webkitURL,c=document.createElement("canvas"),h=c.getContext("2d"),y=new Image,s=l,o=a||null,m=document.createElement("div"),r=document.createElement("div"),g=document.createElement("span");g.classList.add("ext_file_img"),g.innerHTML="&nbsp; ",n=document.createElement("input"),n.type="file",n.accept="image/*",n.id="img_txt",m.id="img_upload_div",m.classList.add("no_iscroll"),m.style.position="absolute",m.style["z-index"]="10",m.style.height="100%",m.style.top="0",m.style.width="100%",m.style.height="25",m.style.margin="0",r.style.position="relative",r.style["font-weight"]="300",r.style["font-size"]="12px",r.style.overflow="hidden",r.style.display="inline-block",r.style["text-decoration"]="none",r.style.border="0 none",r.style["vertical-align"]="middle",r.style.cursor="pointer",r.style.color="#099fde",r.style.width="100%",r.style.height="100%",r.style.color="#099fde",r.style.width="100%",r.style.display="inline-block",r.className="nofastclick js_img_div",g.style.display="block",g.style["-webkit-animation"]="all 800ms ease-in-out,opacity 500ms ease-in-out",g.style["-moz-animation"]="all 800ms ease-in-out,opacity 500ms ease-in-out",g.style["-ms-animation"]="all 800ms ease-in-out,opacity 500ms ease-in-out",g.style.animation="all 800ms ease-in-out,opacity 500ms ease-in-out",g.style.width="100%",g.style.height="30px",g.style["float"]="left",g.style["font-size"]="15px",n.readOnly="readOnly",n.style.opacity="0",n.style.position="absolute",n.style.left="0",n.style["font-size"]="40px",n.style.width="100%",n.style.height="100%",n.style.direction="rtl",n.className="nofastclick",r.appendChild(g),r.appendChild(n),m.appendChild(r),"function"==typeof $(i).append&&$(i).append(m),n.onchange=function(){if(n.files[0]&&n.value)if(d)try{y.src=d.createObjectURL(n.files[0])}catch(e){}else;},y.onload=function(){var i=.8,l=768;if(y.width>l){var a=1-(y.width-l)/y.width;y.width=y.width*a,y.height=y.height*a}c.height=y.height,c.width=y.width,h.drawImage(y,0,0,c.width,c.height);var n;if(navigator.userAgent.match(/iphone/i)){var d=new e(y);d.render(c,{maxWidth:y.width,maxHeight:y.height,quality:i}),n=c.toDataURL("image/jpeg",i)}else if(navigator.userAgent.match(/Android/i)){var m=new t.JPEGEncoder;n=m.encode(h.getImageData(0,0,y.width,y.height),80)}else n=c.toDataURL("image/jpeg",i);$(s).html('<img class="share_contentimg" alt="" src="'+n+'">'),_.isFunction(o)&&o&&o()}}}};return i});
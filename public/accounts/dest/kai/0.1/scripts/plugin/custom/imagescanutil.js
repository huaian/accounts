define("plugin/custom/imagescanutil",["module"],function(e){var a={};return a.imageScanQuery=function(a,o,n,t){var i=this,r=e.config().models,u=r.imageScan.getInstance(),l=function(e){if(e&&"000000"==e[Kai.responseStatusKey].code){var a=e.body.obj;n&&(t=a.userRole&&-1!=a.userRole.indexOf("42383")&&a.approveNode&&("fillCustomerInfoTaskOfCL"===a.approveNode||"fillCustomerInfoCheckTaskOfCL"===a.approveNode)?"scan":"query"),$("form[id=imageFm]").remove();var o;o="query"==t?"ECM0002":"ECM0001";var r=$("<form/>",{method:"POST",target:"_blank",id:"imageFm",action:a.url}).appendTo("body");$("<input/>",{name:"code",type:"hidden",value:o}).appendTo(r),$("<input/>",{name:"format",type:"hidden",value:"xml"}).appendTo(r),$("<input/>",{name:"xml",type:"hidden",value:a.xml}).appendTo(r);r.submit()}else i.showToast({text:e.body.obj.msg})},d=function(){i.showToast({text:"请求服务器错误"})};u.param={busino:a,rolecode:o},u.execute(l,d,!0,i)},a.openQueryWin=function(o){var n=o.applyCode,t=e.config().models,i=t.getImageSystemAuth.getInstance();if(null==n||""==n||void 0==n)return alert("检查不到订单编号，请联系管理员!"),!1;var r=function(e){"000000"==e.code?a.imageScanQuery(e.data.imageurl,e.data.xml,o.qsFlag):alert("影像系统配置异常，请检查!")},u=function(){alert("影像系统配置异常，请检查!")};i.param={applyCode:o.applyCode,role:o.role,qsFlag:o.qsFlag},i.execute(r,u,!0,this)},a});
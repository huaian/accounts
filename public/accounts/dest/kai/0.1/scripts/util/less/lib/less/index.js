define("util/less/lib/less/index",["dojo","dijit","dojox"],function(e,r,t){var n=require("path"),o=require("util"),i=require("url"),s=require("http"),a=require("fs"),c={version:[1,3,3],Parser:require("./parser").Parser,importer:require("./parser").importer,tree:require("./tree"),render:function(e,r,t){r=r||{},"function"==typeof r&&(t=r,r={});var n,o=new c.Parser(r);return t?void o.parse(e,function(e,n){t(e,n&&n.toCSS&&n.toCSS(r))}):(n=new(require("events").EventEmitter),process.nextTick(function(){o.parse(e,function(e,t){e?n.emit("error",e):n.emit("success",t.toCSS(r))})}),n)},formatError:function(e,r){r=r||{};var t="",n=e.extract,o=[],i=r.color?require("./lessc_helper").stylize:function(e){return e};return e.stack&&!e.type?i(e.stack,"red"):e.hasOwnProperty("index")&&n?("string"==typeof n[0]&&o.push(i(e.line-1+" "+n[0],"grey")),n[1]&&o.push(e.line+" "+n[1].slice(0,e.column)+i(i(i(n[1][e.column],"bold")+n[1].slice(e.column+1),"red"),"inverse")),"string"==typeof n[2]&&o.push(i(e.line+1+" "+n[2],"grey")),o=o.join("\n")+i("","reset")+"\n",t+=i(e.type+"Error: "+e.message,"red"),e.filename&&(t+=i(" in ","red")+e.filename+i(":"+e.line+":"+e.column,"grey")),t+="\n"+o,e.callLine&&(t+=i("from ","red")+(e.filename||"")+"/n",t+=i(e.callLine,"grey")+" "+e.callExtract+"/n"),t):e.stack||e.message},writeError:function(e,r){r=r||{},r.silent||o.error(c.formatError(e,r))}};["color","directive","operation","dimension","keyword","variable","ruleset","element","selector","quoted","expression","rule","call","url","alpha","import","mixin","comment","anonymous","value","javascript","assignment","condition","paren","media","ratio","unicode-descriptor"].forEach(function(e){require("./tree/"+e)});var l=/^(?:https?:)?\/\//i;c.Parser.importer=function(e,r,t,u){function p(n,o){if(n)return t(n);var i=u.rootpath,s=e.lastIndexOf("/");u.relativeUrls&&!/^(?:[a-z-]+:|\/)/.test(e)&&-1!=s&&(i+=e.slice(0,s+1)),u.contents[f]=o,new c.Parser({paths:[m].concat(r),filename:f,contents:u.contents,files:u.files,syncImport:u.syncImport,relativeUrls:u.relativeUrls,rootpath:i,dumpLineNumbers:u.dumpLineNumbers}).parse(o,function(e,r){t(e,r,f)})}var f,m,d,y=l.test(e);if(y||l.test(r[0])){var h=y?e:i.resolve(r[0],e),v=i.parse(h),g={host:v.hostname,port:v.port||80,path:v.pathname+(v.search||"")};s.get(g,function(e){var r="";e.on("data",function(e){r+=e.toString()}),e.on("end",function(){404===e.statusCode&&t({type:"File",message:"resource '"+h+"' was not found\n"}),r||o.error("Warning: Empty body (HTTP "+e.statusCode+') returned by "'+h+'"'),f=h,m=v.protocol+"//"+v.host+v.pathname.replace(/[^\/]*$/,""),p(null,r)})}).on("error",function(e){t({type:"File",message:"resource '"+h+"' gave this Error:\n  "+e+"\n"})})}else{var r=[].concat(r);r.push(".");for(var q=0;q<r.length;q++)try{f=n.join(r[q],e),a.statSync(f);break}catch(b){f=null}if(r=r.slice(0,r.length-1),!f)return void("function"==typeof u.errback?u.errback(e,r,t):t({type:"File",message:"'"+e+"' wasn't found.\n"}));if(m=n.dirname(f),u.syncImport)try{d=a.readFileSync(f,"utf-8"),p(null,d)}catch(b){p(b)}else a.readFile(f,"utf-8",p)}},require("./functions"),require("./colors");for(var u in c)exports[u]=c[u]});
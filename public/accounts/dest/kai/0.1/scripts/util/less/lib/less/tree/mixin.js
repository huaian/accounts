define("util/less/lib/less/tree/mixin",["dojo","dijit","dojox"],function(e,t,i){!function(e){e.mixin={},e.mixin.Call=function(t,i,n,a,r){this.selector=new e.Selector(t),this.arguments=i,this.index=n,this.filename=a,this.important=r},e.mixin.Call.prototype={eval:function(t){var i,n,a,r,s,l,o,u,h=[],f=!1;for(a=this.arguments&&this.arguments.map(function(e){return{name:e.name,value:e.value.eval(t)}}),r=0;r<t.frames.length;r++)if((i=t.frames[r].find(this.selector)).length>0){for(u=!0,s=0;s<i.length;s++){for(n=i[s],o=!1,l=0;l<t.frames.length;l++)if(!(n instanceof e.mixin.Definition)&&n===(t.frames[l].originalRuleset||t.frames[l])){o=!0;break}if(!o&&n.matchArgs(a,t)){if(!n.matchCondition||n.matchCondition(a,t))try{Array.prototype.push.apply(h,n.eval(t,a,this.important).rules)}catch(m){throw{message:m.message,index:this.index,filename:this.filename,stack:m.stack}}f=!0}}if(f)return h}throw u?{type:"Runtime",message:"No matching definition was found for `"+this.selector.toCSS().trim()+"("+(a?a.map(function(e){var t="";return e.name&&(t+=e.name+":"),t+=e.value.toCSS?e.value.toCSS():"???"}).join(", "):"")+")`",index:this.index,filename:this.filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.index,filename:this.filename}}},e.mixin.Definition=function(t,i,n,a,r){this.name=t,this.selectors=[new e.Selector([new e.Element(null,t)])],this.params=i,this.condition=a,this.variadic=r,this.arity=i.length,this.rules=n,this._lookups={},this.required=i.reduce(function(e,t){return!t.name||t.name&&!t.value?e+1:e},0),this.parent=e.Ruleset.prototype,this.frames=[]},e.mixin.Definition.prototype={toCSS:function(){return""},variable:function(e){return this.parent.variable.call(this,e)},variables:function(){return this.parent.variables.call(this)},find:function(){return this.parent.find.apply(this,arguments)},rulesets:function(){return this.parent.rulesets.apply(this)},evalParams:function(t,i,n,a){var r,s,l,o,u,h,f,m,c=new e.Ruleset(null,[]),v=this.params.slice(0);if(n)for(n=n.slice(0),l=0;l<n.length;l++)if(s=n[l],h=s&&s.name){for(f=!1,o=0;o<v.length;o++)if(!a[o]&&h===v[o].name){a[o]=s.value.eval(t),c.rules.unshift(new e.Rule(h,s.value.eval(t))),f=!0;break}if(f){n.splice(l,1),l--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+n[l].name+" not found"}}for(m=0,l=0;l<v.length;l++)if(!a[l]){if(s=n&&n[m],h=v[l].name)if(v[l].variadic&&n){for(r=[],o=m;o<n.length;o++)r.push(n[o].value.eval(t));c.rules.unshift(new e.Rule(h,new e.Expression(r).eval(t)))}else{if(u=s&&s.value)u=u.eval(t);else{if(!v[l].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+n.length+" for "+this.arity+")"};u=v[l].value.eval(i)}c.rules.unshift(new e.Rule(h,u)),a[l]=u}if(v[l].variadic&&n)for(o=m;o<n.length;o++)a[o]=n[o].value.eval(t);m++}return c},eval:function(t,i,n){var a,r,s=[],l=this.frames.concat(t.frames),o=this.evalParams(t,{frames:l},i,s);return o.rules.unshift(new e.Rule("@arguments",new e.Expression(s).eval(t))),a=n?this.parent.makeImportant.apply(this).rules:this.rules.slice(0),r=new e.Ruleset(null,a).eval({frames:[this,o].concat(l)}),r.originalRuleset=this,r},matchCondition:function(e,t){return this.condition&&!this.condition.eval({frames:[this.evalParams(t,{frames:this.frames.concat(t.frames)},e,[])].concat(t.frames)})?!1:!0},matchArgs:function(e,t){var i,n=e&&e.length||0;if(!this.variadic){if(n<this.required)return!1;if(n>this.params.length)return!1;if(this.required>0&&n>this.params.length)return!1}i=Math.min(n,this.arity);for(var a=0;i>a;a++)if(!this.params[a].name&&!this.params[a].variadic&&e[a].value.eval(t).toCSS()!=this.params[a].value.eval(t).toCSS())return!1;return!0}}}(require("../tree"))});
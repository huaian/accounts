define("util/less/lib/less/tree/media",["dojo","dijit","dojox"],function(e,t,s){!function(e){e.Media=function(t,s){var r=this.emptySelectors();this.features=new e.Value(s),this.ruleset=new e.Ruleset(r,t),this.ruleset.allowImports=!0},e.Media.prototype={toCSS:function(e,t){var s=this.features.toCSS(t);return this.ruleset.root=0===e.length||e[0].multiMedia,"@media "+s+(t.compress?"{":" {\n  ")+this.ruleset.toCSS(e,t).trim().replace(/\n/g,"\n  ")+(t.compress?"}":"\n}\n")},eval:function(t){t.mediaBlocks||(t.mediaBlocks=[],t.mediaPath=[]);var s=new e.Media([],[]);return this.debugInfo&&(this.ruleset.debugInfo=this.debugInfo,s.debugInfo=this.debugInfo),s.features=this.features.eval(t),t.mediaPath.push(s),t.mediaBlocks.push(s),t.frames.unshift(this.ruleset),s.ruleset=this.ruleset.eval(t),t.frames.shift(),t.mediaPath.pop(),0===t.mediaPath.length?s.evalTop(t):s.evalNested(t)},variable:function(t){return e.Ruleset.prototype.variable.call(this.ruleset,t)},find:function(){return e.Ruleset.prototype.find.apply(this.ruleset,arguments)},rulesets:function(){return e.Ruleset.prototype.rulesets.apply(this.ruleset)},emptySelectors:function(){var t=new e.Element("","&",0);return[new e.Selector([t])]},evalTop:function(t){var s=this;if(t.mediaBlocks.length>1){var r=this.emptySelectors();s=new e.Ruleset(r,t.mediaBlocks),s.multiMedia=!0}return delete t.mediaBlocks,delete t.mediaPath,s},evalNested:function(t){var s,r,n=t.mediaPath.concat([this]);for(s=0;s<n.length;s++)r=n[s].features instanceof e.Value?n[s].features.value:n[s].features,n[s]=Array.isArray(r)?r:[r];return this.features=new e.Value(this.permute(n).map(function(t){for(t=t.map(function(t){return t.toCSS?t:new e.Anonymous(t)}),s=t.length-1;s>0;s--)t.splice(s,0,new e.Anonymous("and"));return new e.Expression(t)})),new e.Ruleset([],[])},permute:function(e){if(0===e.length)return[];if(1===e.length)return e[0];for(var t=[],s=this.permute(e.slice(1)),r=0;r<s.length;r++)for(var n=0;n<e[0].length;n++)t.push([e[0][n]].concat(s[r]));return t},bubbleSelectors:function(t){this.ruleset=new e.Ruleset(t.slice(0),[this.ruleset])}}}(require("../tree"))});
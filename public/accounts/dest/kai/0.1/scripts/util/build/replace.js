define("util/build/replace",["./fs"],function(e){var n={};return function(i,f){var r="utf8";return f instanceof Array?"string"==typeof f[0]&&(r=f[0],f=f.slice(1)):f=[f],f.forEach(function(f){var t=f[0],a=f[1],l=f[2];if("file"==l&&(a=n[filename]=n[filename]||e.readFileSynch(a,r)),t instanceof RegExp)i=i.replace(t,a);else if("function"==typeof t)i=t(i);else for(var c=t.length,s=a.length,u=i.indexOf(t);-1!=u;)i=i.substring(0,u)+a+i.substring(u+c),u=i.indexOf(t,u+s)}),i}});
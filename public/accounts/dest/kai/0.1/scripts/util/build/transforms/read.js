define("util/build/transforms/read",["../buildControl","../fileUtils","../fs","../replace"],function(t,e,n,i){var r=e.getFiletype,f=t.transformConfig.read&&t.transformConfig.read.encoding||{css:"utf8",html:"utf8",htm:"utf8",js:"utf8",json:"utf8",asc:"utf8",c:"utf8",cpp:"utf8",log:"utf8",conf:"utf8",text:"utf8",txt:"utf8",dtd:"utf8",xml:"utf8",png:void 0,jpg:void 0,jpeg:void 0,gif:void 0};return function(e,u){e.getText=function(){return this.replacementsApplied||(this.replacementsApplied=!0,t.replacements[this.src]&&(this.text=i(this.text,t.replacements[this.src]))),this.text},e.setText=function(t){return e.text=t,e.getText=function(){return this.text},t};var s=r(e.src,1);return e.encoding=e.encoding||!(s in f)&&"utf8"||f[s],n.readFile(e.src,e.encoding,function(t,n){t||(e.text=n),u(e,t)}),u}});
define("util/build/transforms/dojoPragmas",["../buildControl"],function(bc){var evalPragma=function(code,kwArgs,fileName){return!!eval("("+code+")")};return function(e){if(bc.applyDojoPragmas&&"string"==typeof e.text){for(var r=-1,n=0,t=e.text;-1!=(r=t.indexOf("//>>",n));){var s=t.indexOf("\n",r);-1==s&&(s=t.length-1),n=s+1;var a=t.substring(r,s+1),i=a.match(/(exclude|include)Start\s*\(\s*["'](\w+)["']\s*,(.*)\)/);if(i){var l=i[1],o=i[2],d=i[3],u=!1;try{u=evalPragma(d,bc,e.src)}catch(g){return void bc.log("dojoPragmaEvalFail",["module",e.mid,"expression",a,"error",g])}var c=new RegExp("\\/\\/\\>\\>\\s*"+l+"End\\(\\s*['\"]"+o+"['\"]\\s*\\)","g"),v=c.exec(t.substring(n,t.length));if(!v)return void bc.log("dojoPragmaInvalid",["module",e.mid,"expression",a]);var f=n+c.lastIndex-v[0].length;s=t.indexOf("\n",f),-1==s&&(s=t.length-1);var m="exclude"==l&&!u||"include"==l&&u;t=t.substring(0,r)+(m?t.substring(n,f):"")+t.substring(s+1,t.length),n=r}else/^\/\/>>\s*noBuildResolver\s*$/.test(a)&&(e.noBuildResolver=1)}e.text=t}}});
define("util/buildscripts/jslib/buildUtilXd",["dojo","dijit","dojox"],function(e,o,i){var n={};n.setXdDojoConfig=function(e,o){var i=e.match(/(dojo\.registerModulePath\s*=\s*function.*\{)/),n=e.indexOf("}",i.index);n=e.indexOf("}",n+1),";"==e.charAt(n+1)&&(n+=1),n+=1;var t=fileUtil.getLineSeparator();return e.substring(0,n)+t+'if(typeof dojo.config["useXDomain"] == "undefined"){dojo.config.useXDomain = true;};\ndojo.registerModulePath("dojo", "'+o+'/dojo");\ndojo.registerModulePath("dijit", "'+o+'/dijit");\ndojo.registerModulePath("dojox", "'+o+'/dojox");'+t+e.substring(n,e.length)},n.xdgen=function(e,o,i,t,d){for(var a=fileUtil.getFilteredFileList(o,/\.js$/,!0),l=/dojo\/_base\/_loader\/loader_xd/,r=0;r<a.length;r++){var u=a[r];if(!u.match(t)&&!u.match(l)){var s=u.replace(/\.js$/,".xd.js"),c=fileUtil.readFile(u);if(u.match(/\/nls\//)&&-1==c.indexOf("dojo.provide("))var f=n.makeXdBundleContents(e,o,u,c,i,d);else f=n.makeXdContents(c,i,d);fileUtil.saveUtf8File(s,f)}}},n.makeXdContents=function(e,o,i){var t=[],d=buildUtil.removeComments(e).match(buildUtil.globalDependencyRegExp);if(d)for(var a=0;a<d.length;a++){var l=d[a].match(buildUtil.dependencyPartsRegExp),r=l[1],u=l[2];if("requireLocalization"==r){var s=i18nUtil.getRequireLocalizationArgsFromString(u);if(!s.moduleName)continue;var c=i18nUtil.getLocalesForBundle(s.moduleName,s.bundleName,o);s.localeName||(u+=", null"),r="requireLocalization",u+=', "'+c.join(",")+'"'}t.push('"'+r+'", '+u)}var f=[],j=i.xdScopeArgs||"dojo, dijit, dojox";f.push((i.xdDojoScopeName||"dojo")+"._xdResourceLoaded(function("+j+"){\n");var g=n.extractLoadInits(e);if(g)for(e=g[0],a=1;a<g.length;a++)f.push(g[a]+";\n");if(f.push("return {"),t.length>0){for(f.push("depends: ["),a=0;a<t.length;a++)a>0&&f.push(",\n"),f.push("["+t[a]+"]");f.push("],")}return f.push("\ndefineResource: function("+j+"){"),f.push(String(e).replace(/dojo\.(requireLocalization|i18n\._preloadLocalizations)\([^\)]*\)/g,"")),f.push("\n}};});"),f.join("")},n.makeXdBundleContents=function(e,o,i,t,d,a){var l=i18nUtil.getBundlePartsFromFileName(e,o,i);if(!l)return null;var r=l.moduleName,u=l.bundleName,s=l.localeName;return t=0==e.indexOf("dojo")?t:i18nUtil.makeFlatBundleContents(e,o,i),t='dojo.provide("'+r+".nls."+(s?s+".":"")+u+'");dojo._xdLoadFlattenedBundle("'+r+'", "'+u+'", "'+s+'", '+t+");",n.makeXdContents(t,d,a)},n.loadInitRegExp=/dojo\.loadInit\s*\(/g,n.extractLoadInits=function(e){return buildUtil.extractMatchedParens(n.loadInitRegExp,e)}});
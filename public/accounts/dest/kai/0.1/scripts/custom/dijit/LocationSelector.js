require({cache:{"url:custom/dijit/templates/LocationSelector.html":'<div style=\'display:inline\' data-dojo-attach-point="containerNode">\n    <select required=${required} id="province-${id}" data-dojo-type="dijit/form/Select"\n            data-dojo-props="class:\'select-width\'" name="${provinceDomName}">\n        <option></option>\n    </select>\n    <select required=${required} id="city-${id}" data-dojo-type="dijit/form/Select"\n            data-dojo-props="class:\'select-width\'" name="${cityDomName}">\n        <option></option>\n    </select>\n    <%if((typeof(hasCounty) !== \'undefined\') && (hasCounty === false)){%>\n      <%}else{%>\n        <select required=${required}  id="county-${id}" data-dojo-type="dijit/form/Select"\n        data-dojo-props="class:\'select-width\'" name="${countyDomName}">\n        <option></option>\n      </select>\n        <%}%>\n    <%if((typeof(hasDetail) !== \'undefined\') && (hasDetail === false)){%>\n\n    <%}else{%>\n      <input required=${required} id="address-${id}" data-dojo-type="dijit/form/ValidationTextBox" name="${addressDomName}" class="address-textBox" trim="true"/>\n    <%}%>\n</div>\n'}}),define("custom/dijit/LocationSelector",["dojo/data/ObjectStore","dojo/store/Memory","module","custom/dijit/_WidgetBase","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dojo/_base/declare","dijit/registry","dojo/text!./templates/LocationSelector.html","dijit/form/Select","dijit/form/TextBox","dijit/form/ValidationTextBox"],function(t,e,i,n,d,o,s,r,a){return s([n,d,o],{widgetData:null,name:"Location Selector",_isSetting:!1,templateString:a,baseClass:"locationSelectorWidget",_getProvinceAttr:function(){return r.byId("province-"+this.id).get("value")},_setProvinceAttr:function(t){r.byId("province-"+this.id).set("value",t)},_getProvinceNameAttr:function(t){return r.byId("province-"+this.id).get("displayedValue")},_getCityAttr:function(){return r.byId("city-"+this.id).get("value")},_getCityNameAttr:function(){return r.byId("city-"+this.id).get("displayedValue")},_setCityAttr:function(t){r.byId("city-"+this.id).set("value",t)},_getCountyAttr:function(){return r.byId("county-"+this.id).get("value")},_getCountyNameAttr:function(){return r.byId("county-"+this.id).get("displayedValue")},_setCountyAttr:function(t){r.byId("county-"+this.id).set("value",t)},_getAddressAttr:function(){return r.byId("address-"+this.id).get("value")},_setAddressAttr:function(t){r.byId("address-"+this.id).set("value",t)},_setReadOnlyAttr:function(t){r.byId("province-"+this.id).set("disabled",t),r.byId("city-"+this.id).set("disabled",t),r.byId("county-"+this.id)&&r.byId("county-"+this.id).set("disabled",t),r.byId("address-"+this.id)&&r.byId("address-"+this.id).set("disabled",t)},_setLocationAttr:function(t){var e=this,i=e.id?e.id:"",n=r.byId("province-"+i),d=r.byId("city-"+i),o=r.byId("county-"+i);e._isSetting=!0,e.bindStore(n,"Province","provinces",{},function(){return t&&t.province?void e.bindStore(d,"City","cities",{provinceId:e.get("province")},function(){t&&t.city,o||(e._isSetting=!1),o&&e.bindStore(o,"County","counties",{cityId:e.get("city")},function(){t&&t.county,e._isSetting=!1},t?t.county:null)},t?t.city:null):void(e._isSetting=!1)},t?t.province:null),t&&void 0!==t.address&&_.isString(t.address)&&e.set("address",t.address)},bindStore:function(t,e,n,d,o,s){var a=this,c=a.id?a.id:"",u=(r.byId("province-"+c),r.byId("city-"+c)),l=r.byId("county-"+c),y=function(){Kai.showToast({text:"获取"+e+"数据失败"})},p=i.config().models["get"+e].getInstance();if(d){if("provinceId"in d&&!d.provinceId)return u.set("value",""),u.set("options",[{value:"",label:"请选择"}]),l&&l.set("value",""),l&&l.set("options",[{value:"",label:"请选择"}]),this._isSetting&&(this._isSetting=!1),!1;if("cityId"in d&&!d.cityId)return l&&l.set("value",""),l&&l.set("options",[{value:"",label:"请选择"}]),this._isSetting&&(this._isSetting=!1),!1;if("countyId"in d&&!d.countyId)return this._isSetting&&(this._isSetting=!1),!1;p.setParam(d)}p.execute(function(e){var i=e.body.obj[n];return i?(_.map(i,function(t){return t.value=t.code,t.label=t.name,s&&t.value.toString()===s.toString()&&(t.selected=!0),t}),i=[{value:"",label:"请选择"}].concat(i)):i=[{value:"",label:"请选择"}],t?(t.set("options",i),t.startup(),void(o&&o.apply(a))):!1},y,!1,a)},postCreate:function(){var t=this,e=t.id?t.id:"",i=r.byId("province-"+e),n=r.byId("city-"+e),d=r.byId("county-"+e);t.inherited(arguments),i.on("change",function(){return t._isSetting?!1:void t.bindStore(n,"City","cities",{provinceId:i.getValue()},function(){d&&t.bindStore(d,"County","counties",{cityId:n.getValue()})})}),n.on("change",function(){return t._isSetting?!1:void(d&&t.bindStore(d,"County","counties",{cityId:n.getValue()}))})}})});
define("ui/quantity/script/ui.quantity",[],function(){var a=function(t,e){function n(a){var t=q.val();return t=parseInt(t),a?t++:t--,t}function i(){var a=n(!0);p!=f&&(a>=p&&(p>=2||p>f)?(q.next("a").removeClass("quantiyActive"),q.prev("a").addClass("quantiyActive")):(a>=2||a>f)&&(q.prev("a").addClass("quantiyActive"),q.next("a").addClass("quantiyActive")),parseInt(a)<=parseInt(p)&&(q.val(a+"位"),e.callback(a)))}function u(){var a=n(!1);p!=f&&(f>=a&&(p>=2||p>f)?(q.prev("a").removeClass("quantiyActive"),q.next("a").addClass("quantiyActive")):(q.prev("a").addClass("quantiyActive"),q.next("a").addClass("quantiyActive")),parseInt(a)>=f&&(q.val(a+"位"),e.callback(a)))}if(!(this instanceof a))return new a(t,e);var s={quantityIptID:"",maxQuantity:"",defaultValue:"",minQuantity:1,callback:null};e=e||{};for(var r in s)if("undefined"==typeof e[r])e[r]=s[r];else if("object"==typeof e[r])for(var c in s[r])"undefined"==typeof e[r][c]&&(e[r][c]=s[r][c]);var l=e.defaultValue?e.defaultValue:e.minQuantity,v='<a class="quantity-decrease" href="javascript:;">-</a>',d=' <a class="quantity-increase" href="javascript:;">+</a>',y='<input type="text" size="4" value="'+l+'位" id="'+e.quantityIptID+'" class="quantity" readOnly>';$(t).append(v).append(y).append(d);var f=parseInt(e.minQuantity),p=parseInt(e.maxQuantity),q=$("#"+e.quantityIptID);if(e.defaultValue){var o=parseInt(e.defaultValue);o>f&&$(t).find(".quantity-decrease").addClass("quantiyActive"),p>o&&$(t).find(".quantity-increase").addClass("quantiyActive")}else p>f&&$(t).find(".quantity-increase").addClass("quantiyActive");$(t).on("click",".quantity-increase",i),$(t).on("click",".quantity-decrease",u),this.changeQuantity=function(a){a>p&&(a=p),q.val(a+"位")},this.changeMaxQuantity=function(a){p=a;var t=q.val();t=parseInt(t),p>t?q.next("a").addClass("quantiyActive"):(q.val(p+"位"),q.next("a").removeClass("quantiyActive"),p==f&&q.prev("a").removeClass("quantiyActive"))}};return a});
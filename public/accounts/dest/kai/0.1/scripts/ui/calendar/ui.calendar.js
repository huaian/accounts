require({cache:{"url:ui/calendar/template/ui.calendar.html":'<ul class="cui_cldweek" style=" position: static; ">\r\n<% var i = 0, day1 = 0;  %>\r\n<%for(day1 = 0; day1 < 7; day1++) { %>\r\n<li><%=weekDayArr[day1] %></li>\r\n<%} %>\r\n</ul>\r\n\r\n<section class="cui_cldunit">\r\n<%\r\nvar changedYear;\r\nvar endDateTime = endDate.getTime();\r\n %>\r\n<%for(var j = 0; j < displayMonthNum; j++) { %>\r\n<%\r\n  var changedMonth = month + j;\r\n  var yyy =  parseInt(( month + j ) / 12);\r\n  if(changedMonth > 11) { \r\n    changedMonth = changedMonth - 12 * yyy;\r\n  }\r\n  changedYear = year + yyy;\r\n  var d = new Date(changedYear, changedMonth);\r\n  var days = _.dateUtil.getDaysOfMonth(d);\r\n  var beginWeek = _.dateUtil.getBeginDayOfMouth(d);\r\n\r\n  var str_month = MonthClapFn(changedYear, changedMonth);\r\n%>\r\n  <%if(str_month.length > 0 ) { %>\r\n  <h1 class="cui_cldmonth">\r\n    <%=str_month %>\r\n  </h1>\r\n    <% } %>\r\n  <ul class="cui_cld_daybox">\r\n     <% for(i = 0; i < beginWeek; i++) { %>\r\n        <li class="cui_invalid"></li>\r\n      <% } %>\r\n      <% for(i = 0; i < days; i++) { %>\r\n        <% var day = i + 1; %>\r\n        <% var dateObj = new Date(changedYear, changedMonth, day); %>\r\n        <% var calendar_time = dateObj.getTime(); %>\r\n        <% var difftime = calendar_time -curTime; %>\r\n        <% var _difftime =  -1 * difftime; %>\r\n        <% var diffHour =  parseInt(_difftime / 3600000 * 100) / 100; %>\r\n        <% var _diffHour =  parseInt((startTime.getTime() - calendar_time) / 36000) / 100; %>\r\n\r\n        <%if(typeof dayWrapperItemFn != \'undefined\' && _.isFunction(dayWrapperItemFn)){ %>\r\n          <%=dayWrapperItemFn(scope, changedYear, changedMonth, day, dateObj, difftime) %>\r\n        <%} else { %>\r\n        <li data-curTime="<%=diffHour %>" class="cui_calendar_item cui_cld_day_havetxt <%if(_diffHour >= 24 || (endTime && calendar_time > endTime.getTime() )) { %> cui_cld_daypass <%} %>" data-cndate="<%=changedYear%>-<%=changedMonth + 1%>-<%=day%>" data-date="<%=changedYear%>-<%=changedMonth%>-<%=day%>"><%=dayItemFn.call(scope, changedYear, changedMonth, day, dateObj, difftime)%> </li>\r\n        <%} %>\r\n\r\n      <% } %>\r\n  </ul>\r\n<%} %>\r\n</section>'}}),define("ui/calendar/ui.calendar",["../ui.abstract.view","dojo/text!./template/ui.calendar.html"],function(a,t){return _.inherit(a,{propertys:function($super){$super(),this.template=t,this.dateObj=new Date,this.solarHoliday={"0101":"元旦","0214":"情人节","0501":"劳动","0601":"儿童节","0910":"教师节",1001:"国庆",1225:"圣诞"},this.lunarHoliday={20150219:"春节",20150305:"元宵",20150405:"清明",20150620:"端午",20150927:"中秋",20160208:"春节",20160222:"元宵",20160404:"清明",20160609:"端午",20160915:"中秋",20170128:"春节",20170211:"元宵",20170404:"清明",20170530:"端午",20171004:"中秋",20180216:"春节",20180302:"元宵",20180405:"清明",20180618:"端午",20180924:"中秋"},this.jetLag=0,this.specialDates=!1,this.datamodel={scope:this,startTime:null,endTime:null,weekDayArr:["日","一","二","三","四","五","六"],displayMonthNum:5,curTime:this.dateObj.getTime(),selectDate:null,MonthClapFn:function(a,t){return t+=1,a+"年"+t+"月"},dayItemFn:function(a,t,e,n,i){var r={day:e},d=[],l=_.dateUtil.formatNum(t+1)+_.dateUtil.formatNum(e),s=a.toString()+_.dateUtil.formatNum(t+1)+_.dateUtil.formatNum(e),o=parseInt(-1*i/36e5*100)/100;return o>=0&&24>o?r.day1="今天":o>=-24&&0>o?r.day1="明天":o>=-48&&-24>o&&(r.day1="后天"),this.solarHoliday[l]&&(r.solarHoliday=this.solarHoliday[l]),this.lunarHoliday[s]&&(r.lunarHoliday=this.lunarHoliday[s]),this.specialDates,d[0]="<em>"+(r.day1||r.day)+"</em>",(r.solarHoliday||r.lunarHoliday)&&(d[1]="<i>"+(r.lunarHoliday||r.solarHoliday)+"</i>"),this.dayItemAction?this.dayItemAction.call(this,r,a,t,e,n,i):d.join("")}},this.dayItemAction=null,this.events={"click .cui_calendar_item ":"itemAction"},this.onItemClick=function(a,t,e){}},resetPropery:function(){this.datamodel.deffTimezone=1e3*this.jetLag,this.datamodel.curTime=this.dateObj.getTime()+this.datamodel.deffTimezone,this.datamodel.startTime||(this.datamodel.startTime=this.dateObj);var a=new Date(this.datamodel.startTime.getTime()+this.datamodel.deffTimezone);"0"==this.datamodel.deffTimezone&&(a=new Date(a.getFullYear(),a.getMonth(),a.getDate())),this.datamodel.startTime=a,this.datamodel.year=a.getFullYear(),this.datamodel.month=a.getMonth(),this.datamodel.endDate=new Date(this.datamodel.year,this.datamodel.month+this.datamodel.displayMonthNum,0)},setJetLag:function(a){this.jetLag=parseInt(a),this.refresh()},addDisplayMonth:function(a){this.datamodel.displayMonthNum=this.datamodel.displayMonthNum+a,this.refresh()},handleCnDay:function(a,t){var e=a,n=[];_.isDate(a)?e=a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate():_.isString(a)&&(n=a.split("-"),e=n[0]+"-"+(parseInt(n[1])-1)+"-"+n[2]),this.handleDay(e,t)},handleDay:function(a,t){var e,n=a;_.isDate(a)&&(n=a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate()),e=this.$('li[data-date="'+n+'"]'),e[0]&&_.isFunction(t)&&t.call(this,e)},itemAction:function(a){var t=$(a.currentTarget);if(!t.hasClass("cui_cld_daypass")){var e=t.attr("data-date");if(e=e.split("-"),3!=e.length)return!1;e=new Date(e[0],e[1],e[2]),this.onItemClick&&this.onItemClick.call(this,e,t,a)}},initElement:function(){this.weekDay=this.$(".cui_cldweek")},initialize:function($super,a){$super(a)}})});
require({cache:{"url:ui/calendar/template/ui.calendar.common.html":'<style type="text/css" class="js_ui_calendar_v1">\r\n.cm-day-list:before, .cm-calendar .cm-calendar-hd:before, .cm-calendar .cm-calendar-ft .cm-calendar-quick-nav:before, .cm-keyboard-list:before, .clearfix:after, .cm-slide .cm-slide-list:after, .cm-day-list:after, .cm-calendar .cm-calendar-hd:after, .cm-calendar .cm-calendar-ft .cm-calendar-quick-nav:after, .cm-keyboard-list:after {\r\n  content: "";\r\n  display: table; }\r\n.cm-day-list:after, .cm-calendar .cm-calendar-hd:after, .cm-calendar .cm-calendar-ft .cm-calendar-quick-nav:after, .cm-keyboard-list:after {\r\n  clear: both; }\r\n.cm-day-list li, .cm-calendar .cm-calendar-hd li {\r\n  float: left;\r\n  width: 14.2%;\r\n  text-align: center;\r\n  box-sizing: border-box; }\r\n  .cm-day-list li:nth-of-type(7n), .cm-calendar .cm-calendar-hd li:nth-of-type(7n), .cm-day-list li:nth-of-type(7n+1), .cm-calendar .cm-calendar-hd li:nth-of-type(7n+1) {\r\n    width: 14.5%;\r\n    color: #666; }\r\n\r\n.cm-day-list {\r\n  border-bottom: 1px solid #dbdbdb; }\r\n  .cm-day-list:last-of-type {\r\n    border-bottom: none; }\r\n  .cm-day-list li {\r\n    position: relative;\r\n    height: 54px; }\r\n    .cm-day-list li.active {\r\n      background-color: #099fde; }\r\n      .cm-day-list li.active .cm-field-title, .cm-day-list li.active .cm-field-price, .cm-day-list li.active .cm-field-label {\r\n        color: #fff; }\r\n    .cm-day-list li.cm-item--disabled .cm-field-title, .cm-day-list li.cm-item--disabled .cm-field-price, .cm-day-list li.cm-item--disabled .cm-field-label {\r\n      color: #ccc; }\r\n  .cm-day-list .cm-field-title {\r\n    line-height: 20px;\r\n    font-size: 16px;\r\n    padding-top: 8px; }\r\n  .cm-day-list .cm-field-title--festival {\r\n    font-size: 14px; }\r\n  .cm-day-list .cm-field-price {\r\n    font-size: 12px;\r\n    color: #999; }\r\n  .cm-day-list .cm-field-price--sale {\r\n    color: #ff9a14; }\r\n  .cm-day-list .cm-field-label {\r\n    font-size: 12px; }\r\n  .cm-day-list .cm-item--multi {\r\n    background-color: rgba(9, 159, 222, 0.1); }\r\n  .cm-day-list .icon-calendar-holiday, .cm-day-list .icon-calendar-work {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    border: 1px solid #333;\r\n    line-height: 14px;\r\n    height: 16px;\r\n    width: 16px;\r\n    background: #fff;\r\n    text-align: center;\r\n    font-size: 12px;\r\n    -webkit-transform: scale(0.7);\r\n        -ms-transform: scale(0.7);\r\n            transform: scale(0.7);\r\n    -webkit-transform-origin: right top;\r\n        -ms-transform-origin: right top;\r\n            transform-origin: right top;\r\n    box-sizing: border-box; }\r\n  .cm-day-list .icon-calendar-holiday {\r\n    color: #52bce8;\r\n    border-color: #52bce8; }\r\n\r\n.cm-day-list--special li {\r\n  height: 74px; }\r\n\r\n.cm-calendar {\r\n  /*padding-top: 30px;*/\r\n}\r\n  .cm-calendar .cm-calendar-hd {\r\n    border-bottom: 1px solid #dbdbdb;\r\n    background-color: #f5f5f5;\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    /*top: 44px;*/\r\n    height: 30px;\r\n    z-index: 960; }\r\n    .cm-calendar .cm-calendar-hd li {\r\n      color: #666;\r\n      line-height: 30px; }\r\n  .cm-calendar .cm-calendar-bd {\r\n    background-color: #fff;\r\n    padding-bottom: 44px;\r\n    padding-top: 30px;\r\n  }\r\n  .cm-calendar .cm-month {\r\n    text-align: center;\r\n    font-size: 16px;\r\n    line-height: 50px; }\r\n  .cm-calendar .cm-calendar-ft {\r\n    border-top: 1px solid #dbdbdb;\r\n    background-color: #efefef;\r\n    position: fixed;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    padding: 5px 0; }\r\n    .cm-calendar .cm-calendar-ft .cm-calendar-quick-nav {\r\n      width: 200%; }\r\n    .cm-calendar .cm-calendar-ft li {\r\n      float: left;\r\n      line-height: 30px;\r\n      width: 60px;\r\n      border-radius: 4px;\r\n      text-align: center;\r\n      background-color: #ccc;\r\n      margin: 0 5px 0 10px; }\r\n      .cm-calendar .cm-calendar-ft li.active {\r\n        background-color: #099fde;\r\n        color: #fff; }\r\n\r\n.cm-calendar .cm-calendar-hd li:nth-of-type(7n), .cm-calendar .cm-calendar-hd li:nth-of-type(7n+1) {\r\n  color: #52bce8; }\r\n\r\n.cm-calendar-tips {\r\n  width: 14.2%;\r\n  color: #fff;\r\n  text-align: center;\r\n  border-radius: 4px;\r\n  background-color: #099fde;\r\n  position: absolute; }\r\n  .cm-calendar-tips::after {\r\n    content: "";\r\n    position: absolute;\r\n    left: 50%;\r\n    margin-left: -6px;\r\n    bottom: -6px;\r\n    border-top: 6px solid #099fde;\r\n    border-left: 6px solid transparent;\r\n    border-right: 6px solid transparent; }\r\n  .cm-calendar-tips .cm-tips-day {\r\n    padding-bottom: 5px; }\r\n    .cm-calendar-tips .cm-tips-day .cm-tips-day-title {\r\n      line-height: 28px;\r\n      font-size: 16px; }\r\n    .cm-calendar-tips .cm-tips-day .cm-tips-day-label, .cm-calendar-tips .cm-tips-day .cm-tips-day-price {\r\n      font-size: 12px; }\r\n</style>\r\n<div class="cm-calendar">\r\n\r\n  <ul class="cm-calendar-hd js_weekend">\r\n    <% var i = 0, day1 = 0;  %>\r\n    <%for(day1 = 0; day1 < 7; day1++) { %>\r\n    <li><%=weekDayArr[day1] %></li>\r\n    <%} %>\r\n  </ul>\r\n\r\n  <div class="cm-calendar-bd ">\r\n  <%for(var j = 0; j < displayMonthNum; j++) { %>\r\n<%\r\n  var changedMonth = month + j;\r\n  var yyy =  parseInt(( month + j ) / 12);\r\n  if(changedMonth > 11) {\r\n    changedMonth = changedMonth - 12 * yyy;\r\n  }\r\n  changedYear = year + yyy;\r\n  var d = new Date(changedYear, changedMonth);\r\n  var days = _.dateUtil.getDaysOfMonth(d);\r\n  var beginWeek = _.dateUtil.getBeginDayOfMouth(d);\r\n  var endDateTime = endDate.getTime();\r\n\r\n  var str_month = MonthClapFn(changedYear, changedMonth);\r\n%>\r\n    <%if(str_month.length > 0 ) { %>\r\n      <h3 class="cm-month js_month"><%=str_month %></h3>\r\n    <% } %>\r\n    <ul class="cm-day-list">\r\n      <% for(i = 0; i < beginWeek; i++) { %>\r\n        <li class="js_empty_day"></li>\r\n      <% } %>\r\n      <% for(i = 0; i < days; i++) { %>\r\n        <% var day = i + 1; %>\r\n        <% var dateObj = new Date(changedYear, changedMonth, day ); %>\r\n        <% var calendar_time = dateObj.getTime(); %>\r\n        <% var difftime = calendar_time -curTime; %>\r\n        <% var _difftime =  -1 * difftime; %>\r\n        <% var diffHour =  parseInt(_difftime / 3600000 * 100) / 100; %>\r\n        <% var _diffHour =  parseInt((startTime.getTime() - calendar_time) / 36000) / 100; %>\r\n\r\n\r\n        <%if(typeof dayWrapperItemFn != \'undefined\' && _.isFunction(dayWrapperItemFn)){ %>\r\n          <%=dayWrapperItemFn(scope, changedYear, changedMonth, day, dateObj, difftime) %>\r\n        <%} else { %>\r\n        <li  data-curTime="<%=diffHour %>" class="js_calendar_item <%if(_diffHour >= 24 || (endTime && calendar_time > endTime.getTime() )) { %> js_overdue_day cm-item--disabled <%} %> " data-cndate="<%=changedYear%>-<%=changedMonth + 1%>-<%=day%>" data-date="<%=changedYear%>-<%=changedMonth%>-<%=day%>">\r\n          <%=dayItemFn.call(scope, changedYear, changedMonth, day, dateObj, difftime)%>\r\n        </li>\r\n        <%} %>\r\n\r\n      <% } %>\r\n    </ul>\r\n  <%} %>\r\n\r\n  </div>\r\n</div>\r\n'}}),define("ui/calendar/ui.calendar.common",["../ui.abstract.view","dojo/text!./template/ui.calendar.common.html"],function(e,a){return _.inherit(e,{propertys:function($super){$super(),this.template=a,this.dateObj=new Date,this.solarHoliday={"0101":"元旦","0214":"情人节","0501":"劳动节","0601":"儿童节","0910":"教师节",1001:"国庆",1225:"圣诞"},this.lunarHoliday={20150219:"春节",20150305:"元宵",20150405:"清明",20150620:"端午",20150927:"中秋",20160208:"春节",20160222:"元宵",20160404:"清明",20160609:"端午",20160915:"中秋",20170128:"春节",20170211:"元宵",20170404:"清明",20170530:"端午",20171004:"中秋",20180216:"春节",20180302:"元宵",20180405:"清明",20180618:"端午",20180924:"中秋"},this.jetLag=0,this.specialDates=!1,this.datamodel={scope:this,startTime:null,endTime:null,weekDayArr:["日","一","二","三","四","五","六"],displayMonthNum:5,curTime:this.dateObj.getTime(),selectDate:null,MonthClapFn:function(e,a){return a+=1,e+"年"+a+"月"},dayItemFn:function(e,a,n,t,r){var i={day:n},d=[],l=_.dateUtil.formatNum(a+1)+_.dateUtil.formatNum(n),c=e.toString()+_.dateUtil.formatNum(a+1)+_.dateUtil.formatNum(n),o=parseInt(-1*r/36e5*100)/100;return o>=0&&24>o?i.day1="今天":o>=-24&&0>o?i.day1="明天":o>=-48&&-24>o&&(i.day1="后天"),this.solarHoliday[l]&&(i.solarHoliday=this.solarHoliday[l]),this.lunarHoliday[c]&&(i.lunarHoliday=this.lunarHoliday[c]),this.specialDates,d[0]='<div class="cm-field-title">'+(i.day1||i.day)+"</div>",(i.solarHoliday||i.lunarHoliday)&&(d[0]='<div class="cm-field-title cm-field-title--festival">'+(i.lunarHoliday||i.solarHoliday)+"</div>"),this.dayItemAction?this.dayItemAction.call(this,i,e,a,n,t,r):d.join("")}},this.dayItemAction=null,this.events={"click .js_calendar_item ":"itemAction"},this.onItemClick=function(e,a,n){}},resetPropery:function($super){$super(),this.datamodel.deffTimezone=1e3*this.jetLag,this.datamodel.curTime=this.dateObj.getTime()+this.datamodel.deffTimezone,this.datamodel.startTime||(this.datamodel.startTime=this.dateObj);var e=new Date(this.datamodel.startTime.getTime()+this.datamodel.deffTimezone);"0"==this.datamodel.deffTimezone&&(e=new Date(e.getFullYear(),e.getMonth(),e.getDate())),this.datamodel.startTime=e,this.datamodel.year=e.getFullYear(),this.datamodel.month=e.getMonth(),this.datamodel.endDate=new Date(this.datamodel.year,this.datamodel.month+this.datamodel.displayMonthNum,0)},setJetLag:function(e){this.jetLag=parseInt(e),this.refresh()},addDisplayMonth:function(e){this.datamodel.displayMonthNum=this.datamodel.displayMonthNum+e,this.refresh()},handleCnDay:function(e,a){var n=e,t=[];_.isDate(e)?n=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate():_.isString(e)&&(t=e.split("-"),n=t[0]+"-"+(parseInt(t[1])-1)+"-"+t[2]),this.handleDay(n,a)},handleDay:function(e,a){var n,t=e;_.isDate(e)&&(t=e.getFullYear()+"-"+e.getMonth()+"-"+e.getDate()),n=this.$('li[data-date="'+t+'"]'),n[0]&&_.isFunction(a)&&a.call(this,n)},itemAction:function(e){var a=$(e.currentTarget);if(!a.hasClass("cm-item--disabled")){var n=a.attr("data-date");if(n=n.split("-"),3!=n.length)return!1;n=new Date(n[0],n[1],n[2]),this.onItemClick&&this.onItemClick.call(this,n,a,e)}},initElement:function(){var e=$("#js_style_root");this.weekDay=this.$(".js_weekend"),this.calendarStyle=this.$(".js_ui_calendar_v1"),e[0]||(e=$('<div id="js_style_root"></div>'),e.insertBefore($("body"))),e.find(".js_ui_calendar_v1")[0]||e.append(this.calendarStyle)},initialize:function($super,e){$super(e),"none"===$("#headerview").css("display")&&this.$(".js_weekend").css("top",0)}})});
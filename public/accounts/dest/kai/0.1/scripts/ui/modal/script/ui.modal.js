define("ui/modal/script/ui.modal",["text!modalTemplate","BootStrap"],function(e){var t={title:"",body:"",confirmText:"",cancelText:"",confirmCallback:function(){},cancelCallback:function(){},backdrop:!0,view:null},o=_.template(e),l=function(e){this.create(e)};return l.prototype.create=function(e){var l=this;this.opts=e||{};var n=Backbone.Model.extend({});this.model=new n({title:this.opts.title||t.title,body:this.opts.body||t.body,confirmText:this.opts.confirmText||t.confirmText,cancelText:this.opts.cancelText||t.cancelText,confirmCallback:this.opts.confirmCallback||t.confirmCallback,cancelCallback:this.opts.cancelCallback||t.cancelCallback,confirmed:!1,canceled:!1,hidden:!1,shown:!1,view:this.opts.view||t.view}),this.model.on({"change:confirmed":function(){l.model.get("confirmed")&&(l.model.get("confirmCallback")(),l.destroy())},"change:hidden":function(){l.model.get("hidden")&&(l.model.get("cancelCallback")(),l.destroy())}}),this.modalInstanceText=o({model:this.model.attributes}),this.modalElement=$(this.modalInstanceText);var i=Backbone.View.extend({});this.view=new i({el:this.modalElement})},l.prototype.display=function(){var e=this,t=null;$(".modal").length>0&&$(".modal").remove(),this.model.get("view")&&(t=this.model.get("view").$el)?(t=this.model.get("view").$el,t.append(this.view.$el)):($("body").append(this.view.$el),t=$("body")),this.self=t.find(".modal").modal("show"),this.self.on("show.bs.modal",function(t){e.model.set({hidden:!1,show:!0})}),this.self.on("hide.bs.modal",function(t){e.model.set({hidden:!0,shown:!1})}),e.modalElement.find(".btn-primary").on("click",function(t){e.model.set({hidden:!0,shown:!1,confirmed:!0})})},l.prototype.destroy=function(){$(".modal").length>0&&$(".modal").remove(),$(".modal-backdrop").remove()},l});
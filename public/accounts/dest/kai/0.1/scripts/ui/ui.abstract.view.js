define("ui/ui.abstract.view",["plugin/c.plugins"],function(){var t=function(){var t=3e3;return function(e){return e+ ++t}}(),e=function(){var t={};return{addItem:function(e,i){t[e]=i},removeItem:function(e){t[e]&&delete t[e]},getItem:function(e){return e?t[e]:t}}}();return _.inherit({propertys:function(){this.wrapper=$("body"),this.id=_.uniqueId("ui-view-"),this.template="",this.datamodel={},this.events={},this.eventArr={},this.status="init",this.needAnimat=!1,this.animateShowAction=null,this.animateHideAction=null,this.needRootWrapper=!0},addEvents:function(t){_.isObject(t)&&_.extend(this.events,t)},_preventDefault:function(t){t.preventDefault()},on:function(t,e,i){this.eventArr[t]||(this.eventArr[t]=[]),i?this.eventArr[t].splice(0,0,e):this.eventArr[t].push(e)},off:function(t,e){this.eventArr[t]&&(e?this.eventArr[t]=_.without(this.eventArr[t],e):this.eventArr[t]=[])},trigger:function(t){var e,i,s=Array.prototype.slice,n=s.call(arguments,1),h=this.eventArr,r=[];if(h[t])for(e=0,i=h[t].length;i>e;e++)r[r.length]=h[t][e].apply(this,n);return r},createRoot:function(t){this.needRootWrapper?(this.$el=$('<div class="view" style="display: none; " id="'+this.id+'"></div>'),this.$el.html(t)):this.$el=$(t).hide().attr("id",this.id)},_isAddEvent:function(t){return"onCreate"==t||"onPreShow"==t||"onShow"==t||"onRefresh"==t||"onHide"==t?!0:!1},setOption:function(t){for(var e in t)"datamodel"!=e&&"events"!=e?this._isAddEvent(e)?this.on(e,t[e]):this[e]=t[e]:_.extend(this[e],t[e])},initialize:function(t){this.propertys&&this.propertys(),this.setOption&&this.setOption(t),this.resetPropery&&this.resetPropery(),this.addEvent&&this.addEvent(),this.create&&this.create(),this.addSysEvents&&this.addSysEvents(),this.initElement&&this.initElement(),e.addItem(this.id,this)},getUIContainer:function(){return e.getItem()},addSysEvents:function(){"function"==typeof this.availableFn&&(this.removeSysEvents(),this.$el.on("click.system"+this.id,$.proxy(function(t){this.availableFn()||(t.preventDefault(),t.stopImmediatePropagation&&t.stopImmediatePropagation())},this)))},removeSysEvents:function(){this.$el.off(".system"+this.id)},$:function(t){return this.$el.find(t)},resetPropery:function(){},addEvent:function(){},create:function(){this.trigger("onPreCreate"),this.createRoot(this.render()),this.status="create",this.trigger("onCreate")},initElement:function(){},render:function(t){var e=this.getViewModel()||{},i=this.template;return this.template?(e&&(i=_.isFunction(this.template)?this.template(e):_.template(this.template)(e)),"function"==typeof t&&t.call(this),i):""},refresh:function(t){this.resetPropery(),this.$el.remove(),this.$el=null,this.create(),this.initElement(),this.eventsBound=!1,this.addEvents(this.events),this.addEvent(),"show"==this.status&&this.show(),this.trigger("onRefresh")},show:function(){this.wrapper[0]&&this.$el[0]&&($.contains(this.wrapper[0],this.$el[0])||(this.needEmptyWrapper&&this.wrapper.html(""),this.wrapper.append(this.$el)),this.trigger("onPreShow"),this.needAnimat&&"function"==typeof this.animateShowAction&&(this.animateInClass?this.hasAnimationProperty(this.animateInClass):"function"==typeof this.animateShowAction)&&"show"!=this.status?this.animateShowAction&&this.animateShowAction.call(this,this.$el):this.$el.show(),this.status="show",this.addSysEvents(),this.trigger("onShow"),this.needMask||this.mask&&this.mask.hide(),this.bindEvents())},hide:function(){this.$el&&"show"===this.status&&(this.trigger("onPreHide"),this.animateHideAction&&this.needAnimat&&(this.animateOutClass?this.hasAnimationProperty(this.animateOutClass):"function"==typeof this.animateShowAction)&&"hide"!=this.status?this.animateHideAction.call(this,this.$el):(this.$el&&this.$el.hide(),this.mask&&this.mask.hide()),this.status="hide",this.unBindEvents(),this.removeSysEvents(),this.trigger("onHide"))},hasAnimationProperty:function(t){var e=[$.fx.cssPrefix+"animation-name"],i=$("<div></div>");return i.attr("class",t),$("body").append(i),"none"!=i.css(e[0])?(i.remove(),!0):(i.remove(),!1)},destroy:function(){this.status="destroy",this.unBindEvents(),this.removeSysEvents(),e.removeItem(this.id),this.$el.remove(),this.trigger("onDestroy"),delete this},getViewModel:function(){return this.datamodel},setzIndexTop:function(e,i){e||(e=this.$el),(!i||i>10)&&(i=0),i=1e3*i,e.css("z-index",t(i))},bindEvents:function(){var t=this.events;if(!t&&!(t=_.result(this,"events")))return this;this.unBindEvents();var e,i,s,n,h,r=/^(\S+)\s*(.*)$/;for(e in t)i=t[e],_.isFunction(i)||(i=this[t[e]]),i&&(s=e.match(r),n=s[1],h=s[2],i=_.bind(i,this),n+=".delegateUIEvents"+this.id,""===h?this.$el.on(n,i):this.$el.on(n,h,i));return this},unBindEvents:function(){return this.$el.off(".delegateUIEvents"+this.id),this}})});
define("page/c.page.list",["page/c.page.view","ui/base/c.ui.base","data/store/c.common.store"],function(i,o,e){"use strict";var n=e.StackStore.getInstance(),t=2,s=function(){return function(){window.scrollBy(-t,-t),t/=2}},l=_.debounce(s(),500),r=i.extend({_onWidnowScroll:null,__isComplete__:!1,__isLoading__:!1,refreshLoading:null,addScrollListener:function(){var i=this;i.__isComplete__=!1,i.__isLoading__=!1,i._onWidnowScroll&&$(window).bind("scroll",i._onWidnowScroll),this.onTopPull&&_.flip(this.$el,"down",function(){var e=o.getPageScrollPos();e.top<=10&&!i.__isLoading__&&(i.__isLoading__=!0,i.onTopPull())},function(i){var e=o.getPageScrollPos();return"down"!=i||e.top>=10},0,5)},removeScrollListener:function(){this.refreshLoading&&(this.refreshLoading.remove(),this.refreshLoading=null),_.flipDestroy(this.$el)},onWidnowScroll:function(){var i=this,e=o.getPageScrollPos(),s=n.get()||{};if(!_.isEmpty(s)&&s.currentView!==i.viewName)return!1;if("0"!=e.top){var r=e.pageHeight-(e.top+e.height);1==this.__isComplete__&&(t=2),81>=r&&!this.__isComplete__&&!this.__isLoading__&&(this.__isLoading__=!0,this.onBottomPull&&(this.onBottomPull(),l()))}},endPull:function(){this.__isLoading__=!1},closePull:function(){this.__isComplete__=!0},openPull:function(){this.__isComplete__=!1},showTopLoading:function(){var i=i||this.$el.find("section");i.length>0&&(i.before(this.getLoading()),this.refreshLoading.show())},showBottomLoading:function(){this.$el.append(this.getLoading()),this.refreshLoading.show()},hideBottomLoading:function(){this.hideRefreshLoading()},hideRefreshLoading:function(){this.refreshLoading&&this.refreshLoading.hide(),this.__isLoading__=!1},getLoading:function(){return this.refreshLoading||(this.refreshLoading=$('<div class="cui-zl-load" id="zlLoading"> <div class="cui-i cui-b-loading"></div><div class="cui-i  cui-mb-logo"></div> <p>加载中</p></div>')),this.refreshLoading}});return r});
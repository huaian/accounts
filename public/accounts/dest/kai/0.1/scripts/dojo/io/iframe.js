define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(e,r,o,t,n,a,s,i,l,u,f,d,c){o.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var m=c._iframeName;m=m.substring(0,m.lastIndexOf("_"));var h=t.delegate(c,{create:function(){return h._frame=c.create.apply(c,arguments)},get:null,post:null,send:function(t){var a,s=n._ioSetArgs(t,function(e){a&&a.cancel()},function(e){var t=null,n=e.ioArgs;try{var s=n.handleAs;"xml"===s||"html"===s?t=a.response.data:(t=a.response.text,"json"===s?t=r.fromJson(t):"javascript"===s&&(t=o.eval(t)))}catch(i){t=i}return t},function(e,r){return r.ioArgs._hasError=!0,e}),l=s.ioArgs,u="GET",f=i.byId(t.form);t.method&&"POST"===t.method.toUpperCase()&&f&&(u="POST");var m={method:u,handleAs:"json"===t.handleAs||"javascript"===t.handleAs?"text":t.handleAs,form:t.form,query:f?null:t.content,data:f?t.content:null,timeout:t.timeout,ioArgs:l};if(m.method&&(m.method=m.method.toUpperCase()),e.ioPublish&&o.publish&&l.args.ioPublish!==!1)var h=d.after(c,"_notifyStart",function(e){e.options.ioArgs===l&&(h.remove(),n._ioNotifyStart(s))},!0);return a=c(l.url,m,!0),l._callNext=a._callNext,a.then(function(){s.resolve(s)}).otherwise(function(e){s.ioArgs.error=e,s.reject(e)}),s},_iframeOnload:s.global[m+"_onload"]});return t.setObject("dojo.io.iframe",h),h});
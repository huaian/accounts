define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(t,e,o,r){function n(t,e,o,r,n,i){i=i||"px";var d=t.style;isNaN(e)||(d.left=e+i),isNaN(o)||(d.top=o+i),r>=0&&(d.width=r+i),n>=0&&(d.height=n+i)}function i(t){return"button"==t.tagName.toLowerCase()||"input"==t.tagName.toLowerCase()&&"button"==(t.getAttribute("type")||"").toLowerCase()}function d(t){return"border-box"==l.boxModel||"table"==t.tagName.toLowerCase()||i(t)}var l={};l.boxModel="content-box",t("ie")&&(l.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),l.getPadExtents=function(t,e){t=o.byId(t);var n=e||r.getComputedStyle(t),i=r.toPixelValue,d=i(t,n.paddingLeft),l=i(t,n.paddingTop),a=i(t,n.paddingRight),f=i(t,n.paddingBottom);return{l:d,t:l,r:a,b:f,w:d+a,h:l+f}};var a="none";l.getBorderExtents=function(t,e){t=o.byId(t);var n=r.toPixelValue,i=e||r.getComputedStyle(t),d=i.borderLeftStyle!=a?n(t,i.borderLeftWidth):0,l=i.borderTopStyle!=a?n(t,i.borderTopWidth):0,f=i.borderRightStyle!=a?n(t,i.borderRightWidth):0,u=i.borderBottomStyle!=a?n(t,i.borderBottomWidth):0;return{l:d,t:l,r:f,b:u,w:d+f,h:l+u}},l.getPadBorderExtents=function(t,e){t=o.byId(t);var n=e||r.getComputedStyle(t),i=l.getPadExtents(t,n),d=l.getBorderExtents(t,n);return{l:i.l+d.l,t:i.t+d.t,r:i.r+d.r,b:i.b+d.b,w:i.w+d.w,h:i.h+d.h}},l.getMarginExtents=function(t,e){t=o.byId(t);var n=e||r.getComputedStyle(t),i=r.toPixelValue,d=i(t,n.marginLeft),l=i(t,n.marginTop),a=i(t,n.marginRight),f=i(t,n.marginBottom);return{l:d,t:l,r:a,b:f,w:d+a,h:l+f}},l.getMarginBox=function(e,n){e=o.byId(e);var i,d=n||r.getComputedStyle(e),f=l.getMarginExtents(e,d),u=e.offsetLeft-f.l,g=e.offsetTop-f.t,c=e.parentNode,s=r.toPixelValue;if(t("mozilla")){var m=parseFloat(d.left),b=parseFloat(d.top);isNaN(m)||isNaN(b)?c&&c.style&&(i=r.getComputedStyle(c),"visible"!=i.overflow&&(u+=i.borderLeftStyle!=a?s(e,i.borderLeftWidth):0,g+=i.borderTopStyle!=a?s(e,i.borderTopWidth):0)):(u=m,g=b)}else(t("opera")||8==t("ie")&&!t("quirks"))&&c&&(i=r.getComputedStyle(c),u-=i.borderLeftStyle!=a?s(e,i.borderLeftWidth):0,g-=i.borderTopStyle!=a?s(e,i.borderTopWidth):0);return{l:u,t:g,w:e.offsetWidth+f.w,h:e.offsetHeight+f.h}},l.getContentBox=function(e,n){e=o.byId(e);var i,d=n||r.getComputedStyle(e),a=e.clientWidth,f=l.getPadExtents(e,d),u=l.getBorderExtents(e,d);return a?(i=e.clientHeight,u.w=u.h=0):(a=e.offsetWidth,i=e.offsetHeight),t("opera")&&(f.l+=u.l,f.t+=u.t),{l:f.l,t:f.t,w:a-f.w-u.w,h:i-f.h-u.h}},l.setContentSize=function(t,e,r){t=o.byId(t);var i=e.w,a=e.h;if(d(t)){var f=l.getPadBorderExtents(t,r);i>=0&&(i+=f.w),a>=0&&(a+=f.h)}n(t,NaN,NaN,i,a)};var f={l:0,t:0,w:0,h:0};return l.setMarginBox=function(e,a,u){e=o.byId(e);var g=u||r.getComputedStyle(e),c=a.w,s=a.h,m=d(e)?f:l.getPadBorderExtents(e,g),b=l.getMarginExtents(e,g);if(t("webkit")&&i(e)){var h=e.style;c>=0&&!h.width&&(h.width="4px"),s>=0&&!h.height&&(h.height="4px")}c>=0&&(c=Math.max(c-m.w-b.w,0)),s>=0&&(s=Math.max(s-m.h-b.h,0)),n(e,a.l,a.t,c,s)},l.isBodyLtr=function(t){return t=t||e.doc,"ltr"==(e.body(t).dir||t.documentElement.dir||"ltr").toLowerCase()},l.docScroll=function(o){o=o||e.doc;var r=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in r?{x:r.pageXOffset,y:r.pageYOffset}:(r=t("quirks")?e.body(o):o.documentElement)&&{x:l.fixIeBiDiScrollLeft(r.scrollLeft||0,o),y:r.scrollTop||0}},t("ie")&&(l.getIeDocumentElementOffset=function(o){o=o||e.doc;var r=o.documentElement;if(t("ie")<8){var n=r.getBoundingClientRect(),i=n.left,d=n.top;return t("ie")<7&&(i+=r.clientLeft,d+=r.clientTop),{x:0>i?0:i,y:0>d?0:d}}return{x:0,y:0}}),l.fixIeBiDiScrollLeft=function(o,r){r=r||e.doc;var n=t("ie");if(n&&!l.isBodyLtr(r)){var i=t("quirks"),d=i?e.body(r):r.documentElement,a=e.global;return 6==n&&!i&&a.frameElement&&d.scrollHeight>d.clientHeight&&(o+=d.clientLeft),8>n||i?o+d.clientWidth-d.scrollWidth:-o}return o},l.position=function(r,n){r=o.byId(r);var i=e.body(r.ownerDocument),d=r.getBoundingClientRect();if(d={x:d.left,y:d.top,w:d.right-d.left,h:d.bottom-d.top},t("ie")<9){var a=l.getIeDocumentElementOffset(r.ownerDocument);d.x-=a.x+(t("quirks")?i.clientLeft+i.offsetLeft:0),d.y-=a.y+(t("quirks")?i.clientTop+i.offsetTop:0)}if(n){var f=l.docScroll(r.ownerDocument);d.x+=f.x,d.y+=f.y}return d},l.getMarginSize=function(t,e){t=o.byId(t);var n=l.getMarginExtents(t,e||r.getComputedStyle(t)),i=t.getBoundingClientRect();return{w:i.right-i.left+n.w,h:i.bottom-i.top+n.h}},l.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!t("dom-addeventlistener")){var o=e.target,r=o&&o.ownerDocument||document,n=t("quirks")?r.body:r.documentElement,i=l.getIeDocumentElementOffset(r);e.pageX=e.clientX+l.fixIeBiDiScrollLeft(n.scrollLeft||0,r)-i.x,e.pageY=e.clientY+(n.scrollTop||0)-i.y}},l});
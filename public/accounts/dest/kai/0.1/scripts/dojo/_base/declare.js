define("dojo/_base/declare",["./kernel","../has","./lang"],function(t,e,n){function r(t,e){throw new Error("declare"+(e?" "+e:"")+": "+t)}function o(t,e){for(var n,o,i,a,s,c,l,p,u=[],h=[{cls:0,refs:[]}],f={},d=1,y=t.length,m=0;y>m;++m){for(i=t[m],i?"[object Function]"!=O.call(i)&&r("mixin #"+m+" is not a callable constructor.",e):r("mixin #"+m+" is unknown. Did you use dojo.require to pull it in?",e),o=i._meta?i._meta.bases:[i],a=0,n=o.length-1;n>=0;--n)s=o[n].prototype,s.hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+x++),l=s.declaredClass,f.hasOwnProperty(l)||(f[l]={count:0,refs:[],cls:o[n]},++d),c=f[l],a&&a!==c&&(c.refs.push(a),++a.count),a=c;++a.count,h[0].refs.push(a)}for(;h.length;){for(a=h.pop(),u.push(a.cls),--d;p=a.refs,1==p.length;){if(a=p[0],!a||--a.count){a=0;break}u.push(a.cls),--d}if(a)for(m=0,y=p.length;y>m;++m)a=p[m],--a.count||h.push(a)}return d&&r("can't build consistent linearization",e),i=t[0],u[0]=i?i._meta&&i===u[u.length-i._meta.bases.length]?i._meta.bases.length:1:0,u}function i(t,e,n){var o,i,a,s,c,l,p,u,h,f=this._inherited=this._inherited||{};if("string"==typeof t&&(o=t,t=e,e=n),n=0,s=t.callee,o=o||s.nom,o||r("can't deduce a name to call inherited()",this.declaredClass),c=this.constructor._meta,a=c.bases,h=f.p,o!=k){if(f.c!==s&&(h=0,l=a[0],c=l._meta,c.hidden[o]!==s)){i=c.chains,i&&"string"==typeof i[o]&&r("calling chained method with inherited: "+o,this.declaredClass);do if(c=l._meta,p=l.prototype,c&&(p[o]===s&&p.hasOwnProperty(o)||c.hidden[o]===s))break;while(l=a[++h]);h=l?h:-1}if(l=a[++h])if(p=l.prototype,l._meta&&p.hasOwnProperty(o))n=p[o];else{u=v[o];do if(p=l.prototype,n=p[o],n&&(l._meta?p.hasOwnProperty(o):n!==u))break;while(l=a[++h])}n=l&&n||v[o]}else{if(f.c!==s&&(h=0,c=a[0]._meta,c&&c.ctor!==s)){for(i=c.chains,i&&"manual"===i.constructor||r("calling chained constructor with inherited",this.declaredClass);(l=a[++h])&&(c=l._meta,!c||c.ctor!==s););h=l?h:-1}for(;(l=a[++h])&&(c=l._meta,!(n=c?c.ctor:l)););n=l&&n}return f.c=n,f.p=h,n?e===!0?n:n.apply(this,e||t):void 0}function a(t,e){return"string"==typeof t?this.__inherited(t,e,!0):this.__inherited(t,!0)}function s(t,e,n){var r=this.getInherited(t,e);return r?r.apply(this,n||e||t):void 0}function c(t){for(var e=this.constructor._meta.bases,n=0,r=e.length;r>n;++n)if(e[n]===t)return!0;return this instanceof t}function l(t,r){for(var o in r)o!=k&&r.hasOwnProperty(o)&&(t[o]=r[o]);if(e("bug-for-in-skips-shadowed"))for(var i=n._extraNames,a=i.length;a;)o=i[--a],o!=k&&r.hasOwnProperty(o)&&(t[o]=r[o])}function p(t,r){var o,i;for(o in r)i=r[o],i===v[o]&&o in v||o==k||("[object Function]"==O.call(i)&&(i.nom=o),t[o]=i);if(e("bug-for-in-skips-shadowed"))for(var a=n._extraNames,s=a.length;s;)o=a[--s],i=r[o],i===v[o]&&o in v||o==k||("[object Function]"==O.call(i)&&(i.nom=o),t[o]=i);return t}function u(t){return _.safeMixin(this.prototype,t),this}function h(t,e){return t instanceof Array||"function"==typeof t||(e=t,t=void 0),e=e||{},t=t||[],_([this].concat(t),e)}function f(t,e){return function(){var n,r,o,i,a=arguments,s=a,c=a[0],l=t.length;if(!(this instanceof a.callee))return g(a);if(e&&(c&&c.preamble||this.preamble))for(i=new Array(t.length),i[0]=a,r=0;c=a[0],c&&(n=c.preamble,n&&(a=n.apply(this,a)||a)),n=t[r].prototype,n=n.hasOwnProperty("preamble")&&n.preamble,n&&(a=n.apply(this,a)||a),++r!=l;)i[r]=a;for(r=l-1;r>=0;--r)n=t[r],o=n._meta,n=o?o.ctor:n,n&&n.apply(this,i?i[r]:a);n=this.postscript,n&&n.apply(this,s)}}function d(t,e){return function(){var n,r=arguments,o=r,i=r[0];return this instanceof r.callee?(e&&(i&&(n=i.preamble,n&&(o=n.apply(this,o)||o)),n=this.preamble,n&&n.apply(this,o)),t&&t.apply(this,r),n=this.postscript,void(n&&n.apply(this,r))):g(r)}}function y(t){return function(){var e,n,r=arguments,o=0;if(!(this instanceof r.callee))return g(r);for(;e=t[o];++o)if(n=e._meta,e=n?n.ctor:e){e.apply(this,r);break}e=this.postscript,e&&e.apply(this,r)}}function m(t,e,n){return function(){var r,o,i,a=0,s=1;for(n&&(a=e.length-1,s=-1);r=e[a];a+=s)o=r._meta,i=(o?o.hidden:r.prototype)[t],i&&i.apply(this,arguments)}}function b(t){j.prototype=t.prototype;var e=new j;return j.prototype=null,e}function g(t){var e=t.callee,n=b(e);return e.apply(n,t),n}function _(t,e,s){"string"!=typeof t&&(s=e,e=t,t=""),s=s||{};var p,g,j,x,C,F,M,q=1,A=e;if("[object Array]"==O.call(e)?(F=o(e,t),j=F[0],q=F.length-j,e=F[q]):(F=[0],e?"[object Function]"==O.call(e)?(j=e._meta,F=F.concat(j?j.bases:e)):r("base class is not a callable constructor.",t):null!==e&&r("unknown base class. Did you use dojo.require to pull it in?",t)),e)for(g=q-1;p=b(e),g;--g)j=F[g],(j._meta?l:w)(p,j.prototype),x=new Function,x.superclass=e,x.prototype=p,e=p.constructor=x;else p={};for(_.safeMixin(p,s),j=s.constructor,j!==v.constructor&&(j.nom=k,p.constructor=j),g=q-1;g;--g)j=F[g]._meta,j&&j.chains&&(M=w(M||{},j.chains));if(p["-chains-"]&&(M=w(M||{},p["-chains-"])),j=!M||!M.hasOwnProperty(k),F[0]=x=M&&"manual"===M.constructor?y(F):1==F.length?d(s.constructor,j):f(F,j),x._meta={bases:F,hidden:s,chains:M,parents:A,ctor:s.constructor},x.superclass=e&&e.prototype,x.extend=u,x.createSubclass=h,x.prototype=p,p.constructor=x,p.getInherited=a,p.isInstanceOf=c,p.inherited=P,p.__inherited=i,t&&(p.declaredClass=t,n.setObject(t,x)),M)for(C in M)p[C]&&"string"==typeof M[C]&&C!=k&&(j=p[C]=m(C,F,"after"===M[C]),j.nom=C);return x}var w=n.mixin,v=Object.prototype,O=v.toString,j=new Function,x=0,k="constructor",P=t.config.isDebug?s:i;return t.safeMixin=_.safeMixin=p,t.declare=_,_});
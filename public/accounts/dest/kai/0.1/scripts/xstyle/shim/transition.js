define("xstyle/shim/transition",["../main"],function(t){function r(t){if("className"==t.propertyName){var r=t.srcElement,i=r._transitions,o=r._previousStyle,s=r.runtimeStyle,f=r.currentStyle;for(var v in o){var l=s[v];i||(r._transitions=i={});var p=o[v],g=f[v];if(s[v]=l,p!=g&&(p||l)){var y=n(g);if(y.units){var S=n(l),h=e(y,S),d=n(p),_=e(y,d);if(_&&h&&d.units==y.units){var T=i[v];T&&(T.at=1);var b=b||(m=(new Date).getTime());T=i[v]={from:p||l,element:r,to:g,startTime:b,duration:r._transitionDuration*h/_,timing:c[r._transitionTiming||"ease"],property:v,t:0},a(T)||u.push(T),o[v]=g}}}}}}function n(t){var r=t.match(s);if(!r){if(r=t.match(f)){r=r[1];var n=[],e=3==r.length;return n[0]=parseInt(r[0]+r[e?0:1],16),n[1]=parseInt(r[e?1:2]+r[e?1:3],16),n[2]=parseInt(r[e?2:4]+r[e?2:5],16),n.units="rgb",n}return(r=t.match(v))?(n=[r[1]],n.units=r[2],n):[]}for(var n=r[1].split(","),i=0;4>i;i++)n[0]=+(n[0]||0);return n.units="rgb",n}function e(t,r){for(var n=0,e=0;e<t.length;e++)n+=Math.abs((r[e]||0)-(t[e]||0));return n}function i(t,r,n){for(var e=[],i=0;i<t.length;i++)e[i]=r[i]*n-t[i]*(n-1);return"rgb"==t.units?"#"+e[0].toString(16)+e[1].toString(16)+e[2].toString(16)+e[3].toString(16):e[0]+t.units}function a(t){var r=t.element;runtimeStyle=r.runtimeStyle;var e=t.t=(m-t.startTime)/1e3/t.duration;return e>=1?(runtimeStyle[t.property]="",!0):void(runtimeStyle[t.property]=i(n(t.from),n(t.to),t.timing(t.t)))}function o(t,r,n,e){var i=(r+.01)/(t+.01)/3,a=1-(1.01-e)/(1.01-n)/3;return function(t){return 3*(1-t)*(1-t)*t*i+3*(1-t)*t*t*a+t*t*t}}var u=[],s=/^rgba?\(([0-9,]+)\)/i,f=/#([0-9a-f]+)/i,v=/([-0-9\.]+)([\w]+)/,u=[],m=(new Date).getTime(),l=30;setInterval(function(){m=(new Date).getTime();for(var t=0,r=u.length;r>t;t++)a(u[t])&&(u.splice(t--,1),r--)},l);var c={ease:o(.25,.1,.25,1),linear:o(0,0,1,1),"ease-in":o(.42,0,1,1),"ease-out":o(0,0,.58,1),"ease-in-out":o(.42,0,.58,1)};return{onProperty:function(n,e,i){return t.addRenderer(n,e,i,function(t){var i=t.currentStyle,a=t._previousStyle={};"transition-duration"==n&&(t._transitionDuration=parseFloat(e));for(var o in i)a[o]=i[o];t.attachEvent("onpropertychange",r)})}}});
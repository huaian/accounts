define("xstyle/ext/widget",[],function(){function parse(value,callback,type,rule){function classLoaded(Class,Mixin){Mixin&&(Class=dojo.declare([].slice.call(arguments,0)));var prototype=Class.prototype;for(var name in props){var value=props[name];if(name in prototype){var type=typeof prototype[name];"string"==type||"string"!=typeof value||("number"==type?props[name]=+value:props[name]=eval(value))}}callback(function(e){var t=new Class(props,e);widgetCssClass&&(t.domNode.className+=" "+widgetCssClass)})}var Class,prototype;if(rule){var widgetCssClass="x-widget-"+nextId++;rule.addSheetRule("."+widgetCssClass,rule.cssText),widgetCssClass=" "+widgetCssClass}if(value.eachProperty){var props={};value.eachProperty(function(e,t){e=e.replace(/-\w/g,function(e){return e.charAt(1).toUpperCase()}),t=parse(t),"type"==e&&callback?type=t:props[e]=t}),value=props,type&&(window[type]&&classLoaded(window[type]),require("string"==typeof type?type.split(/\s*,\s*/):type,classLoaded))}else"object"==typeof value||("'"==value.charAt(0)||'"'==value.charAt(0)?value=eval(value):isNaN(value)?literals.hasOwnProperty(value)&&(value=literals[value]):value=+value);return value}function Widget(scope){return{widget:function(value,rule){var modules=[];return value.replace(/require\s*\(\s*['"]([^'"]*)['"]\s*\)/g,function(e,t){modules.push(t)}),require(modules),function(domNode){require(modules,function(){with(scope){var __module=eval(value),prototype=__module.prototype,props={};prototype&&rule.eachProperty(function(t,name,value){if(name in prototype){var type=typeof prototype[name];"string"==type||"string"!=typeof value?props[name]=value:"number"==type?props[name]=+value:props[name]=eval(value)}}),__module(props,domNode)}})}},role:"layout"}}var nextId=0,literals={"true":!0,"false":!1,"null":null},def=new Widget({});return Widget.widget=def.widget,Widget.role=def.role,{put:function(e,t,a){return{then:function(a){parse(e[0].eachProperty?e[0]:t,function(e){t.elements(e),a()},"string"==typeof e&&e,t)}}},parse:parse}});
define("dojox/dnd/Selector",["dojo","dojox","dojo/dnd/Selector"],function(e,t){return e.declare("dojox.dnd.Selector",e.dnd.Selector,{conservative:!0,isSelected:function(t){var i=e.isString(t)?t:t.id,o=this.getItem(i);return o&&this.selected[i]},selectNode:function(t,i){i||this.selectNone();var o=e.isString(t)?t:t.id,s=this.getItem(o);return s&&(this._removeAnchor(),this.anchor=e.byId(t),this._addItemClass(this.anchor,"Anchor"),this.selection[o]=1,this._addItemClass(this.anchor,"Selected")),this},deselectNode:function(t){var i=e.isString(t)?t:t.id,o=this.getItem(i);return o&&this.selection[i]&&(this.anchor===e.byId(t)&&this._removeAnchor(),delete this.selection[i],this._removeItemClass(this.anchor,"Selected")),this},selectByBBox:function(t,i,o,s,n){return n||this.selectNone(),this.forInItems(function(n,r){var d=e.byId(r);d&&this._isBoundedByBox(d,t,i,o,s)&&this.selectNode(r,!0)},this),this},_isBoundedByBox:function(e,t,i,o,s){return this.conservative?this._conservativeBBLogic(e,t,i,o,s):this._liberalBBLogic(e,t,i,o,s)},shift:function(e,t){var i=this.getSelectedNodes();i&&i.length&&this.selectNode(this._getNodeId(i[i.length-1].id,e),t)},_getNodeId:function(e,t){for(var i=this.getAllNodes(),o=e,s=0,n=i.length;n>s;++s)if(i[s].id==e){var r=Math.min(n-1,Math.max(0,s+(t?1:-1)));s!=r&&(o=i[r].id);break}return o},_conservativeBBLogic:function(t,i,o,s,n){var r,d=e.coords(t);return i>s&&(r=i,i=s,s=r),o>n&&(r=o,o=n,n=r),d.x>=i&&d.x+d.w<=s&&d.y>=o&&d.y+d.h<=n},_liberalBBLogic:function(t,i,o,s,n){var r,d,h,c,l,a,u=e.position(t),v=!1,g=!1,B=u.x,f=u.y,I=u.x+u.w,_=u.y+u.h;return s>i?(h=i,c=o):(v=!0,h=s,c=n),n>o?(g=!0,l=s,a=n):(l=i,a=o,h=s,c=n),v&&g&&(l=i,a=n,h=s,c=o),r=(B>=h||l>=I)&&I>=h&&l>=B||h>=B&&I>=l,d=_>=c&&a>=f||_>=a&&a>=f,r&&d}})});
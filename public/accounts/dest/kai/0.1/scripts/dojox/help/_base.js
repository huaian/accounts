define("dojox/help/_base",["dojo","dijit","dojox","dojo/require!dojox/rpc/Service,dojo/io/script"],function(e,t,r){e.provide("dojox.help._base"),e.require("dojox.rpc.Service"),e.require("dojo.io.script"),e.experimental("dojox.help"),r.help={locate:function(t,i,n){n=n||20;var _,o=[],s={};if(i){e.isArray(i)||(i=[i]);for(var p,a=0;p=i[a];a++){if(_=p,e.isString(p)){if(p=e.getObject(p),!p)continue}else{if(!e.isObject(p))continue;_=p.__name__}o.push(p),_&&(_=_.split(".")[0],s[_]||-1!=e.indexOf(r.help._namespaces,_)||r.help.refresh(_),s[_]=!0)}}o.length||(o.push({__name__:"window"}),e.forEach(r.help._namespaces,function(e){s[e]=!0}));var l=t.toLowerCase(),h=[];e:for(var p,a=0;p=o[a];a++){var c=p.__name__||"",u=e.some(o,function(e){return e=e.__name__||"",0==c.indexOf(e+".")});if(c&&!u){_=c.split(".")[0];var f=[];if("window"==c)for(_ in r.help._names)e.isArray(r.help._names[_])&&(f=f.concat(r.help._names[_]));else f=r.help._names[_];for(var d,m=0;d=f[m];m++)if(("window"==c||0==d.indexOf(c+"."))&&-1!=d.toLowerCase().indexOf(l)){if(".prototype"==d.slice(-10))continue;var g=e.getObject(d);if(g&&(h.push([d,g]),h.length==n))break e}}}return r.help._displayLocated(h),e.isMoz?void 0:""},refresh:function(e,t){arguments.length<2&&(t=!0),r.help._recurse(e,t)},noConflict:function(e){if(arguments.length)return r.help._noConflict(e);for(;r.help._overrides.length;){var t=r.help._overrides.pop(),i=t[0],n=t[1],_=i[n];i[n]=r.help._noConflict(_)}},init:function(t,i){t&&r.help._namespaces.concat(t),e.addOnLoad(function(){e.require=function(t){return function(){r.help.noConflict(),t.apply(e,arguments),r.help._timer&&clearTimeout(r.help._timer),r.help._timer=setTimeout(function(){e.addOnLoad(function(){r.help.refresh(),r.help._timer=!1})},500)}}(e.require),r.help._recurse()})},_noConflict:function(t){return t instanceof String?t.toString():t instanceof Number?+t:t instanceof Boolean?1==t:(e.isObject(t)&&(delete t.__name__,delete t.help),t)},_namespaces:["dojo","dojox","dijit","djConfig"],_rpc:new r.rpc.Service(e.moduleUrl("dojox.rpc.SMDLibrary","dojo-api.smd")),_attributes:["summary","type","returns","parameters"],_clean:function(e){for(var t,i={},n=0;t=r.help._attributes[n];n++){var _=e["__"+t+"__"];_&&(i[t]=_)}return i},_displayLocated:function(e){throw new Error("_displayLocated should be overridden in one of the dojox.help packages")},_displayHelp:function(e,t){throw new Error("_displayHelp should be overridden in one of the dojox.help packages")},_addVersion:function(t){if(t.name){t.version=[e.version.major,e.version.minor,e.version.patch].join(".");var r=t.name.split(".");("dojo"==r[0]||"dijit"==r[0]||"dojox"==r[0])&&(t.project=r[0])}return t},_stripPrototype:function(e){var t=e.replace(/\.prototype(\.|$)/g,"."),r=t;return"."==t.slice(-1)?r=t=t.slice(0,-1):t=e,[r,t]},_help:function(){for(var t,i=this.__name__,n=r.help._stripPrototype(i)[0],_=[],o=0;t=r.help._attributes[o];o++)this["__"+t+"__"]||_.push(t);return r.help._displayHelp(!0,{name:this.__name__}),!_.length||this.__searched__?r.help._displayHelp(!1,r.help._clean(this)):(this.__searched__=!0,r.help._rpc.get(r.help._addVersion({name:n,exact:!0,attributes:_})).addCallback(this,function(e){if(this.toString===r.help._toString&&this.toString(e),e&&e.length){e=e[0];for(var t,i=0;t=r.help._attributes[i];i++)e[t]&&(this["__"+t+"__"]=e[t]);r.help._displayHelp(!1,r.help._clean(this))}else r.help._displayHelp(!1,!1)})),e.isMoz?void 0:""},_parse:function(e){if(delete this.__searching__,e&&e.length){var t=e[0].parameters;if(t){var i=["function ",this.__name__,"("];this.__parameters__=t;for(var n,_=0;n=t[_];_++){if(_&&i.push(", "),i.push(n.name),n.types){for(var o,s=[],p=0;o=n.types[p];p++)s.push(o.title);s.length&&(i.push(": "),i.push(s.join("|")))}n.repeating&&i.push("..."),n.optional&&i.push("?")}i.push(")"),this.__source__=this.__source__.replace(/function[^\(]*\([^\)]*\)/,i.join(""))}this.__output__&&delete this.__output__}else r.help._displayHelp(!1,!1)},_toStrings:{},_toString:function(t){if(!this.__source__)return this.__name__;var i=!this.__parameters__;if(this.__parameters__=[],t?r.help._parse.call(this,t):i&&(this.__searching__=!0,r.help._toStrings[r.help._stripPrototype(this.__name__)[0]]=this,r.help._toStringTimer&&clearTimeout(r.help._toStringTimer),r.help._toStringTimer=setTimeout(function(){r.help.__toString()},50)),!i||!this.__searching__)return this.__source__;var n="function Loading info for "+this.__name__+"... (watch console for result) {}";return e.isMoz?{toString:e.hitch(this,function(){return this.__output__=!0,n})}:(this.__output__=!0,n)},__toString:function(){r.help._toStringTimer&&clearTimeout(r.help._toStringTimer);var e=[];r.help.noConflict(r.help._toStrings);for(var t in r.help._toStrings)e.push(t);for(;e.length;)r.help._rpc.batch(r.help._addVersion({names:e.splice(-50,50),exact:!0,attributes:["parameters"]})).addCallback(this,function(e){for(var t,i=0;t=e[i];i++){var n=r.help._toStrings[t.name];n&&(r.help._parse.call(n,[t]),delete r.help._toStrings[t.name])}})},_overrides:[],_recursions:[],_names:{},_recurse:function(t,i){arguments.length<2&&(i=!0);var n=[];if(t&&e.isString(t))r.help.__recurse(e.getObject(t),t,t,n,i);else for(var _,o=0;_=r.help._namespaces[o];o++)window[_]&&(r.help._recursions.push([window[_],_,_]),window[_].__name__=_,window[_].help||(window[_].help=r.help._help));for(;r.help._recursions.length;){var s=r.help._recursions.shift();r.help.__recurse(s[0],s[1],s[2],n,i)}for(var p,o=0;p=n[o];o++)delete p.__seen__},__recurse:function(t,i,n,_,o){for(var s in t)if(!s.match(/([^\w_.$]|__[\w_.$]+__)/)){var p=t[s];if(!("undefined"==typeof p||p===document||p===window||p===r.help._toString||p===r.help._help||null===p||+e.isIE&&p.tagName||p.__seen__)){var a=e.isFunction(p),l=e.isObject(p)&&!e.isArray(p)&&!p.nodeType,h=n?n+"."+s:s;if("dojo._blockAsync"!=h){if(!p.__name__){var c=null;e.isString(p)?c=String:"number"==typeof p?c=Number:"boolean"==typeof p&&(c=Boolean),c&&(p=t[s]=new c(p))}p.__seen__=!0,p.__name__=h,(r.help._names[i]=r.help._names[i]||[]).push(h),_.push(p),a||r.help._overrides.push([t,s]),(a||l)&&o&&r.help._recursions.push([p,i,h]),a&&(p.__source__||(p.__source__=p.toString().replace(/^function\b ?/,"function "+h)),p.toString===Function.prototype.toString&&(p.toString=r.help._toString)),p.help||(p.help=r.help._help)}}}}}});
/*
				 fullScreenScene=true;
				 children=[{domNode: selectedChild.domNode,constraint: "center"}];
				 query("> [constraint]",this.domNode).forEach(function(c){
				 if(selectedChild.domNode!==c.domNode){
				 dstyle(c.domNode,"display","none");
				 }
				 })
				 */

define("dojox/app/controllers/Layout",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/query","dojo/dom-geometry","dojo/dom-attr","dojo/dom-style","dijit/registry","./LayoutBase","../utils/layout","../utils/constraints","dojo/sniff"],function(e,t,i,o,n,d,r,a,s,l,p,c,h){return e("dojox.app.controllers.Layout",l,{constructor:function(e,t){},onResize:function(){this._doResize(this.app),this.resizeSelectedChildren(this.app)},resizeSelectedChildren:function(e){for(var t in e.selectedChildren)e.selectedChildren[t]&&e.selectedChildren[t].domNode&&(this.app.log("in Layout resizeSelectedChildren calling resizeSelectedChildren calling _doResize for w.selectedChildren[hash].id="+e.selectedChildren[t].id),this._doResize(e.selectedChildren[t]),i.forEach(e.selectedChildren[t].domNode.children,function(e){s.byId(e.id)&&s.byId(e.id).resize&&s.byId(e.id).resize()}),this.resizeSelectedChildren(e.selectedChildren[t]))},initLayout:function(e){this.app.log("in app/controllers/Layout.initLayout event=",e),this.app.log("in app/controllers/Layout.initLayout event.view.parent.name=[",e.view.parent.name,"]"),(!e.view.domNode.parentNode||8==h("ie")&&!e.view.domNode.parentElement)&&(this.app.useConfigOrder?e.view.parent.domNode.appendChild(e.view.domNode):this.addViewToParentDomByConstraint(e)),r.set(e.view.domNode,"data-app-constraint",e.view.constraint),this.inherited(arguments)},addViewToParentDomByConstraint:function(e){var t=e.view.constraint;if("bottom"===t)e.view.parent.domNode.appendChild(e.view.domNode);else if("top"===t)e.view.parent.domNode.insertBefore(e.view.domNode,e.view.parent.domNode.firstChild);else if(e.view.parent.domNode.children.length>0)for(var i in e.view.parent.domNode.children){var o=e.view.parent.domNode.children[i],n=a.get(e.view.parent.domNode,"direction"),d="ltr"===n,r=d?"left":"right",s=d?"right":"left";if(o.getAttribute&&o.getAttribute("data-app-constraint")){var l=o.getAttribute("data-app-constraint");if("bottom"===l||l===s||"top"!==l&&t===r){e.view.parent.domNode.insertBefore(e.view.domNode,o);break}}}(!e.view.domNode.parentNode||8==h("ie")&&!e.view.domNode.parentElement)&&e.view.parent.domNode.appendChild(e.view.domNode)},_doResize:function(e){var i=e.domNode;if(!i)return void this.app.log("Warning - View has not been loaded, in Layout _doResize view.domNode is not set for view.id="+e.id+" view=",e);var n={};if("h"in n&&"w"in n||(n=t.mixin(d.getMarginBox(i),n)),e!==this.app){var r=a.getComputedStyle(i),s=d.getMarginExtents(i,r),l=d.getBorderExtents(i,r),p=e._borderBox={w:n.w-(s.w+l.w),h:n.h-(s.h+l.h)},c=d.getPadExtents(i,r);e._contentBox={l:a.toPixelValue(i,r.paddingLeft),t:a.toPixelValue(i,r.paddingTop),w:p.w-c.w,h:p.h-c.h}}else e._contentBox={l:0,t:0,h:o.global.innerHeight||o.doc.documentElement.clientHeight,w:o.global.innerWidth||o.doc.documentElement.clientWidth};this.inherited(arguments)},layoutView:function(e){e.view&&(this.inherited(arguments),e.doResize&&(this._doResize(e.parent||this.app),this._doResize(e.view)))},_doLayout:function(e){if(e){this.app.log("in Layout _doLayout called for view.id="+e.id+" view=",e);var t,o=c.getSelectedChild(e,e.constraint);o&&o.isFullScreen||(t=n("> [data-app-constraint]",e.domNode).map(function(e){var t=s.getEnclosingWidget(e);return t?(t._constraint=r.get(e,"data-app-constraint"),t):{domNode:e,_constraint:r.get(e,"data-app-constraint")}}),o&&(t=i.filter(t,function(e){return e.domNode&&e._constraint},e))),e._contentBox&&p.layoutChildren(e.domNode,e._contentBox,t)}}})});
define("dojox/editor/plugins/Save",["dojo","dijit","dojox","dijit/_editor/_Plugin","dijit/form/Button","dojo/_base/connect","dojo/_base/declare","dojo/i18n","dojo/i18n!dojox/editor/plugins/nls/Save"],function(t,i,s,o){var e=t.declare("dojox.editor.plugins.Save",o,{iconClassPrefix:"dijitAdditionalEditorIcon",url:"",logResults:!0,_initButton:function(){var s=t.i18n.getLocalization("dojox.editor.plugins","Save");this.button=new i.form.Button({label:s.save,showLabel:!1,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"Save",tabIndex:"-1",onClick:t.hitch(this,"_save")})},updateState:function(){this.button.set("disabled",this.get("disabled"))},setEditor:function(t){this.editor=t,this._initButton()},_save:function(){var t=this.editor.get("value");this.save(t)},save:function(i){var s={"Content-Type":"text/html"};if(this.url){var o={url:this.url,postData:i,headers:s,handleAs:"text"};this.button.set("disabled",!0);var e=t.xhrPost(o);e.addCallback(t.hitch(this,this.onSuccess)),e.addErrback(t.hitch(this,this.onError))}},onSuccess:function(t,i){this.button.set("disabled",!1),this.logResults},onError:function(t,i){this.button.set("disabled",!1),this.logResults}});return t.subscribe(i._scopeName+".Editor.getPlugin",null,function(t){if(!t.plugin){var i=t.args.name.toLowerCase();"save"===i&&(t.plugin=new e({url:"url"in t.args?t.args.url:"",logResults:"logResults"in t.args?t.args.logResults:!0}))}}),e});
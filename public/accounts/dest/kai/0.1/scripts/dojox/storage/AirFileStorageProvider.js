define("dojox/storage/AirFileStorageProvider",["dojo","dijit","dojox","dojo/require!dojox/storage/manager,dojox/storage/Provider"],function(e,i,t){e.provide("dojox.storage.AirFileStorageProvider"),e.require("dojox.storage.manager"),e.require("dojox.storage.Provider"),e.isAIR&&!function(){if(!i)var i={};i.File=window.runtime.flash.filesystem.File,i.FileStream=window.runtime.flash.filesystem.FileStream,i.FileMode=window.runtime.flash.filesystem.FileMode,e.declare("dojox.storage.AirFileStorageProvider",[t.storage.Provider],{initialized:!1,_storagePath:"__DOJO_STORAGE/",initialize:function(){this.initialized=!1;try{var e=i.File.applicationStorageDirectory.resolvePath(this._storagePath);e.exists||e.createDirectory(),this.initialized=!0}catch(r){}t.storage.manager.loaded()},isAvailable:function(){return!0},put:function(e,t,r,o){if(0==this.isValidKey(e))throw new Error("Invalid key given: "+e);if(o=o||this.DEFAULT_NAMESPACE,0==this.isValidKey(o))throw new Error("Invalid namespace given: "+o);try{this.remove(e,o);var a=i.File.applicationStorageDirectory.resolvePath(this._storagePath+o);a.exists||a.createDirectory();var s=a.resolvePath(e),n=new i.FileStream;n.open(s,i.FileMode.WRITE),n.writeObject(t),n.close()}catch(l){return void r(this.FAILED,e,l.toString(),o)}r&&r(this.SUCCESS,e,null,o)},get:function(e,t){if(0==this.isValidKey(e))throw new Error("Invalid key given: "+e);t=t||this.DEFAULT_NAMESPACE;var r=null,o=i.File.applicationStorageDirectory.resolvePath(this._storagePath+t+"/"+e);if(o.exists&&!o.isDirectory){var a=new i.FileStream;a.open(o,i.FileMode.READ),r=a.readObject(),a.close()}return r},getNamespaces:function(){var e,t=[this.DEFAULT_NAMESPACE],r=i.File.applicationStorageDirectory.resolvePath(this._storagePath),o=r.getDirectoryListing();for(e=0;e<o.length;e++)o[e].isDirectory&&o[e].name!=this.DEFAULT_NAMESPACE&&t.push(o[e].name);return t},getKeys:function(e){if(e=e||this.DEFAULT_NAMESPACE,0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);var t=[],r=i.File.applicationStorageDirectory.resolvePath(this._storagePath+e);if(r.exists&&r.isDirectory){var o,a=r.getDirectoryListing();for(o=0;o<a.length;o++)t.push(a[o].name)}return t},clear:function(e){if(0==this.isValidKey(e))throw new Error("Invalid namespace given: "+e);var t=i.File.applicationStorageDirectory.resolvePath(this._storagePath+e);t.exists&&t.isDirectory&&t.deleteDirectory(!0)},remove:function(e,t){t=t||this.DEFAULT_NAMESPACE;var r=i.File.applicationStorageDirectory.resolvePath(this._storagePath+t+"/"+e);r.exists&&!r.isDirectory&&r.deleteFile()},putMultiple:function(e,i,t,r){if(this.isValidKeyArray(e)===!1||!i instanceof Array||e.length!=i.length)throw new Error("Invalid arguments: keys = ["+e+"], values = ["+i+"]");if((null==r||"undefined"==typeof r)&&(r=this.DEFAULT_NAMESPACE),0==this.isValidKey(r))throw new Error("Invalid namespace given: "+r);this._statusHandler=t;try{for(var o=0;o<e.length;o++)this.put(e[o],i[o],null,r)}catch(a){return void(t&&t(this.FAILED,e,a.toString(),r))}t&&t(this.SUCCESS,e,null,r)},getMultiple:function(e,i){if(this.isValidKeyArray(e)===!1)throw new Error("Invalid key array given: "+e);if((null==i||"undefined"==typeof i)&&(i=this.DEFAULT_NAMESPACE),0==this.isValidKey(i))throw new Error("Invalid namespace given: "+i);for(var t=[],r=0;r<e.length;r++)t[r]=this.get(e[r],i);return t},removeMultiple:function(e,i){i=i||this.DEFAULT_NAMESPACE;for(var t=0;t<e.length;t++)this.remove(e[t],i)},isPermanent:function(){return!0},getMaximumSize:function(){return this.SIZE_NO_LIMIT},hasSettingsUI:function(){return!1},showSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")},hideSettingsUI:function(){throw new Error(this.declaredClass+" does not support a storage settings user-interface")}}),t.storage.manager.register("dojox.storage.AirFileStorageProvider",new t.storage.AirFileStorageProvider),t.storage.manager.initialize()}()});
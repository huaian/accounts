define("dojox/io/xhrMultiPart",["dojo/_base/kernel","dojo/_base/array","dojo/_base/xhr","dojo/query","dojox/uuid/generateRandomUuid"],function(n,t,o,e,r){function a(n,t){if(!n.name&&!n.content)throw new Error("Each part of a multi-part request requires 'name' and 'content'.");var o=[];if(o.push("--"+t,'Content-Disposition: form-data; name="'+n.name+'"'+(n.filename?'; filename="'+n.filename+'"':"")),n.contentType){var e="Content-Type: "+n.contentType;n.charset&&(e+="; Charset="+n.charset),o.push(e)}return n.contentTransferEncoding&&o.push("Content-Transfer-Encoding: "+n.contentTransferEncoding),o.push("",n.content),o}function i(t,o){var e=n.formToObject(t),r=[];for(var i in e)n.isArray(e[i])?n.forEach(e[i],function(n){r=r.concat(a({name:i,content:n},o))}):r=r.concat(a({name:i,content:e[i]},o));return r}return n.getObject("io.xhrMultiPart",!0,dojox),dojox.io.xhrMultiPart=function(t){if(!t.file&&!t.content&&!t.form)throw new Error("content, file or form must be provided to dojox.io.xhrMultiPart's arguments");var o=r(),f=[],c="";if(t.file||t.content){var u=t.file||t.content;n.forEach(n.isArray(u)?u:[u],function(n){f=f.concat(a(n,o))})}else if(t.form){if(e("input[type=file]",t.form).length)throw new Error("dojox.io.xhrMultiPart cannot post files that are values of an INPUT TYPE=FILE.  Use dojo.io.iframe.send() instead.");f=i(t.form,o)}return f.length&&(f.push("--"+o+"--",""),c=f.join("\r\n")),n.rawXhrPost(n.mixin(t,{contentType:"multipart/form-data; boundary="+o,postData:c}))},dojox.io.xhrMultiPart});
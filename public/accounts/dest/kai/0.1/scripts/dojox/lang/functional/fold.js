define("dojox/lang/functional/fold",["dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","./lambda"],function(l,n,a,t){var o={};l.mixin(t,{foldl:function(n,e,r,f){"string"==typeof n&&(n=n.split("")),f=f||a.global,e=t.lambda(e);var i,c;if(l.isArray(n))for(i=0,c=n.length;c>i;r=e.call(f,r,n[i],i,n),++i);else if("function"==typeof n.hasNext&&"function"==typeof n.next)for(i=0;n.hasNext();r=e.call(f,r,n.next(),i++,n));else for(i in n)i in o||(r=e.call(f,r,n[i],i,n));return r},foldl1:function(n,e,r){"string"==typeof n&&(n=n.split("")),r=r||a.global,e=t.lambda(e);var f,i,c;if(l.isArray(n))for(f=n[0],i=1,c=n.length;c>i;f=e.call(r,f,n[i],i,n),++i);else if("function"==typeof n.hasNext&&"function"==typeof n.next){if(n.hasNext())for(f=n.next(),i=1;n.hasNext();f=e.call(r,f,n.next(),i++,n));}else{var u=!0;for(i in n)i in o||(u?(f=n[i],u=!1):f=e.call(r,f,n[i],i,n))}return f},foldr:function(l,n,o,e){"string"==typeof l&&(l=l.split("")),e=e||a.global,n=t.lambda(n);for(var r=l.length;r>0;--r,o=n.call(e,o,l[r],r,l));return o},foldr1:function(l,n,o){"string"==typeof l&&(l=l.split("")),o=o||a.global,n=t.lambda(n);for(var e=l.length,r=l[e-1],f=e-1;f>0;--f,r=n.call(o,r,l[f],f,l));return r},reduce:function(l,n,a){return arguments.length<3?t.foldl1(l,n):t.foldl(l,n,a)},reduceRight:function(l,n,a){return arguments.length<3?t.foldr1(l,n):t.foldr(l,n,a)},unfold:function(l,n,o,e,r){r=r||a.global,n=t.lambda(n),o=t.lambda(o),l=t.lambda(l);for(var f=[];!l.call(r,e);f.push(n.call(r,e)),e=o.call(r,e));return f}})});
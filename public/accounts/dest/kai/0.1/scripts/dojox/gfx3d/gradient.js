define("dojox/gfx3d/gradient",["dojo/_base/lang","./matrix","./vector"],function(t,o,a){var r=t.getObject("dojox.gfx3d",!0),n=function(t,o){return Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))},i=32;return r.gradient=function(t,r,l,s,c,e,u){for(var f=o.normalize(u),y=o.multiplyPoint(f,s*Math.cos(c)+l.x,s*Math.sin(c)+l.y,l.z),x=o.multiplyPoint(f,s*Math.cos(e)+l.x,s*Math.sin(e)+l.y,l.z),h=o.multiplyPoint(f,l.x,l.y,l.z),p=(e-c)/i,d=n(y,x)/2,M=t[r.type],g=r.finish,m=r.color,b=[{offset:0,color:M.call(t,a.substract(y,h),g,m)}],z=c+p;e>z;z+=p){var j=o.multiplyPoint(f,s*Math.cos(z)+l.x,s*Math.sin(z)+l.y,l.z),v=n(y,j),P=n(x,j);b.push({offset:v/(v+P),color:M.call(t,a.substract(j,h),g,m)})}return b.push({offset:1,color:M.call(t,a.substract(x,h),g,m)}),{type:"linear",x1:0,y1:-d,x2:0,y2:d,colors:b}},r.gradient});
define("dojox/charting/plot2d/Default",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(t,e,r,a,i,s,o,n,h,l,d){var p=h.lambda("item.purgeGroup()"),u=1200;return e("dojox.charting.plot2d.Default",[i,s],{defaultParams:{lines:!0,areas:!1,markers:!1,tension:"",animate:!1,enableCache:!1,interpolate:!1},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},filter:{},styleFunc:null,font:"",fontColor:"",marker:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(e,r){this.opt=t.clone(t.mixin(this.opt,this.defaultParams)),l.updateWithObject(this.opt,r),l.updateWithPattern(this.opt,r,this.optionalParams),this.animate=this.opt.animate},createPath:function(t,e,r){var a;return this.opt.enableCache&&t._pathFreePool.length>0?(a=t._pathFreePool.pop(),a.setShape(r),e.add(a)):a=e.createPath(r),this.opt.enableCache&&t._pathUsePool.push(a),a},buildSegments:function(t,e){for(var r=this.series[t],a=e?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,i=e?Math.min(r.data.length,Math.ceil(this._hScaler.bounds.to)):r.data.length,s=null,o=[],n=a;i>n;n++)null==r.data[n]||!e&&null==r.data[n].y?(!this.opt.interpolate||e)&&(s=null):(s||(s=[],o.push({index:n,rseg:s})),s.push(e&&r.data[n].hasOwnProperty("y")?r.data[n].y:r.data[n]));return o},render:function(e,i){if(this.zoom&&!this.isDataDirty())return this.performZoom(e,i);this.resetEvents(),this.dirty=this.isDirty();var s;this.dirty&&(r.forEach(this.series,p),this._eventSeries={},this.cleanGroup(),this.getGroup().setTransform(null),s=this.getGroup(),n.forEachRev(this.series,function(t){t.cleanGroup(s)}));for(var h,l,m=this.chart.theme,c=this.events(),y=this.series.length-1;y>=0;--y){var f=this.series[y];if(this.dirty||f.dirty)if(f.cleanGroup(),this.opt.enableCache&&(f._pathFreePool=(f._pathFreePool?f._pathFreePool:[]).concat(f._pathUsePool?f._pathUsePool:[]),f._pathUsePool=[]),f.data.length){var k,g=m.next(this.opt.areas?"area":"line",[this.opt,f],!0),x=this._hScaler.scaler.getTransformerFromModel(this._hScaler),v=this._vScaler.scaler.getTransformerFromModel(this._vScaler),b=this._eventSeries[f.name]=new Array(f.data.length);if(s=f.group,f.hidden)this.opt.lines&&(f.dyn.stroke=g.series.stroke),this.opt.markers&&(f.dyn.markerFill=g.marker.fill,f.dyn.markerStroke=g.marker.stroke,f.dyn.marker=g.symbol),this.opt.areas&&(f.dyn.fill=g.series.fill);else{for(var S=r.some(f.data,function(t){return"number"==typeof t||t&&!t.hasOwnProperty("x")}),P=this.buildSegments(y,S),F=0;F<P.length;F++){var _=P[F];if(k=S?r.map(_.rseg,function(t,r){return{x:x(r+_.index+1)+i.l,y:e.height-i.b-v(t),data:t}},this):r.map(_.rseg,function(t){return{x:x(t.x)+i.l,y:e.height-i.b-v(t.y),data:t}},this),S&&this.opt.interpolate)for(;F<P.length;)F++,_=P[F],_&&(k=k.concat(r.map(_.rseg,function(t,r){return{x:x(r+_.index+1)+i.l,y:e.height-i.b-v(t),data:t}},this)));var w=this.opt.tension?o.curve(k,this.opt.tension):"";if(this.opt.areas&&k.length>1){var j=this._plotFill(g.series.fill,e,i),M=t.clone(k);if(this.opt.tension){var E="L"+M[M.length-1].x+","+(e.height-i.b)+" L"+M[0].x+","+(e.height-i.b)+" L"+M[0].x+","+M[0].y;f.dyn.fill=s.createPath(w+" "+E).setFill(j).getFill()}else M.push({x:k[k.length-1].x,y:e.height-i.b}),M.push({x:k[0].x,y:e.height-i.b}),M.push(k[0]),f.dyn.fill=s.createPolyline(M).setFill(j).getFill()}(this.opt.lines||this.opt.markers)&&(h=g.series.stroke,g.series.outline&&(l=f.dyn.outline=o.makeStroke(g.series.outline),l.width=2*l.width+h.width)),this.opt.markers&&(f.dyn.marker=g.symbol);var C=null,G=null,D=null;if(h&&g.series.shadow&&k.length>1){var O=g.series.shadow,L=r.map(k,function(t){return{x:t.x+O.dx,y:t.y+O.dy}});this.opt.lines&&(this.opt.tension?f.dyn.shadow=s.createPath(o.curve(L,this.opt.tension)).setStroke(O).getStroke():f.dyn.shadow=s.createPolyline(L).setStroke(O).getStroke()),this.opt.markers&&g.marker.shadow&&(O=g.marker.shadow,D=r.map(L,function(t){return this.createPath(f,s,"M"+t.x+" "+t.y+" "+g.symbol).setStroke(O).setFill(O.color)},this))}if(this.opt.lines&&k.length>1){var T;l&&(this.opt.tension?f.dyn.outline=s.createPath(w).setStroke(l).getStroke():f.dyn.outline=s.createPolyline(k).setStroke(l).getStroke()),this.opt.tension?f.dyn.stroke=(T=s.createPath(w)).setStroke(h).getStroke():f.dyn.stroke=(T=s.createPolyline(k)).setStroke(h).getStroke(),T.setFilter&&g.series.filter&&T.setFilter(g.series.filter)}var U=null;if(this.opt.markers){var A=g;C=new Array(k.length),G=new Array(k.length),l=null,A.marker.outline&&(l=o.makeStroke(A.marker.outline),l.width=2*l.width+(A.marker.stroke?A.marker.stroke.width:0)),r.forEach(k,function(t,e){if(this.opt.styleFunc||"number"!=typeof t.data){var r="number"!=typeof t.data?[t.data]:[];this.opt.styleFunc&&r.push(this.opt.styleFunc(t.data)),A=m.addMixin(g,"marker",r,!0)}else A=m.post(g,"marker");var a="M"+t.x+" "+t.y+" "+A.symbol;l&&(G[e]=this.createPath(f,s,a).setStroke(l)),C[e]=this.createPath(f,s,a).setStroke(A.marker.stroke).setFill(A.marker.fill)},this),f.dyn.markerFill=A.marker.fill,f.dyn.markerStroke=A.marker.stroke,!U&&this.opt.labels&&(U=C[0].getBoundingBox()),c?r.forEach(C,function(t,e){var r={element:"marker",index:e+_.index,run:f,shape:t,outline:G[e]||null,shadow:D&&D[e]||null,cx:k[e].x,cy:k[e].y};S?(r.x=e+_.index+1,r.y=f.data[e+_.index]):(r.x=_.rseg[e].x,r.y=f.data[e+_.index].y),this._connectEvents(r),b[e+_.index]=r},this):delete this._eventSeries[f.name]}if(this.opt.labels){var B=U?U.width:2,W=U?U.height:2;r.forEach(k,function(t,e){if(this.opt.styleFunc||"number"!=typeof t.data){var r="number"!=typeof t.data?[t.data]:[];this.opt.styleFunc&&r.push(this.opt.styleFunc(t.data)),A=m.addMixin(g,"marker",r,!0)}else A=m.post(g,"marker");this.createLabel(s,_.rseg[e],{x:t.x-B/2,y:t.y-W/2,width:B,height:W},A)},this)}}f.dirty=!1}}else f.dirty=!1,m.skip();else m.skip(),this._reconnectEvents(f.name)}if(a("dojo-bidi")&&this._checkOrientation(this.group,e,i),this.animate){var z=this.getGroup();d.animateTransform(t.delegate({shape:z,duration:u,transform:[{name:"translate",start:[0,e.height-i.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play()}return this.dirty=!1,this}})});
define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/has","./CartesianBase","./_PlotEvents","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(t,e,r,a,i,s,n,o,h,l,m,d){var c=h.lambda("item.purgeGroup()");return r("dojox.charting.plot2d.Scatter",[i,s],{defaultParams:{shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:"",styleFunc:null},constructor:function(e,r){this.opt=t.clone(t.mixin(this.opt,this.defaultParams)),l.updateWithObject(this.opt,r),l.updateWithPattern(this.opt,r,this.optionalParams),this.animate=this.opt.animate},render:function(t,r){if(this.zoom&&!this.isDataDirty())return this.performZoom(t,r);this.resetEvents(),this.dirty=this.isDirty();var i;this.dirty&&(e.forEach(this.series,c),this._eventSeries={},this.cleanGroup(),i=this.getGroup(),o.forEachRev(this.series,function(t){t.cleanGroup(i)}));for(var s=this.chart.theme,h=this.events(),l=this.series.length-1;l>=0;--l){var m=this.series[l];if(this.dirty||m.dirty)if(m.cleanGroup(),m.data.length){var u,y=s.next("marker",[this.opt,m]),k=this._hScaler.scaler.getTransformerFromModel(this._hScaler),f=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(m.hidden)m.dyn.marker=y.symbol,m.dyn.markerFill=y.marker.fill,m.dyn.markerStroke=y.marker.stroke;else{i=m.group,u="number"==typeof m.data[0]?e.map(m.data,function(e,a){return{x:k(a+1)+r.l,y:t.height-r.b-f(e)}},this):e.map(m.data,function(e,a){return{x:k(e.x)+r.l,y:t.height-r.b-f(e.y)}},this);var p=new Array(u.length),g=new Array(u.length),x=new Array(u.length);if(e.forEach(u,function(e,a){var o,h=m.data[a];if(this.opt.styleFunc||"number"!=typeof h){var l="number"!=typeof h?[h]:[];this.opt.styleFunc&&l.push(this.opt.styleFunc(h)),o=s.addMixin(y,"marker",l,!0)}else o=s.post(y,"marker");var c="M"+e.x+" "+e.y+" "+o.symbol;if(o.marker.shadow&&(p[a]=i.createPath("M"+(e.x+o.marker.shadow.dx)+" "+(e.y+o.marker.shadow.dy)+" "+o.symbol).setStroke(o.marker.shadow).setFill(o.marker.shadow.color),this.animate&&this._animateScatter(p[a],t.height-r.b)),o.marker.outline){var u=n.makeStroke(o.marker.outline);u.width=2*u.width+o.marker.stroke.width,x[a]=i.createPath(c).setStroke(u),this.animate&&this._animateScatter(x[a],t.height-r.b)}var k=n.makeStroke(o.marker.stroke),f=this._plotFill(o.marker.fill,t,r);if(!f||"linear"!==f.type&&"radial"!=f.type)g[a]=i.createPath(c).setStroke(k).setFill(f);else{var v=d.getColor(f,{x:e.x,y:e.y});k&&(k.color=v),g[a]=i.createPath(c).setStroke(k).setFill(v)}if(this.opt.labels){var S=g[a].getBoundingBox();this.createLabel(i,h,S,o)}this.animate&&this._animateScatter(g[a],t.height-r.b)},this),g.length&&(m.dyn.marker=y.symbol,m.dyn.markerStroke=g[g.length-1].getStroke(),m.dyn.markerFill=g[g.length-1].getFill()),h){var v=new Array(g.length);e.forEach(g,function(t,e){var r={element:"marker",index:e,run:m,shape:t,outline:x&&x[e]||null,shadow:p&&p[e]||null,cx:u[e].x,cy:u[e].y};"number"==typeof m.data[0]?(r.x=e+1,r.y=m.data[e]):(r.x=m.data[e].x,r.y=m.data[e].y),this._connectEvents(r),v[e]=r},this),this._eventSeries[m.name]=v}else delete this._eventSeries[m.name];m.dirty=!1}}else m.dirty=!1,s.skip();else s.skip(),this._reconnectEvents(m.name)}return this.dirty=!1,a("dojo-bidi")&&this._checkOrientation(this.group,t,r),this},_animateScatter:function(e,r){m.animateTransform(t.delegate({shape:e,duration:1200,transform:[{name:"translate",start:[0,r],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play()}})});
define("dojox/wire/Wire",["dojo","dijit","dojox","dojo/require!dojox/wire/_base"],function(e,t,r){e.provide("dojox.wire.Wire"),e.require("dojox.wire._base"),e.declare("dojox.wire.Wire",null,{_wireClass:"dojox.wire.Wire",constructor:function(t){if(e.mixin(this,t),this.converter)if(e.isString(this.converter)){var i=e.getObject(this.converter);if(e.isFunction(i))try{var s=new i;s&&!e.isFunction(s.convert)?this.converter={convert:i}:this.converter=s}catch(o){}else e.isObject(i)&&e.isFunction(i.convert)&&(this.converter=i);if(e.isString(this.converter)){var n=r.wire._getClass(this.converter);n?this.converter=new n:this.converter=void 0}}else e.isFunction(this.converter)&&(this.converter={convert:this.converter})},getValue:function(t){var i=void 0;if(i=r.wire.isWire(this.object)?this.object.getValue(t):this.object||t,this.property){var s=this.property.split(".");for(var o in s){if(!i)return i;i=this._getPropertyValue(i,s[o])}}var n=void 0;return n=this._getValue?this._getValue(i):i,n&&(this.type&&("string"==this.type?n=n.toString():"number"==this.type?n=parseInt(n,10):"boolean"==this.type?n="false"!=n:"array"==this.type&&(e.isArray(n)||(n=[n]))),this.converter&&this.converter.convert&&(n=this.converter.convert(n,this))),n},setValue:function(e,t){var i=void 0;i=r.wire.isWire(this.object)?this.object.getValue(t):this.object||t;var s,o=void 0;if(this.property){if(!i){if(!r.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid object");i={},this.object.setValue(i,t)}for(var n=this.property.split("."),a=n.length-1,u=0;a>u;u++){var h=n[u];s=this._getPropertyValue(i,h),s||(s={},this._setPropertyValue(i,h,s)),i=s}o=n[a]}if(this._setValue){o&&(s=this._getPropertyValue(i,o),s||(s={},this._setPropertyValue(i,o,s)),i=s);var c=this._setValue(i,e);if(!i&&c){if(!r.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid object");this.object.setValue(c,t)}}else if(o)this._setPropertyValue(i,o,e);else{if(!r.wire.isWire(this.object))throw new Error(this._wireClass+".setValue(): invalid property");this.object.setValue(e,t)}},_getPropertyValue:function(t,r){var i=void 0,s=r.indexOf("[");if(s>=0){var o=r.indexOf("]"),n=r.substring(s+1,o),a=null;0===s?a=t:(r=r.substring(0,s),a=this._getPropertyValue(t,r),a&&!e.isArray(a)&&(a=[a])),a&&(i=a[n])}else if(t.getPropertyValue)i=t.getPropertyValue(r);else{var u="get"+r.charAt(0).toUpperCase()+r.substring(1);i=this._useGet(t)?t.get(r):this._useAttr(t)?t.attr(r):t[u]?t[u]():t[r]}return i},_setPropertyValue:function(e,t,r){var i=t.indexOf("[");if(i>=0){var s=t.indexOf("]"),o=t.substring(i+1,s),n=null;0===i?n=e:(t=t.substring(0,i),n=this._getPropertyValue(e,t),n||(n=[],this._setPropertyValue(e,t,n))),n[o]=r}else if(e.setPropertyValue)e.setPropertyValue(t,r);else{var a="set"+t.charAt(0).toUpperCase()+t.substring(1);this._useSet(e)?e.set(t,r):this._useAttr(e)?e.attr(t,r):e[a]?e[a](r):e[t]=r}},_useGet:function(t){var r=!1;return e.isFunction(t.get)&&(r=!0),r},_useSet:function(t){var r=!1;return e.isFunction(t.set)&&(r=!0),r},_useAttr:function(t){var r=!1;return e.isFunction(t.attr)&&(r=!0),r}})});
define("dojox/xmpp/util",["dojo","dijit","dojox","dojo/require!dojox/string/Builder,dojox/encoding/base64"],function(e,r,n){e.provide("dojox.xmpp.util"),e.require("dojox.string.Builder"),e.require("dojox.encoding.base64"),n.xmpp.util.xmlEncode=function(e){return e&&(e=e.replace("&","&amp;").replace(">","&gt;").replace("<","&lt;").replace("'","&apos;").replace('"',"&quot;")),e},n.xmpp.util.encodeJid=function(e){for(var r=new n.string.Builder,t=0;t<e.length;t++){var a=e.charAt(t),i=a;switch(a){case" ":i="\\20";break;case'"':i="\\22";break;case"#":i="\\23";break;case"&":i="\\26";break;case"'":i="\\27";break;case"/":i="\\2f";break;case":":i="\\3a";break;case"<":i="\\3c";break;case">":i="\\3e"}r.append(i)}return r.toString()},n.xmpp.util.decodeJid=function(e){return e=e.replace(/\\([23][02367acef])/g,function(e){switch(e){case"\\20":return" ";case"\\22":return'"';case"\\23":return"#";case"\\26":return"&";case"\\27":return"'";case"\\2f":return"/";case"\\3a":return":";case"\\3c":return"<";case"\\3e":return">"}return"ARG"})},n.xmpp.util.createElement=function(e,r,t){var a=new n.string.Builder("<");a.append(e+" ");for(var i in r)a.append(i+'="'),a.append(r[i]),a.append('" ');return t?a.append("/>"):a.append(">"),a.toString()},n.xmpp.util.stripHtml=function(e){for(var r=/<[^>]*?>/gi,n=0;n<arguments.length;n++);return e.replace(r,"")},n.xmpp.util.decodeHtmlEntities=function(r){var n=e.doc.createElement("textarea");return n.innerHTML=r.replace(/</g,"&lt;").replace(/>/g,"&gt;"),n.value},n.xmpp.util.htmlToPlain=function(e){return e=n.xmpp.util.decodeHtmlEntities(e),e=e.replace(/<br\s*[i\/]{0,1}>/gi,"\n"),e=n.xmpp.util.stripHtml(e)},n.xmpp.util.Base64={},n.xmpp.util.Base64.encode=function(e){var r=function(e){for(var r=[],n=0;n<e.length;++n)r.push(e.charCodeAt(n));return r};return n.encoding.base64.encode(r(e))},n.xmpp.util.Base64.decode=function(r){var t=function(r){var n=[];return e.forEach(r,function(e){n.push(String.fromCharCode(e))}),n.join("")};return t(n.encoding.base64.decode(r))}});
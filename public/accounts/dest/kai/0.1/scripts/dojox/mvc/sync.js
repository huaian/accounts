define("dojox/mvc/sync",["dojo/_base/lang","dojo/_base/config","dojo/_base/array","dojo/has"],function(i,n,e,o){function t(i,n,e,o){return[[e.canConvertToLoggable||!e.declaredClass?e:e.declaredClass,o].join(":"),[i.canConvertToLoggable||!i.declaredClass?i:i.declaredClass,n].join(":")]}function a(n,e){return n===e||"number"==typeof n&&isNaN(n)&&"number"==typeof e&&isNaN(e)||i.isFunction((n||{}).getTime)&&i.isFunction((e||{}).getTime)&&n.getTime()==e.getTime()||(i.isFunction((n||{}).equals)?n.equals(e):i.isFunction((e||{}).equals)?e.equals(n):!1)}function c(n,a,c,s,r,u,g,d,l,f){if(!(c(l,d)||"*"==r&&e.indexOf(s.get("properties")||[g],g)<0||"*"==r&&g in(f||{}))){var m="*"==r?g:r;if(o("mvc-bindings-log-api")){t(s,m,u,g)}try{l=n?n(l,a):l}catch(v){return void o("mvc-bindings-log-api")}o("mvc-bindings-log-api"),i.isFunction(s.set)?s.set(m,l):s[m]=l}}var s=i.getObject("dojox.mvc",!0);o.add("mvc-bindings-log-api",(n.mvc||{}).debugBindings);var r;o("mvc-bindings-log-api");var u,g={from:1,to:2,both:3};return r=function(n,a,g,d,l){var f,m,v,p=(l||{}).converter;p&&(f={source:n,target:g},m=p.format&&i.hitch(f,p.format),v=p.parse&&i.hitch(f,p.parse));var b,h=[],w=[],j=i.mixin({},n.constraints,g.constraints),F=(l||{}).bindDirection||s.both,y=(l||{}).equals||r.equals;if(o("mvc-bindings-log-api")){t(n,a,g,d)}if("*"==d){if("*"!=a)throw new Error("Unmatched wildcard is specified between source and target.");if(b=g.get("properties"),!b){b=[];for(var x in g)g.hasOwnProperty(x)&&"_watchCallbacks"!=x&&b.push(x)}w=g.get("excludes")}else b=[a];F&s.from&&(i.isFunction(n.set)&&i.isFunction(n.watch)?h.push(n.watch.apply(n,("*"!=a?[a]:[]).concat([function(i,e,o){c(m,j,y,g,d,n,i,e,o,w)}]))):o("mvc-bindings-log-api"),e.forEach(b,function(e){if("*"!=d||!(e in(w||{}))){var o=i.isFunction(n.get)?n.get(e):n[e];c(m,j,y,g,"*"==d?e:d,n,e,u,o)}})),F&s.to&&(F&s.from||e.forEach(b,function(e){if("*"!=d||!(e in(w||{}))){var o=i.isFunction(g.get)?g.get(d):g[d];c(v,j,y,n,e,g,"*"==d?e:d,u,o)}}),i.isFunction(g.set)&&i.isFunction(g.watch)?h.push(g.watch.apply(g,("*"!=d?[d]:[]).concat([function(i,e,o){c(v,j,y,n,a,g,i,e,o,w)}]))):o("mvc-bindings-log-api")),o("mvc-bindings-log-api");var q={};return q.unwatch=q.remove=function(){for(var i=null;i=h.pop();)i.unwatch();o("mvc-bindings-log-api")},q},i.mixin(s,g),i.setObject("dojox.mvc.sync",i.mixin(r,{equals:a},g))});
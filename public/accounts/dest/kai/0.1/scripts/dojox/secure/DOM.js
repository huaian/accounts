define("dojox/secure/DOM",["dojo","dijit","dojox","dojo/require!dojox/lang/observable"],function(e,n,r){e.provide("dojox.secure.DOM"),e.require("dojox.lang.observable"),r.secure.DOM=function(n){function t(e){if(!e)return e;var r=e;do if(r==n)return o(e);while(r=r.parentNode);return null}function o(e){if(e){if(e.nodeType){var n=v(e);return 1==e.nodeType&&"function"==typeof n.style&&(n.style=g(e.style),n.ownerDocument=d,n.childNodes={__get__:function(n){return o(e.childNodes[n])},length:0}),n}if(e&&"object"==typeof e){if(e.__observable)return e.__observable;n=e instanceof Array?[]:{},e.__observable=n;for(var t in e)"__observable"!=t&&(n[t]=o(e[t]));return n.data__=e,n}if("function"==typeof e){var a=function(e){return"function"==typeof e?function(){for(var n=0;n<arguments.length;n++)arguments[n]=o(arguments[n]);return a(e.apply(o(this),arguments))}:r.secure.unwrap(e)};return function(){e.safetyCheck&&e.safetyCheck.apply(a(this),arguments);for(var n=0;n<arguments.length;n++)arguments[n]=a(arguments[n]);return o(e.apply(a(this),arguments))}}}return e}function a(e){if(e+="",e.match(/behavior:|content:|javascript:|binding|expression|\@import/))throw new Error("Illegal CSS");var r=n.id||(n.id="safe"+(""+Math.random()).substring(2));return e.replace(/(\}|^)\s*([^\{]*\{)/g,function(e,n,t){return n+" #"+r+" "+t})}function i(e){if(e.match(/:/)&&!e.match(/^(http|ftp|mailto)/))throw new Error("Unsafe URL "+e)}function u(n){if(n&&1==n.nodeType){if(n.tagName.match(/script/i)){var r=n.src;if(r&&""!=r)n.parentNode.removeChild(n),e.xhrGet({url:r,secure:!0}).addCallback(function(e){d.evaluate(e)});else{var t=n.innerHTML;n.parentNode.removeChild(n),o.evaluate(t)}}if(n.tagName.match(/link/i))throw new Error("illegal tag");if(n.tagName.match(/style/i)){var c=function(e){if(n.styleSheet)n.styleSheet.cssText=e;else{var r=f.createTextNode(e);n.childNodes[0]?n.replaceChild(r,n.childNodes[0]):n.appendChild(r)}};r=n.src,r&&""!=r&&(alert("src"+r),n.src=null,e.xhrGet({url:r,secure:!0}).addCallback(function(e){c(a(e))})),c(a(n.innerHTML))}n.style&&a(n.style.cssText),n.href&&i(n.href),n.src&&i(n.src);for(var l,s=0;l=n.attributes[s++];)if("on"==l.name.substring(0,2)&&"null"!=l.value&&""!=l.value)throw new Error("event handlers not allowed in the HTML, they must be set with element.addEventListener");for(var h=n.childNodes,s=0,p=h.length;p>s;s++)u(h[s])}}function c(e){var n=document.createElement("div");if(e.match(/<object/i))throw new Error("The object tag is not allowed");return n.innerHTML=e,u(n),n}function l(e,n){return function(r,t){return u(t[n]),r[e](t[0])}}function s(e){return r.lang.makeObservable(function(e,n){return e[n]},e,function(e,n,r,t){for(var a=0;a<t.length;a++)t[a]=unwrap(t[a]);return o(p[r]?p[r].call(e,n,t):n[r].apply(n,t))},p)}unwrap=r.secure.unwrap;var f=n.ownerDocument,d={getElementById:function(e){return t(f.getElementById(e))},createElement:function(e){return o(f.createElement(e))},createTextNode:function(e){return o(f.createTextNode(e))},write:function(e){for(var r=c(e);r.childNodes.length;)n.appendChild(r.childNodes[0])}};d.open=d.close=function(){};var h={innerHTML:function(e,n){e.innerHTML=c(n).innerHTML}};h.outerHTML=function(e,n){throw new Error("Can not set this property")};var p={appendChild:l("appendChild",0),insertBefore:l("insertBefore",0),replaceChild:l("replaceChild",1),cloneNode:function(e,n){return e.cloneNode(n[0])},addEventListener:function(n,r){e.connect(n,"on"+r[0],this,function(e){e=v(e||window.event),r[1].call(this,e)})}};p.childNodes=p.style=p.ownerDocument=function(){};var v=s(function(e,n,r){h[n]&&h[n](e,r),e[n]=r}),m={behavior:1,MozBinding:1},g=s(function(e,n,r){m[n]||(e[n]=a(r))});return o.safeHTML=c,o.safeCSS=a,o},r.secure.unwrap=function(e){return e&&e.data__||e}});
define("dojox/mobile/app/_base",["dojo","dijit","dojox","dojo/require!dijit/_base,dijit/_WidgetBase,dojox/mobile,dojox/mobile/parser,dojox/mobile/Button,dojox/mobile/app/_event,dojox/mobile/app/_Widget,dojox/mobile/app/StageController,dojox/mobile/app/SceneController,dojox/mobile/app/SceneAssistant,dojox/mobile/app/AlertDialog,dojox/mobile/app/List,dojox/mobile/app/ListSelector,dojox/mobile/app/TextBox,dojox/mobile/app/ImageView,dojox/mobile/app/ImageThumbView"],function(e,o,i){e.provide("dojox.mobile.app._base"),e.experimental("dojox.mobile.app._base"),e.require("dijit._base"),e.require("dijit._WidgetBase"),e.require("dojox.mobile"),e.require("dojox.mobile.parser"),e.require("dojox.mobile.Button"),e.require("dojox.mobile.app._event"),e.require("dojox.mobile.app._Widget"),e.require("dojox.mobile.app.StageController"),e.require("dojox.mobile.app.SceneController"),e.require("dojox.mobile.app.SceneAssistant"),e.require("dojox.mobile.app.AlertDialog"),e.require("dojox.mobile.app.List"),e.require("dojox.mobile.app.ListSelector"),e.require("dojox.mobile.app.TextBox"),e.require("dojox.mobile.app.ImageView"),e.require("dojox.mobile.app.ImageThumbView"),function(){function o(i,t){var r,l;do if(r=i.pop(),r.source)l=r.source;else{if(!r.module)return;l=e.moduleUrl(r.module)+".js"}while(i.length>0&&n[l]);return i.length<1&&n[l]?void t():void e.xhrGet({url:l,sync:!1}).addCallbacks(function(r){e.eval(r),n[l]=!0,i.length>0?o(i,t):t()},function(){})}var t,r,l,n={},a=[],p=function(){t=new i.mobile.app.StageController(l);var o={id:"com.test.app",version:"1.0.0",initialScene:"main"};if(e.global.appInfo&&e.mixin(o,e.global.appInfo),r=i.mobile.app.info=o,r.title){e.query("head title")[0]||e.create("title",{},e.query("head")[0]);document.title=r.title}t.pushScene(r.initialScene)},u=function(){var o=!1;e.global.BackButton?(BackButton.override(),e.connect(document,"backKeyDown",function(o){e.publish("/dojox/mobile/app/goback")}),o=!0):e.global.Mojo,o&&e.addClass(e.body(),"mblNativeBack")};e.mixin(i.mobile.app,{init:function(r){l=r||e.body(),i.mobile.app.STAGE_CONTROLLER_ACTIVE=!0,e.subscribe("/dojox/mobile/app/goback",function(){t.popScene()}),e.subscribe("/dojox/mobile/app/alert",function(e){i.mobile.app.getActiveSceneController().showAlertDialog(e)}),e.subscribe("/dojox/mobile/app/pushScene",function(e,o){t.pushScene(e,o||{})}),e.xhrGet({url:"view-resources.json",load:function(i){var t=[];if(i){a=i=e.fromJson(i);for(var r=0;r<i.length;r++)i[r].scene||t.push(i[r])}t.length>0?o(t,p):p()},error:p}),u()},getActiveSceneController:function(){return t.getActiveSceneController()},getStageController:function(){return t},loadResources:function(e,i){o(e,i)},loadResourcesForScene:function(e,i){for(var t=[],r=0;r<a.length;r++)a[r].scene==e&&t.push(a[r]);t.length>0?o(t,i):i()},resolveTemplate:function(e){return"app/views/"+e+"/"+e+"-scene.html"},resolveAssistant:function(e){return"app/assistants/"+e+"-assistant.js"}})}()});
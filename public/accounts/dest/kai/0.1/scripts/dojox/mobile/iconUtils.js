define("dojox/mobile/iconUtils",["dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/event","dojo/_base/lang","dojo/_base/window","dojo/dom-class","dojo/dom-construct","dojo/dom-style","./sniff"],function(t,e,o,n,i,r,s,l,a,c){var d=i.getObject("dojox.mobile",!0),m=function(){this.setupSpriteIcon=function(e,o){if(e&&o){var n=t.map(o.split(/[ ,]/),function(t){return t-0}),i=n[0],r=n[1]+n[2],l=n[0]+n[3],c=n[1];a.set(e,{position:"absolute",clip:"rect("+i+"px "+r+"px "+l+"px "+c+"px)",top:(e.parentNode?a.get(e,"top"):0)-i+"px",left:-c+"px"}),s.add(e,"mblSpriteIcon")}},this.createDomButton=function(t,o,n){if(!this._domButtons)if(c("webkit")){var i=function(t,e){var o,n;if(!t){var s={},l=r.doc.styleSheets;for(o=0;o<l.length;o++)l[o]&&i(l[o],s);return s}var a=t.cssRules||[];for(o=0;o<a.length;o++){var c=a[o];if(c.href&&c.styleSheet)i(c.styleSheet,e);else if(c.selectorText){var d=c.selectorText.split(/,/);for(n=0;n<d.length;n++){var m=d[n],u=m.split(/>/).length-1;if(m.match(/(mblDomButton\w+)/)){var f=RegExp.$1;(!e[f]||u>e[f])&&(e[f]=u)}}}}return e};this._domButtons=i()}else this._domButtons={};var d=t.className,m=n||t;if(d.match(/(mblDomButton\w+)/)&&-1===d.indexOf("/")){var u=RegExp.$1,f=4;d.match(/(mblDomButton\w+_(\d+))/)?f=RegExp.$2-0:void 0!==this._domButtons[u]&&(f=this._domButtons[u]);var p=null;c("bb")&&e.mblBBBoxShadowWorkaround!==!1&&(p={style:"-webkit-box-shadow:none"});for(var h=0,b=m;f>h;h++)b=b.firstChild||l.create("div",p,b);n&&(setTimeout(function(){s.remove(t,u)},0),s.add(n,u))}else{if(-1===d.indexOf("."))return null;l.create("img",{src:d},m)}return s.add(m,"mblDomButton"),!!o&&a.set(m,o),m},this.createIcon=function(t,e,i,r,c,m,u){if(r=r||"",t&&0===t.indexOf("mblDomButton"))i?i.className.match(/(mblDomButton\w+)/)&&s.remove(i,RegExp.$1):i=l.create("div",null,m||c,u),i.title=r,s.add(i,t),this.createDomButton(i);else if(t&&"none"!==t){if(i&&"IMG"===i.nodeName||(i=l.create("img",{alt:r},m||c,u)),i.src=(t||"").replace("${theme}",d.currentTheme),this.setupSpriteIcon(i,e),e&&c){var f=e.split(/[ ,]/);a.set(c,{position:"relative",width:f[2]+"px",height:f[3]+"px"}),s.add(c,"mblSpriteIconParent")}o.connect(i,"ondragstart",n,"stop")}return i},this.iconWrapper=!1,this.setIcon=function(t,e,o,n,i,r,a){return i&&(t||o)?t&&"none"!==t?(this.iconWrapper||0===t.indexOf("mblDomButton")||e?(o&&"IMG"===o.tagName&&(l.destroy(o),o=null),o&&l.empty(o),o||(o=l.create("div",null,r||i,a)),this.createIcon(t,e,null,null,o),n&&(o.title=n)):(o&&"DIV"===o.tagName&&(l.destroy(o),o=null),o=this.createIcon(t,null,o,n,i,r,a),s.add(o,"mblImageIcon")),s.remove(i,"mblNoIcon"),o):(l.destroy(o),s.add(i,"mblNoIcon"),null):null}};return new m});
define("dojox/mobile/common",["dojo/_base/array","dojo/_base/config","dojo/_base/connect","dojo/_base/lang","dojo/_base/window","dojo/_base/kernel","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/domReady","dojo/ready","dojo/touch","dijit/registry","./sniff","./uacss"],function(e,i,t,o,n,d,r,a,l,s,c,u,m,b){var h=o.getObject("dojox.mobile",!0);if(n.doc.dojoClick=!0,b("touch")&&(b.add("clicks-prevented",!(b("android")>=4.1||10===b("ie")||!b("ie")&&b("trident")>6)),b("clicks-prevented")&&(h._sendClick=function(e,i){for(var t=e;t;t=t.parentNode)if(t.dojoClick)return;var o=n.doc.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,n.global,1,i.screenX,i.screenY,i.clientX,i.clientY),e.dispatchEvent(o)})),h.getScreenSize=function(){return{h:n.global.innerHeight||n.doc.documentElement.clientHeight,w:n.global.innerWidth||n.doc.documentElement.clientWidth}},h.updateOrient=function(){var e=h.getScreenSize();a.replace(n.doc.documentElement,e.h>e.w?"dj_portrait":"dj_landscape",e.h>e.w?"dj_landscape":"dj_portrait")},h.updateOrient(),h.tabletSize=500,h.detectScreenSize=function(e){var i,o,d=h.getScreenSize(),r=Math.min(d.w,d.h);r>=h.tabletSize&&(e||!this._sz||this._sz<h.tabletSize)?(i="phone",o="tablet"):r<h.tabletSize&&(e||!this._sz||this._sz>=h.tabletSize)&&(i="tablet",o="phone"),o&&(a.replace(n.doc.documentElement,"dj_"+o,"dj_"+i),t.publish("/dojox/mobile/screenSize/"+o,[d])),this._sz=r},h.detectScreenSize(),h.hideAddressBarWait="number"==typeof i.mblHideAddressBarWait?i.mblHideAddressBarWait:1500,h.hide_1=function(){scrollTo(0,1),h._hidingTimer=0==h._hidingTimer?200:2*h._hidingTimer,setTimeout(function(){h.isAddressBarHidden()||h._hidingTimer>h.hideAddressBarWait?(h.resizeAll(),h._hiding=!1):setTimeout(h.hide_1,h._hidingTimer)},50)},h.hideAddressBar=function(e){if(!h.disableHideAddressBar&&!h._hiding){h._hiding=!0,h._hidingTimer=b("ios")?200:0;var i=screen.availHeight;b("android")&&(i=outerHeight/devicePixelRatio,0==i&&(h._hiding=!1,setTimeout(function(){h.hideAddressBar()},200)),i<=innerHeight&&(i=outerHeight),b("android")<3&&(n.doc.documentElement.style.overflow=n.body().style.overflow="visible")),n.body().offsetHeight<i&&(n.body().style.minHeight=i+"px",h._resetMinHeight=!0),setTimeout(h.hide_1,h._hidingTimer)}},h.isAddressBarHidden=function(){return 1===pageYOffset},h.resizeAll=function(i,o){if(!h.disableResizeAll){t.publish("/dojox/mobile/resizeAll",[i,o]),t.publish("/dojox/mobile/beforeResizeAll",[i,o]),h._resetMinHeight&&(n.body().style.minHeight=h.getScreenSize().h+"px"),h.updateOrient(),h.detectScreenSize();var d=function(e){var i=e.getParent&&e.getParent();return!(i&&i.resize||!e.resize)},r=function(i){e.forEach(i.getChildren(),function(e){d(e)&&e.resize(),r(e)})};o?(o.resize&&o.resize(),r(o)):e.forEach(e.filter(m.toArray(),d),function(e){e.resize()}),t.publish("/dojox/mobile/afterResizeAll",[i,o])}},h.openWindow=function(e,i){n.global.open(e,i||"_blank")},h._detectWindowsTheme=function(){navigator.userAgent.match(/IEMobile\/10\.0/)&&l.create("style",{innerHTML:"@-ms-viewport {width: auto !important}"},n.doc.head);var e=function(){a.add(n.doc.documentElement,"windows_theme"),d.experimental("Dojo Mobile Windows theme","Behavior and appearance of the Windows theme are experimental.")},i=b("windows-theme");if(void 0!==i)return void(i&&e());var t,o,r=function(i){return i&&-1!==i.indexOf("/windows/")?(b.add("windows-theme",!0),e(),!0):!1},s=n.doc.styleSheets;for(t=0;t<s.length;t++)if(!s[t].href){var c=s[t].cssRules||s[t].imports;if(c)for(o=0;o<c.length;o++)if(r(c[o].href))return}var u=n.doc.getElementsByTagName("link");for(t=0;t<u.length;t++)if(r(u[t].href))return},i.mblApplyPageStyles!==!1&&a.add(n.doc.documentElement,"mobile"),b("chrome")&&a.add(n.doc.documentElement,"dj_chrome"),n.global._no_dojo_dm){var f=n.global._no_dojo_dm;for(var g in f)h[g]=f[g];h.deviceTheme.setDm(h)}return b.add("mblAndroidWorkaround",i.mblAndroidWorkaround!==!1&&b("android")<3,void 0,!0),b.add("mblAndroid3Workaround",i.mblAndroid3Workaround!==!1&&b("android")>=3,void 0,!0),h._detectWindowsTheme(),h.setSelectable=function(e,i){var t,o;if(e=r.byId(e),b("ie")<=9)if(t=e.getElementsByTagName("*"),o=t.length,i)for(e.removeAttribute("unselectable");o--;)t[o].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");o--;)"INPUT"!==t[o].tagName&&t[o].setAttribute("unselectable","on");else a.toggle(e,"unselectable",!i)},s(function(){a.add(n.body(),"mblBackground")}),c(function(){h.detectScreenSize(!0),i.mblAndroidWorkaroundButtonStyle!==!1&&b("android")&&l.create("style",{innerHTML:"BUTTON,INPUT[type='button'],INPUT[type='submit'],INPUT[type='reset'],INPUT[type='file']::-webkit-file-upload-button{-webkit-appearance:none;} audio::-webkit-media-controls-play-button,video::-webkit-media-controls-play-button{-webkit-appearance:media-play-button;} video::-webkit-media-controls-fullscreen-button{-webkit-appearance:media-fullscreen-button;}"},n.doc.head,"first"),b("mblAndroidWorkaround")&&l.create("style",{innerHTML:".mblView.mblAndroidWorkaround{position:absolute;top:-9999px !important;left:-9999px !important;}"},n.doc.head,"last");var e=h.resizeAll,o=-1!=navigator.appVersion.indexOf("Mobile")&&!(b("ios")>=7);(i.mblHideAddressBar!==!1&&o||i.mblForceHideAddressBar===!0)&&(h.hideAddressBar(),i.mblAlwaysHideAddressBar===!0&&(e=h.hideAddressBar));var d=b("ios")>=6;if((b("android")||d)&&void 0!==n.global.onorientationchange){var r,a,s,c=e;d?(a=n.doc.documentElement.clientWidth,s=n.doc.documentElement.clientHeight):(e=function(e){var i=t.connect(null,"onresize",null,function(e){t.disconnect(i),c(e)})},r=h.getScreenSize()),t.connect(null,"onresize",null,function(e){if(d){var i=n.doc.documentElement.clientWidth,t=n.doc.documentElement.clientHeight;i==a&&t!=s&&c(e),a=i,s=t}else{var o=h.getScreenSize();o.w==r.w&&Math.abs(o.h-r.h)>=100&&c(e),r=o}})}t.connect(null,void 0!==n.global.onorientationchange?"onorientationchange":"onresize",null,e),n.body().style.visibility="visible"}),h});
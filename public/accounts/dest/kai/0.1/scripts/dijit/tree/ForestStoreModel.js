define("dijit/tree/ForestStoreModel",["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(t,e,o,i,r){return e("dijit.tree.ForestStoreModel",r,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(t){this.root={store:this,root:!0,id:t.rootId,label:t.rootLabel,children:t.rootChildren}},mayHaveChildren:function(t){return t===this.root||this.inherited(arguments)},getChildren:function(t,e,o){t===this.root?this.root.children?e(this.root.children):this.store.fetch({query:this.query,onComplete:i.hitch(this,function(t){this.root.children=t,e(t)}),onError:o}):this.inherited(arguments)},isItem:function(t){return t===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(t){if(t.identity==this.root.id){var e=t.scope||o.global;t.onItem&&t.onItem.call(e,this.root)}else this.inherited(arguments)},getIdentity:function(t){return t===this.root?this.root.id:this.inherited(arguments)},getLabel:function(t){return t===this.root?this.root.label:this.inherited(arguments)},newItem:function(t,e,o){return e===this.root?(this.onNewRootItem(t),this.store.newItem(t)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(t,e,o,i,r){e===this.root&&(i||this.onLeaveRoot(t)),this.inherited(arguments,[t,e===this.root?null:e,o===this.root?null:o,i,r]),o===this.root&&this.onAddToRoot(t)},onAddToRoot:function(t){},onLeaveRoot:function(t){},_requeryTop:function(){var e=this.root.children||[];this.store.fetch({query:this.query,onComplete:i.hitch(this,function(o){this.root.children=o,(e.length!=o.length||t.some(e,function(t,e){return o[e]!=t}))&&this.onChildrenChange(this.root,o)})})},onNewItem:function(t,e){this._requeryTop(),this.inherited(arguments)},onDeleteItem:function(e){-1!=t.indexOf(this.root.children,e)&&this._requeryTop(),this.inherited(arguments)},onSetItem:function(t,e,o,i){this._requeryTop(),this.inherited(arguments)}})});
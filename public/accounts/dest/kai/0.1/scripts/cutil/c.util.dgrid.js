define("cutil/c.util.dgrid",["custom/dstore/RestStore","custom/dgrid/cdgrid","dojo/_base/lang"],function(e,t,r){var i={format:function(e){var t=this,e=JSON.parse(e);if(e&&e[Kai.responseStatusKey]&&"400004"==e[Kai.responseStatusKey].code)return t.showLoginDialog(),!1;if(_.isObject(e)&&_.isString(e[Kai.responseStatusKey].msg))return Kai.showToast({text:e[Kai.responseStatusKey].msg}),!1;var r=$.extend(e.body.obj.list,{},!0);return r},createRestGrid:function(s){var a=new e(r.mixin({target:s.restModel},{})),n=a.filter({});n.filter=s.filter||{},s.parseFn?n.parse=s.parseFn:s&&_.isObject(s)?n.parse=$.proxy(i.format,s.view):n.parse=i.format;var o=new t({collection:n,columns:s.columns,className:"dgrid-autoheight",rowsPerPage:s.rowsPerPage||25,pageSizeOptions:s.pageSizeOptions||[5,10,15,25]},s.elementId);return o}};return i.updateGrid=function(e,t){if(t&&t.isRest){if(t.filterParam){if(!e.collection)return!1;e.collection.filter=_.isObject(t)?t.filterParam:{}}e&&e.refresh().then(function(){self.grid&&self.grid.startup()},function(){})}else e&&e.collection&&e.collection.setData(t.list),e&&e.refresh()},i.formatter=function(e){return'<span title="'+_.escape(e)+'">'+_.escape(e)+"</span>"},i});
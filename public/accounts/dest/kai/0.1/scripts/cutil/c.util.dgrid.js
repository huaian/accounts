define("cutil/c.util.dgrid",["custom/dstore/RestStore","custom/dgrid/cdgrid","dojo/_base/lang"],function(e,t,r){var s={format:function(e){var t=this,e=JSON.parse(e);if(e&&e.responseStatus&&"400004"==e.responseStatus.code)return t.showLoginDialog(),!1;if(_.isObject(e)&&_.isString(e.responseStatus.msg))return Kai.showToast({text:e.responseStatus.msg}),!1;var r=$.extend(e.body.obj.list,{},!0);return r},createRestGrid:function(i){var n=new e(r.mixin({target:i.restModel},{})),o=n.filter({});o.filter=i.filter||{},i.parseFn?o.parse=i.parseFn:i&&_.isObject(i)?o.parse=$.proxy(s.format,i.view):o.parse=s.format;var a=new t({collection:o,columns:i.columns,className:"dgrid-autoheight",rowsPerPage:i.rowsPerPage||25,pageSizeOptions:i.pageSizeOptions||[5,10,15,25]},i.elementId);return a}};return s.updateGrid=function(e,t){if(t&&t.isRest){if(t.filterParam){if(!e.collection)return!1;e.collection.filter=_.isObject(t)?t.filterParam:{}}e&&e.refresh().then(function(){self.grid&&self.grid.startup()},function(){})}else e&&e.collection&&e.collection.setData(t.list),e&&e.refresh()},s.formatter=function(e){return'<span title="'+_.escape(e)+'">'+_.escape(e)+"</span>"},s});
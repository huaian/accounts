define("service/web/c.web.geolocation",["./c.geo.helper","data/model/c.model","common/c.class.inherit"],function(e,t,o){var n={};return n.isInOverseas=!1,n.requestGeographic=function(t,o,a){var c=function(e,t,o){var n=document.createElement("script"),a=document.write;n.type="text/javascript",n.readyState?n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,document.write=a,o&&t&&t())}:(n.onload=function(){document.write=a,o&&t&&t()},n.onerror=function(){document.write=a}),n.src=e,document.write=function(e){var t=e.match(/http(s)?:\/\/[A-Za-z0-9]+[\.\/=\?%\-&_~`@[\]\:+!]*([^<>])*(\.js)/);t&&c(t[0],function(){document.write=a},!0)},document.body.appendChild(n)},i=function(o){t&&t(o);var a=o.coords.longitude,i=o.coords.latitude,r=e.getCountry(a,i);2==r?(n.isInOverseas=!0,"undefined"==typeof google&&c("https://maps.googleapis.com/maps/api/js?v=3&region=zh-CN")):n.isInOverseas=!1},r=function(e){var t="未能获取到您当前位置，请重试或选择城市";switch(e.code){case e.TIMEOUT:t="获取您当前位置超时，请重试或选择城市！";break;case e.PERMISSION_DENIED:t="您拒绝了使用位置共享服务，查询已取消，请开启位置共享或选择城市！";break;case e.POSITION_UNAVAILABLE:t="获取您当前位置信息失败，请重试或选择城市！"}o&&o(e,t)};window.navigator&&window.navigator.geolocation?window.navigator.geolocation.getCurrentPosition(i,r,{enableHighAccuracy:!0,maximumAge:5e3,timeout:a||2e4}):o&&o("","获取您当前位置信息失败，浏览器不支持定位！")},n});
<!DOCTYPE html>
<!--lang="zh-cmn-Hans" should not be used for dojo compile issue-->
<html>
<head>
	<title></title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,minimal-ui" />
	<!--禁止将电话号码解析成iphone自己的样式-->
	<meta content="telephone=no" name="format-detection">
	<!-- UC强制全屏 -->
	<meta name="full-screen" content="yes">
	<!--百度打开网页可能会对其进行转码（比如贴广告），避免转码-->
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<!--添加meta标签的网站可以控制浏览器选择何种内核渲染-->
	<meta name="renderer" content="webkit">
	<!--网站开启对web app程序的支持。-->
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<!--在web app应用下状态条（屏幕顶部条）的颜色； 默认值为default（白色），可以定为black（黑色）和black-translucent（灰色半透明）。-->
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="browsermode" content="application"><!-- QQ应用模式 -->
	<meta name="x5-page-mode" content="app">
	<link rel="shortcut icon" href="" type="image/x-icon"/>
</head>

<body class="claro dbootstrap" role="main" ontouchstart>
	<div id="main_container">
		<div class="main-frame">
			<div class="main-viewport">
			</div><!--container for all sub-viewports -->
			<div class="main-state"></div><!--纪录当前的view状态-->
		</div>
	</div>

	<script type="text/javascript">
	var version = '0.1';/**内核版本号*/
	var kaiPrefx = '';
	var appPrefx = '';
	function loadScript(url,callback) {
		var head = document.head || document.getElementsByTagName("head")[0] || document.documentElement,
		script,
		options;

		if (typeof url === "object") {
			options = url;
			url = undefined;
		}
		s = options || {};
		url = url || s.url;
		callback = callback || s.success;
		script = document.createElement("script");
		script.async = s.async || false;
		script.defer = s.defer || false;
		script.type = "text/javascript";
		if (s.charset) {
			script.charset = s.charset;
		}
		if(s.cache === false){//需要显式设置不允许缓存
			//url = url+( /\?/.test( url ) ? "&" : "?" )+ "_=" +(new Date()).getTime();
			url = url+( /\?/.test( url ) ? "&" : "?" )+ '_v='+ version;
		}
		script.src = url;
		head.insertBefore(script, head.firstChild);
		if(callback){
			document.addEventListener ? (script.addEventListener("load", callback, false) ): (script.onreadystatechange = function() {
				if (/loaded|complete/.test(script.readyState)) {
					script.onreadystatechange = null;
					callback && callback()
				}
			});
		}//
	}
	var dojoConfig = {
		isH5:(function(){
			var hostname = location.hostname;//
			//alert(window.navigator.userAgent);
			if(hostname.indexOf('wap')>=0 || (location.href.indexOf('h5')>=0) || (window.navigator.userAgent.indexOf('Mobile') >= 0)){//判断是否是H5页面
				return true;
			}else{
				return false;
			}
		})(),
		async: true,
		popup:false,
		//baseUrl:'./',
		///*
		baseUrl:(function(){
			if(location.pathname.indexOf('app') >= 0){
				//return '../../';//得到绝对路径，main.js根据该路径来定义
				kaiPrefx = '../../../../';
				return '../';//
			}else{
				appPrefx = './app/';
				return location.pathname.replace(/\/[^/]*$/, '');
			}
			//return '../';
			//return './';
		})(),
		//*/
		isDebug: true,
		packages: [
			// Using a string as a package is shorthand for `{ name: 'app', location: 'app' }`
		],
		selectorEngine: 'lite',
		tlmSiblingOfDojo:false,
		has: {
			"dojo-firebug": false,
			"dojo-amd-factory-scan":true,
			"dojo-debug-messages": true,
			"dojo-guarantee-console":true,
			"config-tlmSiblingOfDojo":false
		},
		//deps: ["kai/0.1/scripts/main"],
		deps: [appPrefx + "appMain/main.js"],
		//"popup":true,
		waitSeconds: 0,
		map: {
			// Instead of having to type "dojo/domReady!", we just want "ready!" instead
			"*": {
				ready: "dojo/domReady"
			}
		},
		parseOnLoad: false,
		locale: "zh",
		//cacheBust: true,
		cacheBust: '_v='+ '_k=' + version,<!--生产环境中防止缓存文件-->
		fontSizeWatch:true,
		preloadImages:true,
		callback:function(){
			if(appPrefx){
				require(["appMain/main"]);
			}
		}
	};
	loadScript({
		url:dojoConfig.baseUrl + kaiPrefx + '/./kai/0.1/scripts/dojo/dojo.js',//根据index.html来路径
		async:true,
		defer:true,
		cache:false
	});
	//alert(JSON.stringify(localStorage));
</script>

<!--global loading 页面加载中的loading效果-->
<div class='cui_loading index'>
	<div class="loading"></div>
	<div class="loading-shade"></div>
</div>

<!--显示加载中提示 开始-->
<div id="loading-hint">
	<div id="loaderInner" style="direction:ltr;">加载中，请稍候...</div>
</div>
<!--显示加载中提示 结束-->
<!--AMD loader-->
<!--script src="./kai/0.1/scripts/3rdlibs/require-2.1.22.js" defer async="true"></script-->
<!--script src="./0.1/scripts/dojo/dojo.js" defer async="true"></script-->
<script src="//pic.madailicai.com/js/tnsdk.min.js"></script>
<script src="//pic.madailicai.com/js/tracker.min.js?app=appname" id="G_TRACKING"></script>
<script>
	//alert('template html loaded');
</script>
</body>
</html>

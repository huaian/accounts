require({cache:{"url:dojox/atom/widget/templates/FeedEntryEditor.html":'<div class="feedEntryViewer">\n    <table border="0" width="100%" class="feedEntryViewerMenuTable" dojoAttachPoint="feedEntryViewerMenu" style="display: none;">\n        <tr width="100%"  dojoAttachPoint="entryCheckBoxDisplayOptions">\n        	<td align="left" dojoAttachPoint="entryNewButton">\n                <span class="feedEntryViewerMenu" dojoAttachPoint="doNew" dojoAttachEvent="onclick:_toggleNew"></span>\n        	</td>\n            <td align="left" dojoAttachPoint="entryEditButton" style="display: none;">\n                <span class="feedEntryViewerMenu" dojoAttachPoint="edit" dojoAttachEvent="onclick:_toggleEdit"></span>\n            </td>\n            <td align="left" dojoAttachPoint="entrySaveCancelButtons" style="display: none;">\n                <span class="feedEntryViewerMenu" dojoAttachPoint="save" dojoAttachEvent="onclick:saveEdits"></span>\n                <span class="feedEntryViewerMenu" dojoAttachPoint="cancel" dojoAttachEvent="onclick:cancelEdits"></span>\n            </td>\n            <td align="right">\n                <span class="feedEntryViewerMenu" dojoAttachPoint="displayOptions" dojoAttachEvent="onclick:_toggleOptions"></span>\n            </td>\n        </tr>\n        <tr class="feedEntryViewerDisplayCheckbox" dojoAttachPoint="entryCheckBoxRow" width="100%" style="display: none;">\n            <td dojoAttachPoint="feedEntryCelltitle">\n                <input type="checkbox" name="title" value="Title" dojoAttachPoint="feedEntryCheckBoxTitle" dojoAttachEvent="onclick:_toggleCheckbox"/>\n				<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelTitle"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellauthors">\n                <input type="checkbox" name="authors" value="Authors" dojoAttachPoint="feedEntryCheckBoxAuthors" dojoAttachEvent="onclick:_toggleCheckbox"/>\n				<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelAuthors"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellcontributors">\n                <input type="checkbox" name="contributors" value="Contributors" dojoAttachPoint="feedEntryCheckBoxContributors" dojoAttachEvent="onclick:_toggleCheckbox"/>\n				<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelContributors"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellid">\n                <input type="checkbox" name="id" value="Id" dojoAttachPoint="feedEntryCheckBoxId" dojoAttachEvent="onclick:_toggleCheckbox"/>\n				<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelId"></label>\n            </td>\n            <td rowspan="2" align="right">\n                <span class="feedEntryViewerMenu" dojoAttachPoint="close" dojoAttachEvent="onclick:_toggleOptions"></span>\n            </td>\n		</tr>\n		<tr class="feedEntryViewerDisplayCheckbox" dojoAttachPoint="entryCheckBoxRow2" width="100%" style="display: none;">\n            <td dojoAttachPoint="feedEntryCellupdated">\n                <input type="checkbox" name="updated" value="Updated" dojoAttachPoint="feedEntryCheckBoxUpdated" dojoAttachEvent="onclick:_toggleCheckbox"/>\n				<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelUpdated"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellsummary">\n                <input type="checkbox" name="summary" value="Summary" dojoAttachPoint="feedEntryCheckBoxSummary" dojoAttachEvent="onclick:_toggleCheckbox"/>\n				<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelSummary"></label>\n            </td>\n            <td dojoAttachPoint="feedEntryCellcontent">\n                <input type="checkbox" name="content" value="Content" dojoAttachPoint="feedEntryCheckBoxContent" dojoAttachEvent="onclick:_toggleCheckbox"/>\n				<label for="title" dojoAttachPoint="feedEntryCheckBoxLabelContent"></label>\n            </td>\n        </tr>\n    </table>\n    \n    <table class="feedEntryViewerContainer" border="0" width="100%">\n        <tr class="feedEntryViewerTitle" dojoAttachPoint="entryTitleRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n						<td class="lp2">\n							<span class="lp" dojoAttachPoint="entryTitleHeader"></span>\n						</td>\n                    </tr>\n                    <tr>\n                        <td>\n                        	<select dojoAttachPoint="entryTitleSelect" dojoAttachEvent="onchange:_switchEditor" style="display: none">\n                        		<option value="text">Text</option>\n								<option value="html">HTML</option>\n								<option value="xhtml">XHTML</option>\n                        	</select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colspan="2" dojoAttachPoint="entryTitleNode">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n\n        <tr class="feedEntryViewerAuthor" dojoAttachPoint="entryAuthorRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n						<td class="lp2">\n							<span class="lp" dojoAttachPoint="entryAuthorHeader"></span>\n						</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryAuthorNode">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n\n        <tr class="feedEntryViewerContributor" dojoAttachPoint="entryContributorRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n						<td class="lp2">\n							<span class="lp" dojoAttachPoint="entryContributorHeader"></span>\n						</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryContributorNode" class="feedEntryViewerContributorNames">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n        \n        <tr class="feedEntryViewerId" dojoAttachPoint="entryIdRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n						<td class="lp2">\n							<span class="lp" dojoAttachPoint="entryIdHeader"></span>\n						</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryIdNode" class="feedEntryViewerIdText">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    \n        <tr class="feedEntryViewerUpdated" dojoAttachPoint="entryUpdatedRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n						<td class="lp2">\n							<span class="lp" dojoAttachPoint="entryUpdatedHeader"></span>\n						</td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryUpdatedNode" class="feedEntryViewerUpdatedText">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    \n        <tr class="feedEntryViewerSummary" dojoAttachPoint="entrySummaryRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n						<td class="lp2" colspan="2">\n							<span class="lp" dojoAttachPoint="entrySummaryHeader"></span>\n						</td>\n                    </tr>\n                    <tr>\n                        <td>\n                        	<select dojoAttachPoint="entrySummarySelect" dojoAttachEvent="onchange:_switchEditor" style="display: none">\n                        		<option value="text">Text</option>\n								<option value="html">HTML</option>\n								<option value="xhtml">XHTML</option>\n                        	</select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entrySummaryNode">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    \n        <tr class="feedEntryViewerContent" dojoAttachPoint="entryContentRow" style="display: none;">\n            <td>\n                <table width="100%" cellpadding="0" cellspacing="0" border="0">\n                    <tr class="graphic-tab-lgray">\n						<td class="lp2">\n							<span class="lp" dojoAttachPoint="entryContentHeader"></span>\n						</td>\n                    </tr>\n                    <tr>\n                        <td>\n                        	<select dojoAttachPoint="entryContentSelect" dojoAttachEvent="onchange:_switchEditor" style="display: none">\n                        		<option value="text">Text</option>\n								<option value="html">HTML</option>\n								<option value="xhtml">XHTML</option>\n                        	</select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td dojoAttachPoint="entryContentNode">\n                        </td>\n                    </tr>\n                </table>\n            </td>\n        </tr>\n    </table>\n</div>\n',"url:dojox/atom/widget/templates/PeopleEditor.html":'<div class="peopleEditor">\n	<table style="width: 100%">\n		<tbody dojoAttachPoint="peopleEditorEditors"></tbody>\n	</table>\n	<span class="peopleEditorButton" dojoAttachPoint="peopleEditorButton" dojoAttachEvent="onclick:_add"></span>\n</div>'}}),define("dojox/atom/widget/FeedEntryEditor",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/connect","dojo/_base/declare","dojo/_base/fx","dojo/_base/sniff","dojo/dom","dojo/dom-style","dojo/dom-construct","dijit/_Widget","dijit/_Templated","dijit/_Container","dijit/Editor","dijit/form/TextBox","dijit/form/SimpleTextarea","./FeedEntryViewer","../io/model","dojo/text!./templates/FeedEntryEditor.html","dojo/text!./templates/PeopleEditor.html","dojo/i18n!./nls/FeedEntryViewer","dojo/i18n!./nls/FeedEntryEditor","dojo/i18n!./nls/PeopleEditor"],function(t,e,n,i,o,r,d,a,s,l,h,c,u,y,p,m,E,_,v,f,b,C){t.experimental("dojox.atom.widget.FeedEntryEditor");var w=i("dojox.atom.widget.FeedEntryEditor",m,{_contentEditor:null,_oldContent:null,_setObject:null,enableEdit:!1,_contentEditorCreator:null,_editors:{},entryNewButton:null,_editable:!1,templateString:_,postCreate:function(){""!==this.entrySelectionTopic&&(this._subscriptions=[t.subscribe(this.entrySelectionTopic,this,"_handleEvent")]);var e=f;this.displayOptions.innerHTML=e.displayOptions,this.feedEntryCheckBoxLabelTitle.innerHTML=e.title,this.feedEntryCheckBoxLabelAuthors.innerHTML=e.authors,this.feedEntryCheckBoxLabelContributors.innerHTML=e.contributors,this.feedEntryCheckBoxLabelId.innerHTML=e.id,this.close.innerHTML=e.close,this.feedEntryCheckBoxLabelUpdated.innerHTML=e.updated,this.feedEntryCheckBoxLabelSummary.innerHTML=e.summary,this.feedEntryCheckBoxLabelContent.innerHTML=e.content,e=b,this.doNew.innerHTML=e.doNew,this.edit.innerHTML=e.edit,this.save.innerHTML=e.save,this.cancel.innerHTML=e.cancel},setEntry:function(t,e,n){this._entry!==t?(this._editMode=!1,n=!1):n=!0,w.superclass.setEntry.call(this,t,e),this._editable=this._isEditable(t),n||this._editable||(a.set(this.entryEditButton,"display","none"),a.set(this.entrySaveCancelButtons,"display","none")),this._editable&&this.enableEdit&&(n||(a.set(this.entryEditButton,"display",""),this.enableMenuFade&&this.entrySaveCancelButton&&o.fadeOut({node:this.entrySaveCancelButton,duration:250}).play()))},_toggleEdit:function(){this._editable&&this.enableEdit&&(a.set(this.entryEditButton,"display","none"),a.set(this.entrySaveCancelButtons,"display",""),this._editMode=!0,this.setEntry(this._entry,this._feed,!0))},_handleEvent:function(t){t.source!=this&&"delete"==t.action&&t.entry&&t.entry==this._entry&&a.set(this.entryEditButton,"display","none"),w.superclass._handleEvent.call(this,t)},_isEditable:function(t){var e=!1;if(t&&null!==t&&t.links&&null!==t.links)for(var n in t.links)if(t.links[n].rel&&"edit"==t.links[n].rel){e=!0;break}return e},setTitle:function(t,e,n){if(e){if(n.title&&n.title.value&&null!==n.title.value){this._toLoad||(this._toLoad=[]),this.entryTitleSelect.value=n.title.type;var i=this._createEditor(t,n.title,!0,"html"===n.title.type||"xhtml"===n.title.type);i.name="title",this._toLoad.push(i),this.setFieldValidity("titleedit",!0),this.setFieldValidity("title",!0)}}else w.superclass.setTitle.call(this,t,e,n),n.title&&n.title.value&&null!==n.title.value&&this.setFieldValidity("title",!0)},setAuthors:function(t,e,n){e?n.authors&&n.authors.length>0&&(this._editors.authors=this._createPeopleEditor(this.entryAuthorNode,{data:n.authors,name:"Author"}),this.setFieldValidity("authors",!0)):(w.superclass.setAuthors.call(this,t,e,n),n.authors&&n.authors.length>0&&this.setFieldValidity("authors",!0))},setContributors:function(t,e,n){e?n.contributors&&n.contributors.length>0&&(this._editors.contributors=this._createPeopleEditor(this.entryContributorNode,{data:n.contributors,name:"Contributor"}),this.setFieldValidity("contributors",!0)):(w.superclass.setContributors.call(this,t,e,n),n.contributors&&n.contributors.length>0&&this.setFieldValidity("contributors",!0))},setId:function(t,e,n){e?n.id&&null!==n.id&&(this._editors.id=this._createEditor(t,n.id),this.setFieldValidity("id",!0)):(w.superclass.setId.call(this,t,e,n),n.id&&null!==n.id&&this.setFieldValidity("id",!0))},setUpdated:function(t,e,n){e?n.updated&&null!==n.updated&&(this._editors.updated=this._createEditor(t,n.updated),this.setFieldValidity("updated",!0)):(w.superclass.setUpdated.call(this,t,e,n),n.updated&&null!==n.updated&&this.setFieldValidity("updated",!0))},setSummary:function(t,e,n){if(e){if(n.summary&&n.summary.value&&null!==n.summary.value){this._toLoad||(this._toLoad=[]),this.entrySummarySelect.value=n.summary.type;var i=this._createEditor(t,n.summary,!0,"html"===n.summary.type||"xhtml"===n.summary.type);i.name="summary",this._toLoad.push(i),this.setFieldValidity("summaryedit",!0),this.setFieldValidity("summary",!0)}}else w.superclass.setSummary.call(this,t,e,n),n.summary&&n.summary.value&&null!==n.summary.value&&this.setFieldValidity("summary",!0)},setContent:function(t,e,n){if(e){if(n.content&&n.content.value&&null!==n.content.value){this._toLoad||(this._toLoad=[]),this.entryContentSelect.value=n.content.type;var i=this._createEditor(t,n.content,!0,"html"===n.content.type||"xhtml"===n.content.type);i.name="content",this._toLoad.push(i),this.setFieldValidity("contentedit",!0),this.setFieldValidity("content",!0)}}else w.superclass.setContent.call(this,t,e,n),n.content&&n.content.value&&null!==n.content.value&&this.setFieldValidity("content",!0)},_createEditor:function(t,e,n,i){var o,r;if(!e)return i?{anchorNode:t,entryValue:"",editor:null,generateEditor:function(){var t=document.createElement("div");t.innerHTML=this.entryValue,this.anchorNode.appendChild(t);var e=new u({},t);return this.editor=e,e}}:(n?(o=document.createElement("textarea"),t.appendChild(o),a.set(o,"width","90%"),r=new p({},o)):(o=document.createElement("input"),t.appendChild(o),a.set(o,"width","95%"),r=new y({},o)),r.attr("value",""),r);var d;return d=void 0!==e.value?e.value:e.attr?e.attr("value"):e,i?(-1!=d.indexOf("<")&&(d=d.replace(/</g,"&lt;")),{anchorNode:t,entryValue:d,editor:null,generateEditor:function(){var t=document.createElement("div");t.innerHTML=this.entryValue,this.anchorNode.appendChild(t);var e=new u({},t);return this.editor=e,e}}):(n?(o=document.createElement("textarea"),t.appendChild(o),a.set(o,"width","90%"),r=new p({},o)):(o=document.createElement("input"),t.appendChild(o),a.set(o,"width","95%"),r=new y({},o)),r.attr("value",d),r)},_switchEditor:function(t){var n=null,i=null,o=null;i=r("ie")?t.srcElement:t.target,i===this.entryTitleSelect?(o=this.entryTitleNode,n="title"):i===this.entrySummarySelect?(o=this.entrySummaryNode,n="summary"):(o=this.entryContentNode,n="content");var d,a,l=this._editors[n];if("text"===i.value){if(l.isInstanceOf(u)){for(a=l.attr("value",!1),l.close(!1,!0),l.destroy();o.firstChild;)s.destroy(o.firstChild);d=this._createEditor(o,{value:a},!0,!1),this._editors[n]=d}}else if(!l.isInstanceOf(u)){for(a=l.attr("value"),l.destroy();o.firstChild;)s.destroy(o.firstChild);d=this._createEditor(o,{value:a},!0,!0),d=e.hitch(d,d.generateEditor)(),this._editors[n]=d}},_createPeopleEditor:function(t,e){var n=document.createElement("div");return t.appendChild(n),new g(e,n)},saveEdits:function(){a.set(this.entrySaveCancelButtons,"display","none"),a.set(this.entryEditButton,"display",""),a.set(this.entryNewButton,"display","");var e,n,i,o,r,d,s=!1;if(this._new){this._new=!1,o=new E.Entry,e=this._editors.title.attr("value"),"xhtml"===this.entryTitleSelect.value&&(e=this._enforceXhtml(e),e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>"),o.setTitle(e,this.entryTitleSelect.value),o.id=this._editors.id.attr("value"),r=this._editors.authors.getValues();for(n in r)(r[n].name||r[n].email||r[n].uri)&&o.addAuthor(r[n].name,r[n].email,r[n].uri);d=this._editors.contributors.getValues();for(n in d)(d[n].name||d[n].email||d[n].uri)&&o.addContributor(d[n].name,d[n].email,d[n].uri);e=this._editors.summary.attr("value"),"xhtml"===this.entrySummarySelect.value&&(e=this._enforceXhtml(e),e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>"),o.summary=new E.Content("summary",e,null,this.entrySummarySelect.value),e=this._editors.content.attr("value"),"xhtml"===this.entryContentSelect.value&&(e=this._enforceXhtml(e),e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>"),o.content=new E.Content("content",e,null,this.entryContentSelect.value),a.set(this.entryNewButton,"display",""),t.publish(this.entrySelectionTopic,[{action:"post",source:this,entry:o}])}else{if(o=this.getEntry(),!this._editors.title||this._editors.title.attr("value")==o.title.value&&this.entryTitleSelect.value==o.title.type||(e=this._editors.title.attr("value"),"xhtml"===this.entryTitleSelect.value&&(e=this._enforceXhtml(e),0!==e.indexOf('<div xmlns="http://www.w3.org/1999/xhtml">')&&(e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>")),o.title=new E.Content("title",e,null,this.entryTitleSelect.value),s=!0),this._editors.id.attr("value")!=o.id&&(o.id=this._editors.id.attr("value"),s=!0),!this._editors.summary||this._editors.summary.attr("value")==o.summary.value&&this.entrySummarySelect.value==o.summary.type||(e=this._editors.summary.attr("value"),"xhtml"===this.entrySummarySelect.value&&(e=this._enforceXhtml(e),0!==e.indexOf('<div xmlns="http://www.w3.org/1999/xhtml">')&&(e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>")),o.summary=new E.Content("summary",e,null,this.entrySummarySelect.value),s=!0),!this._editors.content||this._editors.content.attr("value")==o.content.value&&this.entryContentSelect.value==o.content.type||(e=this._editors.content.attr("value"),"xhtml"===this.entryContentSelect.value&&(e=this._enforceXhtml(e),0!==e.indexOf('<div xmlns="http://www.w3.org/1999/xhtml">')&&(e='<div xmlns="http://www.w3.org/1999/xhtml">'+e+"</div>")),o.content=new E.Content("content",e,null,this.entryContentSelect.value),s=!0),this._editors.authors)if(s){o.authors=[],r=this._editors.authors.getValues();for(n in r)(r[n].name||r[n].email||r[n].uri)&&o.addAuthor(r[n].name,r[n].email,r[n].uri)}else{var l=o.authors,h=function(t,e,i){for(n in l)if(l[n].name===t&&l[n].email===e&&l[n].uri===i)return!0;return!1};r=this._editors.authors.getValues(),i=!1;for(n in r)if(!h(r[n].name,r[n].email,r[n].uri)){i=!0;break}if(i){o.authors=[];for(n in r)(r[n].name||r[n].email||r[n].uri)&&o.addAuthor(r[n].name,r[n].email,r[n].uri);s=!0}}if(this._editors.contributors)if(s){o.contributors=[],d=this._editors.contributors.getValues();for(n in d)(d[n].name||d[n].email||d[n].uri)&&o.addAuthor(d[n].name,d[n].email,d[n].uri)}else{var c=o.contributors,u=function(t,e,i){for(n in c)if(c[n].name===t&&c[n].email===e&&c[n].uri===i)return!0;return!1};d=this._editors.contributors.getValues(),i=!1;for(n in d)if(u(d[n].name,d[n].email,d[n].uri)){i=!0;break}if(i){o.contributors=[];for(n in d)(d[n].name||d[n].email||d[n].uri)&&o.addContributor(d[n].name,d[n].email,d[n].uri);s=!0}}s&&t.publish(this.entrySelectionTopic,[{action:"update",source:this,entry:o,callback:this._handleSave}])}this._editMode=!1,this.setEntry(o,this._feed,!0)},_handleSave:function(t,e){this._editMode=!1,this.clear(),this.setEntry(t,this.getFeed(),!0)},cancelEdits:function(){this._new=!1,a.set(this.entrySaveCancelButtons,"display","none"),this._editable&&a.set(this.entryEditButton,"display",""),a.set(this.entryNewButton,"display",""),this._editMode=!1,this.clearEditors(),this.setEntry(this.getEntry(),this.getFeed(),!0)},clear:function(){this._editable=!1,this.clearEditors(),w.superclass.clear.apply(this),this._contentEditor&&(this._contentEditor=this._setObject=this._oldContent=this._contentEditorCreator=null,this._editors={})},clearEditors:function(){for(var t in this._editors)this._editors[t].isInstanceOf(u)&&this._editors[t].close(!1,!0),this._editors[t].destroy();this._editors={}},_enforceXhtml:function(t){var e=null;if(t){var n=/<br>/g;e=t.replace(n,"<br/>"),e=this._closeTag(e,"hr"),e=this._closeTag(e,"img")}return e},_closeTag:function(t,e){var n="<"+e,i=t.indexOf(n);if(-1!==i)for(;-1!==i;){for(var o="",r=!1,d=0;d<t.length;d++){var a=t.charAt(d);i>=d||r?o+=a:(">"===a&&(o+="/",r=!0),o+=a)}t=o,i=t.indexOf(n,i+1)}return t},_toggleNew:function(){a.set(this.entryNewButton,"display","none"),a.set(this.entryEditButton,"display","none"),a.set(this.entrySaveCancelButtons,"display",""),this.entrySummarySelect.value="text",this.entryContentSelect.value="text",this.entryTitleSelect.value="text",this.clearNodes(),this._new=!0;var t=f,e=new m.EntryHeader({title:t.title});this.entryTitleHeader.appendChild(e.domNode),this._editors.title=this._createEditor(this.entryTitleNode,null),this.setFieldValidity("title",!0);var n=new m.EntryHeader({title:t.authors});this.entryAuthorHeader.appendChild(n.domNode),this._editors.authors=this._createPeopleEditor(this.entryAuthorNode,{name:"Author"}),this.setFieldValidity("authors",!0);var i=new m.EntryHeader({title:t.contributors});this.entryContributorHeader.appendChild(i.domNode),this._editors.contributors=this._createPeopleEditor(this.entryContributorNode,{name:"Contributor"}),this.setFieldValidity("contributors",!0);var o=new m.EntryHeader({title:t.id});this.entryIdHeader.appendChild(o.domNode),this._editors.id=this._createEditor(this.entryIdNode,null),this.setFieldValidity("id",!0);var r=new m.EntryHeader({title:t.updated});this.entryUpdatedHeader.appendChild(r.domNode),this._editors.updated=this._createEditor(this.entryUpdatedNode,null),this.setFieldValidity("updated",!0);var d=new m.EntryHeader({title:t.summary});this.entrySummaryHeader.appendChild(d.domNode),this._editors.summary=this._createEditor(this.entrySummaryNode,null,!0),this.setFieldValidity("summaryedit",!0),this.setFieldValidity("summary",!0);var s=new m.EntryHeader({title:t.content});this.entryContentHeader.appendChild(s.domNode),this._editors.content=this._createEditor(this.entryContentNode,null,!0),this.setFieldValidity("contentedit",!0),this.setFieldValidity("content",!0),this._displaySections()},_displaySections:function(){if(a.set(this.entrySummarySelect,"display","none"),a.set(this.entryContentSelect,"display","none"),a.set(this.entryTitleSelect,"display","none"),this.isFieldValid("contentedit")&&a.set(this.entryContentSelect,"display",""),this.isFieldValid("summaryedit")&&a.set(this.entrySummarySelect,"display",""),this.isFieldValid("titleedit")&&a.set(this.entryTitleSelect,"display",""),w.superclass._displaySections.apply(this),this._toLoad){for(var t in this._toLoad){var n;n=this._toLoad[t].generateEditor?e.hitch(this._toLoad[t],this._toLoad[t].generateEditor)():this._toLoad[t],this._editors[this._toLoad[t].name]=n,this._toLoad[t]=null}this._toLoad=null}}}),g=i("dojox.atom.widget.PeopleEditor",[l,h,c],{templateString:v,_rows:[],_editors:[],_index:0,_numRows:0,postCreate:function(){var t=C;if(this.name?"Author"==this.name?this.peopleEditorButton.appendChild(document.createTextNode("["+t.addAuthor+"]")):"Contributor"==this.name&&this.peopleEditorButton.appendChild(document.createTextNode("["+t.addContributor+"]")):this.peopleEditorButton.appendChild(document.createTextNode("["+t.add+"]")),this._editors=[],this.data&&0!==this.data.length)for(var e in this.data)this._createEditors(this.data[e].name,this.data[e].email,this.data[e].uri,e),this._index++,this._numRows++;else this._createEditors(null,null,null,0,this.name),this._index=1},destroy:function(){for(var t in this._editors)for(var e in this._editors[t])this._editors[t][e].destroy();this._editors=[]},_createEditors:function(t,e,i,o,r){var d=document.createElement("tr");this.peopleEditorEditors.appendChild(d),d.id="removeRow"+o;var s=document.createElement("td");if(s.setAttribute("align","right"),d.appendChild(s),s.colSpan=2,this._numRows>0){var l=document.createElement("hr");s.appendChild(l),l.id="hr"+o}d=document.createElement("span"),s.appendChild(d),d.className="peopleEditorButton",a.set(d,"font-size","x-small"),n.connect(d,"onclick",this,"_removeEditor"),d.id="remove"+o,s=document.createTextNode("[X]"),d.appendChild(s),d=document.createElement("tr"),this.peopleEditorEditors.appendChild(d),d.id="editorsRow"+o;var h=document.createElement("td");d.appendChild(h),a.set(h,"width","20%"),s=document.createElement("td"),d.appendChild(s),d=document.createElement("table"),h.appendChild(d),a.set(d,"width","100%"),h=document.createElement("tbody"),d.appendChild(h),d=document.createElement("table"),s.appendChild(d),a.set(d,"width","100%"),s=document.createElement("tbody"),d.appendChild(s),this._editors[o]=[],this._editors[o].push(this._createEditor(t,r+"name"+o,"Name:",h,s)),this._editors[o].push(this._createEditor(e,r+"email"+o,"Email:",h,s)),this._editors[o].push(this._createEditor(i,r+"uri"+o,"URI:",h,s))},_createEditor:function(t,e,n,i,o){var r=document.createElement("tr");i.appendChild(r);var d=document.createElement("label");d.setAttribute("for",e),d.appendChild(document.createTextNode(n)),i=document.createElement("td"),i.appendChild(d),r.appendChild(i),r=document.createElement("tr"),o.appendChild(r),o=document.createElement("td"),r.appendChild(o);var s=document.createElement("input");s.setAttribute("id",e),o.appendChild(s),a.set(s,"width","95%");var l=new y({},s);return l.attr("value",t),l},_removeEditor:function(t){var e=null;e=r("ie")?t.srcElement:t.target;var n=e.id;n=n.substring(6);for(var i in this._editors[n])this._editors[n][i].destroy();var o=d.byId("editorsRow"+n),a=o.parentNode;a.removeChild(o),o=d.byId("removeRow"+n),a=o.parentNode,a.removeChild(o),this._numRows--,1===this._numRows&&"hr"===a.firstChild.firstChild.firstChild.tagName.toLowerCase()&&(o=a.firstChild.firstChild,o.removeChild(o.firstChild)),this._editors[n]=null},_add:function(){this._createEditors(null,null,null,this._index),this._index++,this._numRows++},getValues:function(){var t=[];for(var e in this._editors)this._editors[e]&&t.push({name:this._editors[e][0].attr("value"),email:this._editors[e][1].attr("value"),uri:this._editors[e][2].attr("value")});return t}});return w});
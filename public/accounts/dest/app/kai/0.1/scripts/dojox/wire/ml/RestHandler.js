define("dojox/wire/ml/RestHandler",["dojo","dijit","dojox","dojo/require!dojox/wire/_base,dojox/wire/ml/util"],function(e,t,n){e.provide("dojox.wire.ml.RestHandler"),e.require("dojox.wire._base"),e.require("dojox.wire.ml.util"),e.declare("dojox.wire.ml.RestHandler",null,{contentType:"text/plain",handleAs:"text",bind:function(t,n,r,o){t=t.toUpperCase();var i=this,l={url:this._getUrl(t,n,o),contentType:this.contentType,handleAs:this.handleAs,headers:this.headers,preventCache:this.preventCache},a=null;"POST"==t?(l.postData=this._getContent(t,n),a=e.rawXhrPost(l)):"PUT"==t?(l.putData=this._getContent(t,n),a=e.rawXhrPut(l)):a="DELETE"==t?e.xhrDelete(l):e.xhrGet(l),a.addCallbacks(function(e){r.callback(i._getResult(e))},function(e){r.errback(e)})},_getUrl:function(e,t,n){var r;if("GET"==e||"DELETE"==e?t.length>0&&(r=t[0]):t.length>1&&(r=t[1]),r){var o="";for(var i in r){var l=r[i];if(l){l=encodeURIComponent(l);var a="{"+i+"}",s=n.indexOf(a);s>=0?n=n.substring(0,s)+l+n.substring(s+a.length):(o&&(o+="&"),o+=i+"="+l)}}o&&(n+="?"+o)}return n},_getContent:function(e,t){return("POST"==e||"PUT"==e)&&t?t[0]:null},_getResult:function(e){return e}})});
define("dojox/form/_RangeSliderMixin",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/fx","dojo/_base/event","dojo/_base/sniff","dojo/dom-style","dojo/dom-geometry","dojo/keys","dijit","dojo/dnd/Mover","dojo/dnd/Moveable","dijit/form/_FormValueWidget","dijit/focus","dojo/fx","dojox/fx"],function(e,i,t,s,a,r,o,l,n,u,d,h,_,m,p){var x=function(e,i){return i-e},v=function(e,i){return e-i},f=e("dojox.form._RangeSliderMixin",null,{_setTabIndexAttr:["sliderHandle","sliderHandleMax"],value:[0,100],postMixInProperties:function(){this.inherited(arguments),this.value=t.map(this.value,function(e){return parseInt(e,10)})},postCreate:function(){this.inherited(arguments),this.value.sort(this._isReversed()?x:v);var i=this,t=e(g,{constructor:function(){this.widget=i}});this._movableMax=new h(this.sliderHandleMax,{mover:t}),this.sliderHandle.setAttribute("aria-valuemin",this.minimum),this.sliderHandle.setAttribute("aria-valuemax",this.maximum),this.sliderHandleMax.setAttribute("aria-valuemin",this.minimum),this.sliderHandleMax.setAttribute("aria-valuemax",this.maximum);var s=e(c,{constructor:function(){this.widget=i}});this._movableBar=new h(this.progressBar,{mover:s}),this.focusNode.removeAttribute("aria-valuemin"),this.focusNode.removeAttribute("aria-valuemax"),this.focusNode.removeAttribute("aria-valuenow")},destroy:function(){this.inherited(arguments),this._movableMax.destroy(),this._movableBar.destroy()},_onKeyPress:function(e){if(!(this.disabled||this.readOnly||e.altKey||e.ctrlKey)){var t=e.target===this.sliderHandleMax,s=e.target===this.progressBar,r=i.delegate(n,this.isLeftToRight()?{PREV_ARROW:n.LEFT_ARROW,NEXT_ARROW:n.RIGHT_ARROW}:{PREV_ARROW:n.RIGHT_ARROW,NEXT_ARROW:n.LEFT_ARROW}),o=0,l=!1;switch(e.keyCode){case r.HOME:return this._setValueAttr(this.minimum,!0,t),void a.stop(e);case r.END:return this._setValueAttr(this.maximum,!0,t),void a.stop(e);case r.PREV_ARROW:case r.DOWN_ARROW:l=!0;case r.NEXT_ARROW:case r.UP_ARROW:o=1;break;case r.PAGE_DOWN:l=!0;case r.PAGE_UP:o=this.pageIncrement;break;default:return void this.inherited(arguments)}l&&(o=-o),o&&(s?this._bumpValue([{change:o,useMaxValue:!1},{change:o,useMaxValue:!0}]):this._bumpValue(o,t),a.stop(e))}},_onHandleClickMax:function(e){this.disabled||this.readOnly||(r("ie")||m.focus(this.sliderHandleMax),a.stop(e))},_onClkIncBumper:function(){this._setValueAttr(this._descending===!1?this.minimum:this.maximum,!0,!0)},_bumpValue:function(e,t){var s=i.isArray(e)?[this._getBumpValue(e[0].change,e[0].useMaxValue),this._getBumpValue(e[1].change,e[1].useMaxValue)]:this._getBumpValue(e,t);this._setValueAttr(s,!0,t)},_getBumpValue:function(e,i){var t=i?1:0;this._isReversed()&&(t=1-t);var s=o.getComputedStyle(this.sliderBarContainer),a=l.getContentBox(this.sliderBarContainer,s),r=this.discreteValues,n=this.value[t];(1>=r||r==1/0)&&(r=a[this._pixelCount]),r--;var u=this.maximum>this.minimum?(n-this.minimum)*r/(this.maximum-this.minimum)+e:0;return 0>u&&(u=0),u>r&&(u=r),u*(this.maximum-this.minimum)/r+this.minimum},_onBarClick:function(e){this.disabled||this.readOnly||(r("ie")||m.focus(this.progressBar),a.stop(e))},_onRemainingBarClick:function(e){if(!this.disabled&&!this.readOnly){r("ie")||m.focus(this.progressBar);var i=l.position(this.sliderBarContainer,!0),t=l.position(this.progressBar,!0),s=e[this._mousePixelCoord],o=t[this._startingPixelCoord],n=o+t[this._pixelCount],u=this._isReversed()?o>=s:s>=n,d=this._isReversed()?i[this._pixelCount]-s+i[this._startingPixelCoord]:s-i[this._startingPixelCoord];this._setPixelValue(d,i[this._pixelCount],!0,u),a.stop(e)}},_setPixelValue:function(e,i,t,s){if(!this.disabled&&!this.readOnly){var a=this._getValueByPixelValue(e,i);this._setValueAttr(a,t,s)}},_getValueByPixelValue:function(e,i){e=0>e?0:e>i?i:e;var t=this.discreteValues;(1>=t||t==1/0)&&(t=i),t--;var s=i/t,a=Math.round(e/s);return(this.maximum-this.minimum)*a/t+this.minimum},_setValueAttr:function(e,t,s){var a=this.value;i.isArray(e)?a=e:s?this._isReversed()?a[0]=e:a[1]=e:this._isReversed()?a[1]=e:a[0]=e,this._lastValueReported="",this.valueNode.value=this.value=e=a,this.value.sort(this._isReversed()?x:v),this.sliderHandle.setAttribute("aria-valuenow",a[0]),this.sliderHandleMax.setAttribute("aria-valuenow",a[1]),_.prototype._setValueAttr.apply(this,arguments),this._printSliderBar(t,s)},_printSliderBar:function(e,i){var t=this.maximum>this.minimum?(this.value[0]-this.minimum)/(this.maximum-this.minimum):0,a=this.maximum>this.minimum?(this.value[1]-this.minimum)/(this.maximum-this.minimum):0,r=t;t>a&&(t=a,a=r);var o=this._isReversed()?100*(1-t):100*t,l=this._isReversed()?100*(1-a):100*a,n=this._isReversed()?100*(1-a):100*t;if(e&&this.slideDuration>0&&this.progressBar.style[this._progressPixelSize]){var u=(parseFloat(this.progressBar.style[this._handleOffsetCoord]),this.slideDuration/10);if(0===u)return;0>u&&(u=0-u);var d={},h={},_={};d[this._handleOffsetCoord]={start:this.sliderHandle.parentNode.style[this._handleOffsetCoord],end:o,units:"%"},h[this._handleOffsetCoord]={start:this.sliderHandleMax.parentNode.style[this._handleOffsetCoord],end:l,units:"%"},_[this._handleOffsetCoord]={start:this.progressBar.style[this._handleOffsetCoord],end:n,units:"%"},_[this._progressPixelSize]={start:this.progressBar.style[this._progressPixelSize],end:100*(a-t),units:"%"};var m=s.animateProperty({node:this.sliderHandle.parentNode,duration:u,properties:d}),x=s.animateProperty({node:this.sliderHandleMax.parentNode,duration:u,properties:h}),v=s.animateProperty({node:this.progressBar,duration:u,properties:_}),f=p.combine([m,x,v]);f.play()}else this.sliderHandle.parentNode.style[this._handleOffsetCoord]=o+"%",this.sliderHandleMax.parentNode.style[this._handleOffsetCoord]=l+"%",this.progressBar.style[this._handleOffsetCoord]=n+"%",this.progressBar.style[this._progressPixelSize]=100*(a-t)+"%"}}),g=e("dijit.form._SliderMoverMax",d,{onMouseMove:function(e){var t=this.widget,s=t._abspos;s||(s=t._abspos=l.position(t.sliderBarContainer,!0),t._setPixelValue_=i.hitch(t,"_setPixelValue"),t._isReversed_=t._isReversed());var a=e[t._mousePixelCoord]-s[t._startingPixelCoord];t._setPixelValue_(t._isReversed_?s[t._pixelCount]-a:a,s[t._pixelCount],!1,!0)},destroy:function(e){d.prototype.destroy.apply(this,arguments);var i=this.widget;i._abspos=null,i._setValueAttr(i.value,!0)}}),c=e("dijit.form._SliderBarMover",d,{onMouseMove:function(e){var t=this.widget;if(!t.disabled&&!t.readOnly){var s=t._abspos,a=t._bar,r=t._mouseOffset;s||(s=t._abspos=l.position(t.sliderBarContainer,!0),t._setPixelValue_=i.hitch(t,"_setPixelValue"),t._getValueByPixelValue_=i.hitch(t,"_getValueByPixelValue"),t._isReversed_=t._isReversed()),a||(a=t._bar=l.position(t.progressBar,!0)),r||(r=t._mouseOffset=e[t._mousePixelCoord]-a[t._startingPixelCoord]);var o=e[t._mousePixelCoord]-s[t._startingPixelCoord]-r,n=o+a[t._pixelCount];pixelValues=[o,n],pixelValues.sort(v),pixelValues[0]<=0&&(pixelValues[0]=0,pixelValues[1]=a[t._pixelCount]),pixelValues[1]>=s[t._pixelCount]&&(pixelValues[1]=s[t._pixelCount],pixelValues[0]=s[t._pixelCount]-a[t._pixelCount]);var u=[t._getValueByPixelValue(t._isReversed_?s[t._pixelCount]-pixelValues[0]:pixelValues[0],s[t._pixelCount]),t._getValueByPixelValue(t._isReversed_?s[t._pixelCount]-pixelValues[1]:pixelValues[1],s[t._pixelCount])];t._setValueAttr(u,!1,!1)}},destroy:function(){d.prototype.destroy.apply(this,arguments);var e=this.widget;e._abspos=null,e._bar=null,e._mouseOffset=null,e._setValueAttr(e.value,!0)}});return f});
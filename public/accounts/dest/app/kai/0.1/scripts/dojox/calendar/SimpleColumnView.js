require({cache:{"url:dojox/calendar/templates/ColumnView.html":'<div data-dojo-attach-events="keydown:_onKeyDown">\n	\n	<div data-dojo-attach-point="header" class="dojoxCalendarHeader">\n		<div class="dojoxCalendarYearColumnHeader" data-dojo-attach-point="yearColumnHeader">\n			<table cellspacing="0" cellpadding="0"><tr><td><span data-dojo-attach-point="yearColumnHeaderContent"></span></td></tr></table>		\n		</div>\n		<div data-dojo-attach-point="columnHeader" class="dojoxCalendarColumnHeader">\n			<table data-dojo-attach-point="columnHeaderTable" class="dojoxCalendarColumnHeaderTable" cellpadding="0" cellspacing="0"></table>\n		</div>\n	</div>\n	\n	<div data-dojo-attach-point="secondarySheetNode"></div>\n	\n	<div data-dojo-attach-point="subHeader" class="dojoxCalendarSubHeader">\n		<div class="dojoxCalendarSubRowHeader">\n			<table cellspacing="0" cellpadding="0"><tr><td></td></tr></table>		\n		</div>\n		<div data-dojo-attach-point="subColumnHeader" class="dojoxCalendarSubColumnHeader">\n			<table data-dojo-attach-point="subColumnHeaderTable" class="dojoxCalendarSubColumnHeaderTable" cellpadding="0" cellspacing="0"></table>\n		</div>\n	</div>\n	\n	<div data-dojo-attach-point="scrollContainer" class="dojoxCalendarScrollContainer">\n		<div data-dojo-attach-point="sheetContainer" style="position:relative;left:0;right:0;margin:0;padding:0">\n			<div data-dojo-attach-point="rowHeader" class="dojoxCalendarRowHeader">\n				<table data-dojo-attach-point="rowHeaderTable" class="dojoxCalendarRowHeaderTable" cellpadding="0" cellspacing="0"></table>\n			</div>\n			<div data-dojo-attach-point="grid" class="dojoxCalendarGrid">\n				<table data-dojo-attach-point="gridTable" class="dojoxCalendarGridTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n			</div>\n			<div data-dojo-attach-point="itemContainer" class="dojoxCalendarContainer" data-dojo-attach-event="mousedown:_onGridMouseDown,mouseup:_onGridMouseUp,ondblclick:_onGridDoubleClick,touchstart:_onGridTouchStart,touchmove:_onGridTouchMove,touchend:_onGridTouchEnd">\n				<table data-dojo-attach-point="itemContainerTable" class="dojoxCalendarContainerTable" cellpadding="0" cellspacing="0" style="width:100%"></table>\n			</div>\n		</div> \n	</div>\n	\n	<div data-dojo-attach-point="vScrollBar" class="dojoxCalendarVScrollBar">\n		<div data-dojo-attach-point="vScrollBarContent" style="visibility:hidden;position:relative;width:1px;height:1px;" ></div>\n	</div>\n	\n	<div data-dojo-attach-point="hScrollBar" class="dojoxCalendarHScrollBar">\n		<div data-dojo-attach-point="hScrollBarContent" style="visibility:hidden;position:relative;width:1px;height:1px;" ></div>\n	</div>\n	\n</div>\n'}}),define("dojox/calendar/SimpleColumnView",["./ViewBase","dijit/_TemplatedMixin","./_ScrollBarBase","dojo/text!./templates/ColumnView.html","dojo/_base/declare","dojo/_base/event","dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/fx","dojo/_base/html","dojo/on","dojo/dom","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/dom-construct","dojo/mouse","dojo/query","dojox/html/metrics"],function(t,e,i,o,r,a,n,s,l,d,h,u,c,m,C,f,v,g,b,_){return r("dojox.calendar.SimpleColumnView",[t,e],{baseClass:"dojoxCalendarColumnView",templateString:o,viewKind:"columns",_setTabIndexAttr:"domNode",renderData:null,startDate:null,columnCount:7,subColumns:null,minHours:8,maxHours:18,hourSize:100,timeSlotDuration:15,rowHeaderGridSlotDuration:60,rowHeaderLabelSlotDuration:60,rowHeaderLabelOffset:2,rowHeaderFirstLabelOffset:2,verticalRenderer:null,verticalDecorationRenderer:null,minColumnWidth:-1,percentOverlap:70,horizontalGap:4,_showSecondarySheet:!1,_columnHeaderHandlers:null,constructor:function(){this.invalidatingProperties=["columnCount","startDate","minHours","maxHours","hourSize","verticalRenderer","verticalDecorationRenderer","rowHeaderTimePattern","columnHeaderDatePattern","timeSlotDuration","rowHeaderGridSlotDuration","rowHeaderLabelSlotDuration","rowHeaderLabelOffset","rowHeaderFirstLabelOffset","percentOverlap","horizontalGap","scrollBarRTLPosition","itemToRendererKindFunc","layoutPriorityFunction","formatItemTimeFunc","textDir","items","subColumns","minColumnWidth"],this._columnHeaderHandlers=[]},destroy:function(t){this._cleanupColumnHeader(),this.scrollBar&&this.scrollBar.destroy(t),this.inherited(arguments)},_scrollBar_onScroll:function(t){this._setScrollPosition(t)},_hscrollBar_onScroll:function(t){this._setHScrollPosition(t)},buildRendering:function(){this.inherited(arguments),this.vScrollBar&&(this.scrollBar=new i({content:this.vScrollBarContent},this.vScrollBar),this.scrollBar.on("scroll",n.hitch(this,this._scrollBar_onScroll))),this.hScrollBar&&(this.hScrollBarW=new i({content:this.hScrollBarContent,direction:"horizontal",value:0},this.hScrollBar),this.hScrollBarW.on("scroll",n.hitch(this,this._hscrollBar_onScroll)),this._hScrollNodes=[this.columnHeaderTable,this.subColumnHeaderTable,this.gridTable,this.itemContainerTable]),this._viewHandles.push(u(this.scrollContainer,g.wheel,dojo.hitch(this,this._mouseWheelScrollHander)))},postscript:function(){this.inherited(arguments),this._initialized=!0,this.invalidRendering||this.refreshRendering()},_setVerticalRendererAttr:function(t){this._destroyRenderersByKind("vertical"),this._set("verticalRenderer",t)},_createRenderData:function(){var t={};t.minHours=this.get("minHours"),t.maxHours=this.get("maxHours"),t.hourSize=this.get("hourSize"),t.hourCount=t.maxHours-t.minHours,t.slotDuration=this.get("timeSlotDuration"),t.rowHeaderGridSlotDuration=this.get("rowHeaderGridSlotDuration"),t.slotSize=Math.ceil(t.hourSize/(60/t.slotDuration)),t.hourSize=t.slotSize*(60/t.slotDuration),t.sheetHeight=t.hourSize*t.hourCount,this._rowHeaderWidth||(this._rowHeaderWidth=f.getMarginBox(this.rowHeader).w),t.rowHeaderWidth=this._rowHeaderWidth;var e=_.getScrollbar();t.scrollbarWidth=e.w+1,t.scrollbarHeight=e.h+1,t.dateLocaleModule=this.dateLocaleModule,t.dateClassObj=this.dateClassObj,t.dateModule=this.dateModule,t.dates=[],t.columnCount=this.get("columnCount"),t.subColumns=this.get("subColumns"),t.subColumnCount=t.subColumns?t.subColumns.length:1,t.hScrollPaneWidth=f.getMarginBox(this.grid).w,t.minSheetWidth=this.minColumnWidth<0?-1:this.minColumnWidth*t.subColumnCount*t.columnCount,t.hScrollBarEnabled=this.minColumnWidth>0&&t.hScrollPaneWidth<t.minSheetWidth;var i=this.get("startDate");null==i&&(i=new t.dateClassObj),i=this.floorToDay(i,!1,t),this.startDate=i;for(var o=0;o<t.columnCount;o++)t.dates.push(i),i=this.addAndFloor(i,"day",1);return t.startTime=new t.dateClassObj(t.dates[0]),t.startTime.setHours(t.minHours),t.endTime=new t.dateClassObj(t.dates[t.columnCount-1]),t.endTime.setHours(t.maxHours),this.displayedItemsInvalidated&&!this._isEditing?t.items=this.storeManager._computeVisibleItems(t):this.renderData&&(t.items=this.renderData.items),this.displayedDecorationItemsInvalidated?t.decorationItems=this.decorationStoreManager._computeVisibleItems(t):this.renderData&&(t.decorationItems=this.renderData.decorationItems),t},_validateProperties:function(){this.inherited(arguments);var t=this.minHours;if((0>t||t>23||isNaN(t))&&(this.minHours=0),t=this.maxHours,(1>t||t>36||isNaN(t))&&(this.minHours=36),this.minHours>this.maxHours){var e=this.maxHours;this.maxHours=this.minHours,this.minHours=e}this.maxHours-this.minHours<1&&(this.minHours=0,this.maxHours=24),(this.columnCount<1||isNaN(this.columnCount))&&(this.columnCount=1),t=this.percentOverlap,(0>t||t>100||isNaN(t))&&(this.percentOverlap=70),(this.hourSize<5||isNaN(this.hourSize))&&(this.hourSize=10),t=this.timeSlotDuration,(1>t||t>60||isNaN(t))&&(this.timeSlotDuration=15)},_setStartDateAttr:function(t){this.displayedItemsInvalidated=!0,this._set("startDate",t)},_setColumnCountAttr:function(t){this.displayedItemsInvalidated=!0,this._set("columnCount",t)},__fixEvt:function(t){return t.sheet="primary",t.source=this,t},rowHeaderTimePattern:null,_formatRowHeaderLabel:function(t){return this.renderData.dateLocaleModule.format(t,{selector:"time",timePattern:this.rowHeaderTimePattern})},columnHeaderDatePattern:null,_formatColumnHeaderLabel:function(t){return this.renderData.dateLocaleModule.format(t,{selector:"date",datePattern:this.columnHeaderDatePattern,formatLength:"medium"})},scrollBarRTLPosition:"left",_getStartTimeOfDay:function(){var t=(this.get("maxHours")-this.get("minHours"))*this._getScrollPosition()/this.renderData.sheetHeight;return{hours:this.renderData.minHours+Math.floor(t),minutes:60*(t-Math.floor(t))}},_getEndTimeOfDay:function(){var t=(this.get("maxHours")-this.get("minHours"))*(this._getScrollPosition()+this.scrollContainer.offsetHeight)/this.renderData.sheetHeight;return{hours:this.renderData.minHours+Math.floor(t),minutes:60*(t-Math.floor(t))}},startTimeOfDay:0,_setStartTimeOfDayAttr:function(t){this.renderData?this._setStartTimeOfDay(t.hours,t.minutes,t.duration,t.easing):this._startTimeOfDayInvalidated=!0,this._set("startTimeOfDay",t)},_getStartTimeOfDayAttr:function(){return this.renderData?this._getStartTimeOfDay():this._get("startTimeOfDay")},_setStartTimeOfDay:function(t,e,i,o){var r=this.renderData;t=t||r.minHours,e=e||0,i=i||0,0>e?e=0:e>59&&(e=59),0>t?t=0:t>r.maxHours&&(t=r.maxHours);var a=60*t+e,n=60*r.minHours,s=60*r.maxHours;n>a?a=n:a>s&&(a=s);var l=(a-n)*r.sheetHeight/(s-n);l=Math.min(r.sheetHeight-this.scrollContainer.offsetHeight,l),this._scrollToPosition(l,i,o)},_scrollToPosition:function(t,e,i){if(e){this._scrollAnimation&&this._scrollAnimation.stop();var o=this._getScrollPosition(),r=Math.abs((t-o)*e/this.renderData.sheetHeight);this._scrollAnimation=new d.Animation({curve:[o,t],duration:r,easing:i,onAnimate:n.hitch(this,function(t){this._setScrollImpl(t)})}),this._scrollAnimation.play()}else this._setScrollImpl(t)},_setScrollImpl:function(t){this._setScrollPosition(t),this.scrollBar&&this.scrollBar.set("value",t)},ensureVisibility:function(t,e,i,o,r){if(o=void 0==o?this.renderData.slotDuration:o,this.scrollable&&this.autoScroll){var a=60*t.getHours()+t.getMinutes()-o,n=60*e.getHours()+e.getMinutes()+o,s=this._getStartTimeOfDay(),l=this._getEndTimeOfDay(),d=60*s.hours+s.minutes,h=60*l.hours+l.minutes,u=!1,c=null;switch(i){case"start":u=a>=d&&h>=a,c=a;break;case"end":u=n>=d&&h>=n,c=n-(h-d);break;case"both":u=a>=d&&h>=n,c=a}u||this._setStartTimeOfDay(Math.floor(c/60),c%60,r)}},scrollView:function(t){var e=this._getStartTimeOfDay();e=60*e.hours+e.minutes+t*this.timeSlotDuration,this._setStartTimeOfDay(Math.floor(e/60),e%60)},scrollViewHorizontal:function(t){this._setHScrollPosition(this._getHScrollPosition()+t*this.minColumnWidth),this.hScrollBarW&&this.hScrollBarW.set("value",this._getHScrollPosition())},_hScrollNodes:null,_setHScrollPositionImpl:function(t,e,i){var o=[this.columnHeaderTable,this.subColumnHeaderTable,this.gridTable,this.itemContainerTable],r=e?null:"translateX(-"+t+"px)";s.forEach(o,function(o){e?(o.scrollLeft=t,C.set(o,"left",-t+"px")):C.set(o,i,r)},this)},_mouseWheelScrollHander:function(t){this.renderData.hScrollBarEnabled&&t.altKey?this.scrollViewHorizontal(t.wheelDelta>0?-1:1):this.scrollView(t.wheelDelta>0?-1:1),a.stop(t)},refreshRendering:function(){if(this._initialized){this._validateProperties();var t=this.renderData,e=this._createRenderData();this.renderData=e,this._createRendering(e,t),this._layoutDecorationRenderers(e),this._layoutRenderers(e)}},_createRendering:function(t,e){C.set(this.sheetContainer,"height",t.sheetHeight+"px"),this._configureVisibleParts(t),this._configureScrollBar(t),this._buildColumnHeader(t,e),this._buildSubColumnHeader(t,e),this._buildRowHeader(t,e),this._buildGrid(t,e),this._buildItemContainer(t,e),this._layoutTimeIndicator(t),this._commitProperties(t)},_configureVisibleParts:function(t){this.secondarySheetNode&&C.set(this.secondarySheetNode,"display",this._showSecondarySheet?"block":"none"),m[null==this.subColumns?"remove":"add"](this.domNode,"subColumns"),m[this._showSecondarySheet?"add":"remove"](this.domNode,"secondarySheet")},_commitProperties:function(t){if(this._startTimeOfDayInvalidated){this._startTimeOfDayInvalidated=!1;var e=this.startTimeOfDay;null!=e&&this._setStartTimeOfDay(e.hours,void 0==e.minutes?0:e.minutes)}},_configureScrollBar:function(t){l("ie")&&this.scrollBar&&C.set(this.vScrollBar,"width",t.scrollbarWidth+1+"px");var e=this.isLeftToRight()?!0:"right"==this.scrollBarRTLPosition,i=e?"right":"left",o=e?"left":"right";this.scrollBar&&(this.scrollBar.set("maximum",t.sheetHeight),C.set(this.vScrollBar,i,0),C.set(this.vScrollBar,e?"left":"right","auto"),C.set(this.vScrollBar,"bottom",t.hScrollBarEnabled?t.scrollbarHeight+"px":"0")),C.set(this.scrollContainer,i,t.scrollbarWidth+"px"),C.set(this.scrollContainer,o,"0"),C.set(this.header,i,t.scrollbarWidth+"px"),C.set(this.header,o,"0"),C.set(this.subHeader,i,t.scrollbarWidth+"px"),C.set(this.subHeader,o,"0"),this.buttonContainer&&null!=this.owner&&this.owner.currentView==this&&(C.set(this.buttonContainer,i,t.scrollbarWidth+"px"),C.set(this.buttonContainer,o,"0")),this.hScrollBar&&(s.forEach(this._hScrollNodes,function(e){m[t.hScrollBarEnabled?"add":"remove"](e.parentNode,"dojoxCalendarHorizontalScroll")},this),t.hScrollBarEnabled||(this._setHScrollPosition(0),this.hScrollBarW.set("value",0)),C.set(this.hScrollBar,{display:t.hScrollBarEnabled?"block":"none",height:t.scrollbarHeight+"px",left:(e?t.rowHeaderWidth:t.scrollbarWidth)+"px",right:(e?t.scrollbarWidth:t.rowHeaderWidth)+"px"}),C.set(this.scrollContainer,"bottom",t.hScrollBarEnabled?t.scrollbarHeight+1+"px":"0"),this._configureHScrollDomNodes(t.hScrollBarEnabled?t.minSheetWidth+"px":"100%"),this.hScrollBarW.set("maximum",t.minSheetWidth),this.hScrollBarW.set("containerSize",t.hScrollPaneWidth))},_configureHScrollDomNodes:function(t){s.forEach(this._hScrollNodes,function(e){C.set(e,"width",t)},this)},resize:function(t){this._resizeHandler(t)},_resizeHandler:function(t,e){var i=this.renderData;if(null!=i)if(e){var o=f.getMarginBox(this.grid).w;i.hScrollPaneWidth!=o&&(i.hScrollPaneWidth=o,i.minSheetWidth=this.minColumnWidth<0?-1:this.minColumnWidth*i.subColumnCount*i.columnCount,i.hScrollBarEnabled=this.minColumnWidth>0&&f.getMarginBox(this.grid).w<i.minSheetWidth),this._configureScrollBar(i)}else void 0!=this._resizeTimer&&clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(n.hitch(this,function(){this._resizeHandler(t,!0)}),100)},_columnHeaderClick:function(t){a.stop(t);var e=b("td",this.columnHeaderTable).indexOf(t.currentTarget);this._onColumnHeaderClick({index:e,date:this.renderData.dates[e],triggerEvent:t})},_buildColumnHeader:function(t,e){var i=this.columnHeaderTable;if(i){var o=t.columnCount-(e?e.columnCount:0);8==l("ie")&&(null==this._colTableSave?this._colTableSave=n.clone(i):0>o&&(this._cleanupColumnHeader(),this.columnHeader.removeChild(i),v.destroy(i),i=n.clone(this._colTableSave),this.columnHeaderTable=i,this.columnHeader.appendChild(i),o=t.columnCount));var r,s,d,c=b("tbody",i),C=b("tr",i);if(r=1==c.length?c[0]:h.create("tbody",null,i),s=1==C.length?C[0]:v.create("tr",null,r),o>0)for(var f=0;o>f;f++){d=v.create("td",null,s);var g=[];g.push(u(d,"click",n.hitch(this,this._columnHeaderClick))),l("touch-events")?(g.push(u(d,"touchstart",function(t){a.stop(t),m.add(t.currentTarget,"Active")})),g.push(u(d,"touchend",function(t){a.stop(t),m.remove(t.currentTarget,"Active")}))):(g.push(u(d,"mousedown",function(t){a.stop(t),m.add(t.currentTarget,"Active")})),g.push(u(d,"mouseup",function(t){a.stop(t),m.remove(t.currentTarget,"Active")})),g.push(u(d,"mouseover",function(t){a.stop(t),m.add(t.currentTarget,"Hover")})),g.push(u(d,"mouseout",function(t){a.stop(t),m.remove(t.currentTarget,"Hover")}))),this._columnHeaderHandlers.push(g)}else{o=-o;for(var f=0;o>f;f++){d=s.lastChild,s.removeChild(d),v.destroy(d);for(var _=this._columnHeaderHandlers.pop();_.length>0;)_.pop().remove()}}if(b("td",i).forEach(function(e,i){e.className="",0==i?m.add(e,"first-child"):i==this.renderData.columnCount-1&&m.add(e,"last-child");var o=t.dates[i];this._setText(e,this._formatColumnHeaderLabel(o)),this.styleColumnHeaderCell(e,o,t)},this),this.yearColumnHeaderContent){var H=t.dates[0];this._setText(this.yearColumnHeaderContent,t.dateLocaleModule.format(H,{selector:"date",datePattern:"yyyy"}))}}},_cleanupColumnHeader:function(){for(;this._columnHeaderHandlers.length>0;)for(var t=this._columnHeaderHandlers.pop();t.length>0;)t.pop().remove()},styleColumnHeaderCell:function(t,e,i){m.add(t,this._cssDays[e.getDay()]),this.isToday(e)?m.add(t,"dojoxCalendarToday"):this.isWeekEnd(e)&&m.add(t,"dojoxCalendarWeekend")},_buildSubColumnHeader:function(t,e){var i=this.subColumnHeaderTable;if(i&&null!=this.subColumns){var o=t.columnCount-b("td",i).length;8==l("ie")&&(null==this._colSubTableSave?this._colSubTableSave=n.clone(i):0>o&&(this.subColumnHeader.removeChild(i),v.destroy(i),i=n.clone(this._colSubTableSave),this.subColumnHeaderTable=i,this.subColumnHeader.appendChild(i),o=t.columnCount));var r,a,s,d=b(">tbody",i);r=1==d.length?d[0]:h.create("tbody",null,i);var u=b(">tr",r);a=1==u.length?u[0]:v.create("tr",null,r);var c=t.subColumnCount;if(o>0)for(var f=0;o>f;f++)s=v.create("td",null,a),v.create("div",{className:"dojoxCalendarSubHeaderContainer"},s);else{o=-o;for(var f=0;o>f;f++)s=a.lastChild,a.removeChild(s),v.destroy(s)}b("td",i).forEach(function(e,i){e.className="",0==i?m.add(e,"first-child"):i==this.renderData.columnCount-1&&m.add(e,"last-child"),b(".dojoxCalendarSubHeaderContainer",e).forEach(function(t,e){var i=b(".dojoxCalendarSubHeaderContainer",t).length-c;if(0!=i){for(var o=t.childNodes.length,e=0;o>e;e++)t.removeChild(t.lastChild);for(var r=0;c>r;r++)v.create("div",{className:"dojoxCalendarSubHeaderCell dojoxCalendarSubHeaderLabel"},t)}var a=100/c+"%";b(".dojoxCalendarSubHeaderCell",t).forEach(function(t,e){t.className="dojoxCalendarSubHeaderCell dojoxCalendarSubHeaderLabel";var i=1==c?e:Math.floor(e/c);subColIdx=1==c?0:e-i*c,C.set(t,{width:a,left:100*subColIdx/c+"%"}),m[subColIdx<c-1&&1!==c?"add":"remove"](t,"subColumn"),m.add(t,this.subColumns[subColIdx]),this._setText(t,this.subColumnLabelFunc(this.subColumns[subColIdx]))},this)},this);var o=t.dates[i];this.styleSubColumnHeaderCell(e,o,t)},this)}},subColumnLabelFunc:function(t){return t},styleSubColumnHeaderCell:function(t,e,i){m.add(t,this._cssDays[e.getDay()]),this.isToday(e)?m.add(t,"dojoxCalendarToday"):this.isWeekEnd(e)&&m.add(t,"dojoxCalendarWeekend")},_addMinutesClasses:function(t,e){switch(e){case 0:m.add(t,"hour");break;case 30:m.add(t,"halfhour");break;case 15:case 45:m.add(t,"quarterhour")}},_buildRowHeader:function(t,e){var i=this.rowHeaderTable;if(i){null==this._rowHeaderLabelContainer&&(this._rowHeaderLabelContainer=v.create("div",{"class":"dojoxCalendarRowHeaderLabelContainer"},this.rowHeader)),C.set(i,"height",t.sheetHeight+"px");var o,r,a,n=b("tbody",i);o=1==n.length?n[0]:v.create("tbody",null,i);var s=Math.floor(60/t.rowHeaderGridSlotDuration)*t.hourCount,d=s-(e?Math.floor(60/e.rowHeaderGridSlotDuration)*e.hourCount:0);if(d>0)for(var h=0;d>h;h++)r=v.create("tr",null,o),a=v.create("td",null,r);else{d=-d;for(var h=0;d>h;h++)o.removeChild(o.lastChild)}var u=this.renderData,c=Math.ceil(t.hourSize/(60/t.rowHeaderGridSlotDuration)),f=new Date(2e3,0,1,0,0,0);b("tr",i).forEach(function(e,i){var o=b("td",e)[0];o.className="",C.set(e,"height",7==l("ie")?c-2*(60/t.rowHeaderGridSlotDuration):c+"px");var r=t.minHours+i*this.renderData.rowHeaderGridSlotDuration/60,a=i*this.renderData.rowHeaderGridSlotDuration%60;this.styleRowHeaderCell(o,r,a,u),this._addMinutesClasses(o,a)},this);var g=this._rowHeaderLabelContainer;d=Math.floor(60/this.rowHeaderLabelSlotDuration)*t.hourCount-g.childNodes.length;var _;if(d>0)for(var h=0;d>h;h++)_=v.create("span",null,g),m.add(_,"dojoxCalendarRowHeaderLabel");else{d=-d;for(var h=0;d>h;h++)g.removeChild(g.lastChild)}c=Math.ceil(t.hourSize/(60/this.rowHeaderLabelSlotDuration)),b(">span",g).forEach(function(e,i){f.setHours(0),f.setMinutes(60*t.minHours+i*this.rowHeaderLabelSlotDuration),this._configureRowHeaderLabel(e,f,i,c*i,u)},this)}},_configureRowHeaderLabel:function(t,e,i,o,r){this._setText(t,this._formatRowHeaderLabel(e)),C.set(t,"top",o+(0==i?this.rowHeaderFirstLabelOffset:this.rowHeaderLabelOffset)+"px");var a=r.minHours+i*this.rowHeaderLabelSlotDuration/60,n=i*this.rowHeaderLabelSlotDuration%60;m.remove(t,["hour","halfhour","quarterhour"]),this._addMinutesClasses(t,n),this.styleRowHeaderCell(t,a,n,r)},styleRowHeaderCell:function(t,e,i,o){},_buildGrid:function(t,e){var i=this.gridTable;if(i){C.set(i,"height",t.sheetHeight+"px");var o=Math.floor(60/t.slotDuration)*t.hourCount,r=o-(e?Math.floor(60/e.slotDuration)*e.hourCount:0),a=r>0,s=t.columnCount-(e?e.columnCount:0);8==l("ie")&&(null==this._gridTableSave?this._gridTableSave=n.clone(i):0>s&&(this.grid.removeChild(i),v.destroy(i),i=n.clone(this._gridTableSave),this.gridTable=i,this.grid.appendChild(i),s=t.columnCount,r=o,a=!0));var d,h=b("tbody",i);if(d=1==h.length?h[0]:v.create("tbody",null,i),a)for(var u=0;r>u;u++)v.create("tr",null,d);else{r=-r;for(var u=0;r>u;u++)d.removeChild(d.lastChild)}var c=Math.floor(60/t.slotDuration)*t.hourCount-r,f=a||s>0;s=f?s:-s,b("tr",i).forEach(function(e,i){if(f)for(var o=i>=c?t.columnCount:s,i=0;o>i;i++)v.create("td",null,e);else for(var i=0;s>i;i++)e.removeChild(e.lastChild)}),b("tr",i).forEach(function(e,i){C.set(e,"height",t.slotSize+"px"),0==i?m.add(e,"first-child"):i==o-1&&m.add(e,"last-child");var r=i*this.renderData.slotDuration%60,a=this.minHours+Math.floor(i*this.renderData.slotDuration/60);b("td",e).forEach(function(e,i){e.className="",0==i?m.add(e,"first-child"):i==this.renderData.columnCount-1&&m.add(e,"last-child");var o=t.dates[i];this.styleGridCell(e,o,a,r,t),this._addMinutesClasses(e,r)},this)},this)}},styleGridCellFunc:null,defaultStyleGridCell:function(t,e,i,o,r){return m.add(t,[this._cssDays[e.getDay()],"H"+i,"M"+o]),this.isToday(e)?m.add(t,"dojoxCalendarToday"):this.isWeekEnd(e)?m.add(t,"dojoxCalendarWeekend"):void 0},styleGridCell:function(t,e,i,o,r){this.styleGridCellFunc?this.styleGridCellFunc(t,e,i,o,r):this.defaultStyleGridCell(t,e,i,o,r)},_buildItemContainer:function(t,e){var i=this.itemContainerTable;if(i){var o=[],r=[];C.set(i,"height",t.sheetHeight+"px");var a=e?e.columnCount:0,s=t.columnCount-a;8==l("ie")&&(null==this._itemTableSave?this._itemTableSave=n.clone(i):0>s&&(this.itemContainer.removeChild(i),this._recycleItemRenderers(!0),v.destroy(i),i=n.clone(this._itemTableSave),this.itemContainerTable=i,this.itemContainer.appendChild(i),s=t.columnCount));var d,h,u,c=b("tbody",i),f=b("tr",i);d=1==c.length?c[0]:v.create("tbody",null,i),h=1==f.length?f[0]:v.create("tr",null,d);var g=t.subColumnCount;if(s>0)for(var _=0;s>_;_++)u=v.create("td",null,h),v.create("div",{className:"dojoxCalendarContainerColumn"},u);else{s=-s;for(var _=0;s>_;_++)h.removeChild(h.lastChild)}b("td",i).forEach(function(e,i){b(".dojoxCalendarContainerColumn",e).forEach(function(i,o){C.set(i,"height",t.sheetHeight+"px");var r=b(".dojoxCalendarSubContainerColumn",e).length-g;if(0!=r){for(var a=i.childNodes.length,o=0;a>o;o++)i.removeChild(i.lastChild);for(var n=0;g>n;n++){var s=v.create("div",{className:"dojoxCalendarSubContainerColumn"},i);v.create("div",{className:"dojoxCalendarDecorationContainerColumn"},s),v.create("div",{className:"dojoxCalendarEventContainerColumn"},s)}}},this);var a=100/g+"%";b(".dojoxCalendarSubContainerColumn",e).forEach(function(t,e){var i=1==g?e:Math.floor(e/g);subColIdx=1==g?0:e-i*g,C.set(t,{width:a,left:100*subColIdx/g+"%"}),m[subColIdx<g-1&&1!==g?"add":"remove"](t,"subColumn"),b(".dojoxCalendarEventContainerColumn",t).forEach(function(t,e){o.push(t)},this),b(".dojoxCalendarDecorationContainerColumn",t).forEach(function(t,e){r.push(t)},this)},this)},this),t.cells=o,t.decorationCells=r}},showTimeIndicator:!0,timeIndicatorRefreshInterval:6e4,_setShowTimeIndicatorAttr:function(t){this._set("showTimeIndicator",t),this._layoutTimeIndicator(this.renderData)},_layoutTimeIndicator:function(t){if(t){if(this.showTimeIndicator){var e=new t.dateClassObj,i=this.isOverlapping(t,t.startTime,t.endTime,e,e)&&e.getHours()>=this.get("minHours")&&60*e.getHours()+e.getMinutes()<60*this.get("maxHours");if(i){this._timeIndicator||(this._timeIndicator=v.create("div",{className:"dojoxCalendarTimeIndicator"}));for(var o=this._timeIndicator,r=0;r<this.renderData.columnCount&&!this.isSameDay(e,this.renderData.dates[r]);r++);var a=this.computeProjectionOnDate(t,this.floorToDay(e),e,t.sheetHeight);if(a!=t.sheetHeight){C.set(o,{top:a+"px",display:"block"});var s=t.cells[r*t.subColumnCount].parentNode.parentNode;return s!=o.parentNode&&(null!=o.parentNode&&o.parentNode.removeChild(o),s.appendChild(o)),void(null==this._timeIndicatorTimer&&(this._timeIndicatorTimer=setInterval(n.hitch(this,function(){this._layoutTimeIndicator(this.renderData)}),this.timeIndicatorRefreshInterval)))}}}this._timeIndicatorTimer&&(clearInterval(this._timeIndicatorTimer),this._timeIndicatorTimer=null),this._timeIndicator&&C.set(this._timeIndicator,"display","none")}},beforeDeactivate:function(){this._timeIndicatorTimer&&(clearInterval(this._timeIndicatorTimer),this._timeIndicatorTimer=null)},_overlapLayoutPass2:function(t){var e,i,o,r;for(o=t[t.length-1],i=0;i<o.length;i++)o[i].extent=1;for(e=0;e<t.length-1;e++){o=t[e];for(var i=0;i<o.length;i++)if(r=o[i],-1==r.extent){r.extent=1;for(var a=0,n=!1,s=e+1;s<t.length&&!n;s++){for(var l=t[s],d=0;d<l.length&&!n;d++){var h=l[d];r.start<h.end&&h.start<r.end&&(n=!0)}n||a++}r.extent+=a}}},_defaultItemToRendererKindFunc:function(t){return"vertical"},_layoutInterval:function(t,e,i,o,r,a){var n=[];if(t.colW=this.itemContainer.offsetWidth/t.columnCount,"dataItems"===a){for(var s=0;s<r.length;s++){var l=r[s],d=this._itemToRendererKind(l);"vertical"===d&&n.push(l)}this._layoutRendererWithSubColumns(t,"vertical",!0,e,i,o,n,a)}else this._layoutRendererWithSubColumns(t,"decoration",!1,e,i,o,r,a)},_layoutRendererWithSubColumns:function(t,e,i,o,r,a,l,d){if(l.length>0)if(t.subColumnCount>1){var h={},u=this.subColumns;s.forEach(u,function(t){h[t]=[]}),s.forEach(l,function(t){"decorationItems"===d?t.subColumn?h[t.subColumn]&&h[t.subColumn].push(t):s.forEach(u,function(e){var i=n.mixin({},t);i.subColumn=e,h[e].push(i)}):t.subColumn&&h[t.subColumn]&&h[t.subColumn].push(t)});var c=0;s.forEach(this.subColumns,function(n){this._layoutVerticalItems(t,e,i,o,c++,r,a,h[n],d)},this)}else this._layoutVerticalItems(t,e,i,o,0,r,a,l,d)},_getColumn:function(t,e,i,o){var r="dataItems"===o?t.cells:t.decorationCells;return r[e*t.subColumnCount+i]},_layoutVerticalItems:function(t,e,i,o,r,a,s,l,d){if(!("dataItems"===d&&null==this.verticalRenderer||"decorationItems"===d&&null==this.verticalDecorationRenderer)){for(var h=this._getColumn(t,o,r,d),u=[],c=0;c<l.length;c++){var m=l[c],f=this.computeRangeOverlap(t,m.startTime,m.endTime,a,s),g=this.computeProjectionOnDate(t,a,f[0],t.sheetHeight),b=this.computeProjectionOnDate(t,a,f[1],t.sheetHeight);if(b>g){var _=n.mixin({start:g,end:b,range:f,item:m},m);u.push(_)}}var H="dataItems"===d?this.computeOverlapping(u,this._overlapLayoutPass2).numLanes:1,p=this.percentOverlap/100;for(c=0;c<u.length;c++){m=u[c];var S,T,D,x;if("dataItems"===d){var y=m.lane,w=m.extent;0==p?(S=1==H?t.colW:(t.colW-(H-1)*this.horizontalGap)/H,T=y*(S+this.horizontalGap),S=1==w?S:S*w+(w-1)*this.horizontalGap,S=100*S/t.colW,T=100*T/t.colW):(S=1==H?100:100/(H-(H-1)*p),T=y*(S-p*S),S=1==w?S:S*(w-(w-1)*p)),D=this._createRenderer(m,"vertical",this.verticalRenderer,"dojoxCalendarVertical");var j=this.isItemBeingEdited(m),I=this.isItemSelected(m),M=this.isItemHovered(m),B=this.isItemFocused(m);x=D.renderer,x.set("hovered",M),x.set("selected",I),x.set("edited",j),x.set("focused",this.showFocus?B:!1),x.set("storeState",this.getItemStoreState(m)),x.set("moveEnabled",this.isItemMoveEnabled(m._item,"vertical")),x.set("resizeEnabled",this.isItemResizeEnabled(m._item,"vertical")),this.applyRendererZIndex(m,D,M,I,j,B)}else S=100,T=0,D=this.decorationRendererManager.createRenderer(m,"vertical",this.verticalDecorationRenderer,"dojoxCalendarDecoration"),x=D.renderer;C.set(D.container,{top:m.start+"px",left:T+"%",width:S+"%",height:m.end-m.start+1+"px"}),x.updateRendering&&x.updateRendering(S,m.end-m.start+1),v.place(D.container,h),C.set(D.container,"display","block")}}},_sortItemsFunction:function(t,e){var i=this.dateModule.compare(t.startTime,e.startTime);return 0==i&&(i=-1*this.dateModule.compare(t.endTime,e.endTime)),this.isLeftToRight()?i:-i},_getNormalizedCoords:function(t,e,i,o){if(null!=t){var r=f.position(this.itemContainer,!0);t.touches?(o=void 0==o?0:o,e=t.touches[o].pageX-r.x,i=t.touches[o].pageY-r.y):(e=t.pageX-r.x,i=t.pageY-r.y)}var a=f.getContentBox(this.itemContainer);return this.isLeftToRight()||(e=a.w-e),0>e?e=0:e>a.w&&(e=a.w-1),0>i?i=0:i>a.h&&(i=a.h-1),{x:e,y:i}},getTime:function(t,e,i,o){var r=this._getNormalizedCoords(t,e,i,o),a=this.getTimeOfDay(r.y,this.renderData),n=f.getMarginBox(this.itemContainer).w/this.renderData.columnCount,s=Math.floor(r.x/n),l=null;return s<this.renderData.dates.length&&(l=this.newDate(this.renderData.dates[s]),l=this.floorToDay(l,!0),l.setHours(a.hours),l.setMinutes(a.minutes)),l},getSubColumn:function(t,e,i,o){if(null==this.subColumns||1==this.subColumns.length)return null;var r=this._getNormalizedCoords(t,e,i,o),a=this.renderData,n=f.getMarginBox(this.itemContainer).w/this.renderData.columnCount,s=Math.floor(r.x/n),l=Math.floor((r.x-s*n)/(n/a.subColumnCount));return this.subColumns[l]},_onGridMouseUp:function(t){this.inherited(arguments),this._gridMouseDown&&(this._gridMouseDown=!1,this._onGridClick({date:this.getTime(t),triggerEvent:t}))},_onGridTouchStart:function(t){this.inherited(arguments);var e=this._gridProps;e.moved=!1,e.start=t.touches[0].screenY,e.scrollTop=this._getScrollPosition()},_onGridTouchMove:function(t){if(this.inherited(arguments),t.touches.length>1&&!this._isEditing)return void a.stop(t);if(this._gridProps&&!this._isEditing){var e={x:t.touches[0].screenX,y:t.touches[0].screenY},i=this._edProps;if(!i||i&&(Math.abs(e.x-i.start.x)>25||Math.abs(e.y-i.start.y)>25)){this._gridProps.moved=!0;var o=t.touches[0].screenY-this._gridProps.start,r=this._gridProps.scrollTop-o,n=this.itemContainer.offsetHeight-this.scrollContainer.offsetHeight;0>r?(this._gridProps.start=t.touches[0].screenY,this._setScrollImpl(0),this._gridProps.scrollTop=0):r>n?(this._gridProps.start=t.touches[0].screenY,this._setScrollImpl(n),this._gridProps.scrollTop=n):this._setScrollImpl(r)}}},_onGridTouchEnd:function(t){this.inherited(arguments);var e=this._gridProps;e&&(this._isEditing||e.moved||(e.fromItem||e.editingOnStart||this.selectFromEvent(t,null,null,!0),e.fromItem||(this._pendingDoubleTap&&this._pendingDoubleTap.grid?(this._onGridDoubleClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),clearTimeout(this._pendingDoubleTap.timer),delete this._pendingDoubleTap):(this._onGridClick({date:this.getTime(this._gridProps.event),triggerEvent:this._gridProps.event}),this._pendingDoubleTap={grid:!0,timer:setTimeout(n.hitch(this,function(){delete this._pendingDoubleTap}),this.doubleTapDelay)}))),this._gridProps=null)},_onColumnHeaderClick:function(t){this._dispatchCalendarEvt(t,"onColumnHeaderClick")},onColumnHeaderClick:function(t){},getTimeOfDay:function(t,e){var i=60*e.minHours,o=60*e.maxHours,r=i+t*(o-i)/e.sheetHeight;return{hours:Math.floor(r/60),minutes:Math.floor(r%60)}},_isItemInView:function(t){var e=this.inherited(arguments);if(e){var i=this.renderData,o=i.dateModule.difference(t.startTime,t.endTime,"millisecond"),r=36e5*(24-i.maxHours+i.minHours);if(o>r)return!0;var a=60*t.startTime.getHours()+t.startTime.getMinutes(),n=60*t.endTime.getHours()+t.endTime.getMinutes(),s=60*i.minHours,l=60*i.maxHours;if(a>0&&s>a||a>l&&1440>=a)return!1;if(n>0&&s>n||n>l&&1440>=n)return!1}return e},_ensureItemInView:function(t){var e,i=t.startTime,o=t.endTime,r=this.renderData,a=r.dateModule,n=Math.abs(a.difference(t.startTime,t.endTime,"millisecond")),s=36e5*(24-r.maxHours+r.minHours);
if(n>s)return!1;var l=60*i.getHours()+i.getMinutes(),d=60*o.getHours()+o.getMinutes(),h=60*r.minHours,u=60*r.maxHours;return l>0&&h>l?(this.floorToDay(t.startTime,!0,r),t.startTime.setHours(r.minHours),t.endTime=a.add(t.startTime,"millisecond",n),e=!0):l>u&&1440>=l&&(this.floorToDay(t.startTime,!0,r),t.startTime=a.add(t.startTime,"day",1),t.startTime.setHours(r.minHours),t.endTime=a.add(t.startTime,"millisecond",n),e=!0),d>0&&h>d?(this.floorToDay(t.endTime,!0,r),t.endTime=a.add(t.endTime,"day",-1),t.endTime.setHours(r.maxHours),t.startTime=a.add(t.endTime,"millisecond",-n),e=!0):d>u&&1440>=d&&(this.floorToDay(t.endTime,!0,r),t.endTime.setHours(r.maxHours),t.startTime=a.add(t.endTime,"millisecond",-n),e=!0),e=e||this.inherited(arguments)},_onScrollTimer_tick:function(){this._scrollToPosition(this._getScrollPosition()+this._scrollProps.scrollStep)},snapUnit:"minute",snapSteps:15,minDurationUnit:"minute",minDurationSteps:15,liveLayout:!1,stayInView:!0,allowStartEndSwap:!0,allowResizeLessThan24H:!0})});
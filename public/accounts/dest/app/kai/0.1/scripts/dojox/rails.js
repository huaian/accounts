define("dojox/rails",["dojo","dijit","dojox","dojo/require!dojo/NodeList-traverse"],function(t,a,e){t.provide("dojox.rails"),t.require("dojo.NodeList-traverse"),e.rails.live=function(a,r,o){t.isIE&&r.match(/^(on)?submit$/i)?e.rails.live(a,"click",function(a){var e=a.target,r=e.tagName.toLowerCase();if(("input"==r||"button"==r)&&"submit"==t.attr(e,"type").toLowerCase()){var n=t.query(e).closest("form");if(n.length)var i=t.connect(n[0],"submit",function(a){t.disconnect(i),o.call(a.target,a)})}}):t.connect(t.body(),r,function(e){var r=t.query(e.target).closest(a);r.length&&o.call(r[0],e)})},t.ready(function(a,e,r){return function(){var o=a.query,n=e.live,i=o("meta[name=csrf-token]").attr("content"),c=o("meta[name=csrf-param]").attr("content"),l=function(a,e){var r='<form style="display:none" method="post" action="'+a+'"><input type="hidden" name="_method" value="'+e+'" /><input type="hidden" name="'+c+'" value="'+i+'" /></form>';return t.place(r,t.body())},d=function(t){a.forEach(t,function(t){if(!a.attr(t,"disabled")){var e="input"==t.tagName.toLowerCase()?"value":"innerHTML",r=a.attr(t,"data-disable-with"),o=a.attr(t,e);a.attr(t,"disabled",!0),a.attr(t,"data-original-value",o),a.attr(t,e,r)}})},s={text:"text",json:"application/json","json-comment-optional":"text","json-comment-filtered":"text",javascript:"application/javascript",xml:"text/xml"},u=function(t){var e=t.target,r=e.tagName.toLowerCase(),o="form"==r.toLowerCase()?a.formToObject(e):{},n=a.attr(e,"data-type")||"javascript",i=(a.attr(e,"method")||a.attr(e,"data-method")||"get").toLowerCase(),c=a.attr(e,"action")||a.attr(e,"href");"form"!=r&&"get"!=i&&(e=l(c,i),i="POST"),t.preventDefault(),a.publish("ajax:before",[e]);a.xhr(i,{url:c,headers:{Accept:s[n]},content:o,handleAs:n,load:function(t,r){a.publish("ajax:success",[e,t,r])},error:function(t,r){a.publish("ajax:failure",[e,t,r])},handle:function(t,r){a.publish("ajax:complete",[e,t,r])}});a.publish("ajax:after",[e])},f=function(t){o("*[data-disable-with][disabled]",t).forEach(function(t){var e="input"==t.tagName.toLowerCase()?"value":"innerHTML",r=a.attr(t,"data-original-value");a.attr(t,"disabled",!1),a.attr(t,"data-original-value",null),a.attr(t,e,r)})},m=function(a){var e=a.target,r=l(e.href,t.attr(e,"data-method"));a.preventDefault(),r.submit()},p=function(t){var e=t.target,r=o("*[data-disable-with]",e);r.length&&d(r),a.attr(e,"data-remote")&&(t.preventDefault(),u(t))},v=function(t){var e=r.confirm(a.attr(t.target,"data-confirm"));e?a.attr(t.target,"data-remote")&&u(t):t.preventDefault()};n("*[data-confirm]","click",v),a.subscribe("ajax:complete",f),n("a[data-remote]:not([data-confirm])","click",u),n("a[data-method]:not([data-remote])","click",m),n("form","submit",p)}}(t,e.rails,t.global))});
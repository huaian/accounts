define(["dojo/date/locale","appRestStore/expenses","page/viewFactory","viewUtils/index","viewUtils/expenses_list","./events/events","cutil/c.util.validate"],function(e,t,n,i,a,s,o){"use strict";var c=n.create("appBaseView"),r=c.extend({showHeader:!0,events:{"click .mobile_back":_.debounce(a.goBack,250,!0,function(){})},onCreate:function(){},els:{loginButton:{selector:".js_button_login",type:"jquery"}},onShow:function(){},onHide:function(){},init:function(){},prepareViewData:function(){var n=this;n.viewData.expenseList=n.viewData.expenseList||[];var i=function(t){n.viewData.expenseList=t,_.each(t,function(t){t.date=e.format(new Date(t.date),{datePattern:"yyyy-MM-dd",selector:"date"})}),n.vm&&n.vm.$set("expenseList",n.viewData.expenseList)};t.expenses.get("").then(function(e){n.isSucceedResponse(e)?i(e.body.content):n.showResponseError(e),n.turnOn()},function(){})},prepareEvents:function(){var e=this;e.event=s},prepareViewUtils:function(){var e=this;e.viewUtils=_.extend(a,i)},prepareDataHelper:function(){},afterShow:function(){var e=this;e.hideLoading()},getVueInitParams:function(){var e=this;return{data:{formData:e.memoryStore.getAttr("memory.formData")||{},expenseList:e.viewData.expenseList},methods:{"delete":function(t){Kai.showConfirm({datamodel:{title:"",content:'<div class="font-small align-left">确认删除该记录吗？</div>',btns:[{name:"确认删除",className:"cui-btns-ok"},{name:"取消",className:"cui-btns-cancel"}]},okAction:function(){this.hide(),e.model.trigger("deleteExpense",t)},cancelAction:function(){this.hide()}})},edit:function(t,n){e.forward("h5/view/expenses?"+$.param({ExpenseId:t}))},gotoExpenses:function(t,n){e.forward("h5/view/expenses")},goBack:function(t,n){e.goBack()}}}}});return r});
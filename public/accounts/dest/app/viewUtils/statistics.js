define(["appRestStore/statistics","dojo/_base/lang","cutil/c.util.common","cutil/c.util.validate"],function(t,e,s,a){"use strict";var o={hasValidFormData:function(t){var e=this,s=JSON.parse(JSON.stringify(e.vm.$data.formData));return e.memoryStore.setAttr("memory.formData",s),s.startDate?s:(e.showToast({text:"请选择开始日期"}),!1)},fetchData:function(e){var s=this,a=_.isObject(e)?e:"";t.statistics.get(a).then(function(t){s.isSucceedResponse(t)?(s.viewData.sumExpenses=_.reduce(_.pluck(t.body.expenses,"total"),function(t,e){return t+e},0),s.viewData.sumIncomes=_.reduce(_.pluck(t.body.incomes,"total"),function(t,e){return t+e},0),s.vm&&(s.vm.$set("sumExpenses",s.viewData.sumExpenses),s.vm.$set("sumIncomes",s.viewData.sumIncomes))):s.showResponseError(t)},function(t){s.showResponseError(t)})},search:function(t){var e=this,s=null;return t&&$(t.target).hasClass("form-disabled")?!1:void((s=$.proxy(o.hasValidFormData,e)())&&e.model.trigger("fetchData",s))}};return o});
define(["appRestStore/expenses","dojo/_base/lang","cutil/c.util.common","cutil/c.util.validate"],function(t,e,o,s){"use strict";var a={hasValidFormData:function(t){var e=this,o=JSON.parse(JSON.stringify(e.vm.$data.formData));return e.memoryStore.setAttr("memory.formData",o),o.type?"1"===o.date?(e.showToast({text:"请选择日期"}),!1):_.isNumber(parseFloat(o.amount))?o:(e.showToast({text:"请输入金额"}),!1):(e.showToast({text:"请选择来源"}),!1)},save:function(o){var s=this,r=null;return o&&$(o.target).hasClass("form-disabled")?!1:void((r=$.proxy(a.hasValidFormData,s)())&&t.expenses.add(_.extend(r,{id:s.getQueryObj().expenseid}),{forcePost:!1}).then(function(t){s.isSucceedResponse(t)&&e.exists("body.content"),t?s.showToast({text:"保存成功",callback:function(){s.model.trigger("goBack")}}):s.showResponseError(t)},function(){s.showResponseError(resp)}))}};return a});